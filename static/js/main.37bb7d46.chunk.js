(this.webpackJsonparkhamdraftweb=this.webpackJsonparkhamdraftweb||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),c=a.n(o),l=(a(10),a(2)),i=a(1);a(11);var s=function(e){var t=e.investigator,a=e.secondaryClass,n=e.selectedDeckSize,o=e.selectedTaboo,c=e.deckSize,l=e.cardData,i=e.tabooData,s=["Agnes Baker","Akachi Onyele","Amanda Sharpe",'"Ashcan" Pete',"Calvin Wright","Carolyn Fern","Daisy Walker","Dexter Drake","Diana Stanley","Father Mateo","Finn Edwards","Harvey Walters","Jacqueline Fine","Jenny Barnes","Jim Culver","Joe Diamond","Leo Anderson","Lola Hayes","Luke Robinson","Mandy Thompson","Marie Lambeau","Mark Harrigan","Minh Thi Phan","Nathaniel Cho","Norman Withers","Patrice Hathaway","Preston Fairmont","Rex Murphy","Rita Young","Roland Banks","Sefina Rousseau","Silas Marsh","Sister Mary",'"Skids" O\'Toole',"Stella Clark","Tommy Muldoon","Tony Morgan","Trish Scarborough","Ursula Downs","Wendy Adams","William Yorick","Winifred Habbamock","Zoey Samaras"];function d(t){e.onChangeSetting(t.target.name,t.target.value)}var u=null,f=null,m=null,h=a,g=n||c;if(l)for(var p=Object.keys(l).filter((function(e){return l[e].name===t}))[0],v=l[p].deck_options,b=0;b<v.length;b++){if("Secondary Class"===v[b].name)u=v[b].faction_select.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e[0].toUpperCase()+e.slice(1))}));else if("Deck Size"===v[b].name){f=v[b].deck_size_select.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))}}i&&(m=i.map((function(e,t){return r.a.createElement("option",{value:e.code,key:t},e.date_start)}))).unshift(r.a.createElement("option",{value:"None",key:"100"},"None"));var C=r.a.createElement("div",null,r.a.createElement("label",{className:"taboo",value:o},"Taboo list:"),r.a.createElement("select",{className:"taboo",id:"investigatorList",name:"taboo",value:o,onChange:d},m)),E=u?r.a.createElement("div",null,r.a.createElement("label",{className:"secondaryClass",value:h},"Secondary class:"),r.a.createElement("select",{className:"secondaryClass",name:"secondaryClass",value:h,onChange:d},u)):null,S=f?r.a.createElement("div",null,r.a.createElement("label",{className:"deckSize",value:g},"Deck size:"),r.a.createElement("select",{className:"deckSize",name:"selectedDeckSize",value:g,onChange:d},f)):null;return r.a.createElement("div",{className:"settings investigatorSettings"},r.a.createElement("h3",null,"Investigator Options"),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("label",null,"Investigator:"),r.a.createElement("select",{id:"investigatorList",name:"investigator",value:t,onChange:d},s.map((function(e,t){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("button",{className:"button-rect button-random",onClick:function(t){e.onChangeSetting("investigator",s[Math.floor(Math.random()*s.length)])}},"Random")),E,S,C)};var d=function(e){var t={},a={};function n(t){e.onChangeSetting(t.target.attributes.name.nodeValue,t.target.attributes.value.nodeValue)}return"Build Deck"===e.draftTab?(t={backgroundColor:"#ebebeb"},a={backgroundColor:"#bababa",borderLeft:"black 2px solid",borderBottom:"black 2px solid"}):(t={backgroundColor:"#bababa",borderRight:"black 2px solid",borderBottom:"black 2px solid"},a={backgroundColor:"#ebebeb"}),r.a.createElement("div",{className:"draft-type"},r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Build Deck",style:t,onClick:n},"Build Deck"),r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Upgrade",style:a,onClick:n},"Upgrade"))};var u=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"})};var f=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"},r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("input",{type:"range",min:"2",max:"15",step:"1",value:e.draftCount,className:"slider",name:"draftCount1",onChange:function(t){e.onChangeSetting(t.target.name,t.target.value)}}),r.a.createElement("span",{className:"sliderValue"},e.draftCount))};var m=function(e){return r.a.createElement("div",{className:"draftPhase"},r.a.createElement("h4",{style:{padding:"0 0 5px 0"}},"Stage ",e.phase),r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("input",{type:"range",min:"1",max:"15",value:e.draftCount,className:"slider",name:"draftCount",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCount),r.a.createElement("br",null),r.a.createElement("label",null,"Cards selected in this stage: "),r.a.createElement("input",{type:"range",min:"0",max:e.maxCards,value:e.draftCards,className:"slider",name:"draftCards",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCards),r.a.createElement("label",null,"Include cards with limited deck slots:"),r.a.createElement("input",{type:"checkbox",checked:e.draftUseLimited,name:"draftUseLimited",className:"checkbox",onChange:e.onChangeSetting}))};var h=function(e){var t=e.deckSize-e.draftCards[0],a=t-e.draftCards[1],n=a-e.draftCards[2],o=null,c=null,l={},i={},s={};return t<e.draftCards[1]?(o=t>0?"Only "+t:"No",l={display:"block"}):l={display:"none"},a<e.draftCards[2]?(c=a>0?"Only "+a:"No",i={display:"block"},a<0&&(a=0)):i={display:"none"},s=n>0?{display:"block"}:{display:"none"},r.a.createElement("div",{className:"draftSettingsDraft"},r.a.createElement(m,{phase:"1",draftCount:e.draftCount[0],draftCards:e.draftCards[0],draftUseLimited:e.draftUseLimited[0],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"1",t.target.value)}}),r.a.createElement(m,{phase:"2",draftCount:e.draftCount[1],draftCards:e.draftCards[1],draftUseLimited:e.draftUseLimited[1],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"2",t.target.value)}}),r.a.createElement(m,{phase:"3",draftCount:e.draftCount[2],draftCards:e.draftCards[2],draftUseLimited:e.draftUseLimited[2],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"3",t.target.value)}}),r.a.createElement("div",{className:"warning",style:l},r.a.createElement("b",null,"Warning:")," ",o," cards will be drawn in Phase 2."),r.a.createElement("div",{className:"warning",style:i},r.a.createElement("b",null,"Warning:")," ",c," cards will be drawn in Phase 3."),r.a.createElement("div",{className:"warning",style:s},r.a.createElement("b",null,"Warning:")," The final ",n," cards will be drawn at random."))};var g=function(e){var t,a;return"chaos"===e.draftType?(t=r.a.createElement(u,{onChangeSetting:e.onChangeSetting}),a=r.a.createElement("div",{className:"description"},"The original Ultimatum of Chaos rules from the 2017 Invocation Event.  A full deck will be created completely randomly from all cards available to the chosen investigator.")):"draft"===e.draftType?(t=r.a.createElement(f,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting}),a=r.a.createElement("div",{className:"description"},'Select cards one by one from a random display of cards available to the chosen investigator.  Each card will be selected from a number of cards determined by the "Cards to select from" option.')):"phaseDraft"===e.draftType&&(t=r.a.createElement(h,{draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}),a=r.a.createElement("div",{className:"description"},'The draft will proceed through 3 distinct stages.  All stages will draft from the full set of cards available to the chosen investigator.  Each stage will draft a number of cards equal to "Cards selected in this stage", not including Permanent cards.  Each will be selected from a number of cards determined by the "Cards to select from" option.  This allows you to use completely random selection for part of the deck, or use a wider range of choices for part of the deck.')),r.a.createElement("div",{className:"offsetDiv"},r.a.createElement("label",null,"Type:"),r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:function(t){e.onChangeSetting(t.target.name,t.target.value)}},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft"),r.a.createElement("option",{value:"phaseDraft"},"Draft in stages")),t,a)};var p=function(e){function t(t){e.onChangeSetting(t.target.name,t.target.value)}var a;return"chaos"===e.draftType?a=r.a.createElement(u,{onChangeSetting:e.onChangeSetting}):"draft"===e.draftType&&(a=r.a.createElement(f,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting})),r.a.createElement("div",{className:"offsetDiv"},r.a.createElement("label",null,"Type:"),r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:t},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft")),r.a.createElement("label",null,"Weighting:"),r.a.createElement("select",{name:"draftWeighting",value:e.draftWeighting,onChange:t},r.a.createElement("option",{value:"low"},"Prefer low XP"),r.a.createElement("option",{value:"medium"},"Default"),r.a.createElement("option",{value:"high"},"Prefer high XP")),r.a.createElement("label",null,"XP:"),r.a.createElement("input",{name:"draftXP",type:"number",value:e.draftXP,min:"1",onChange:t}),a)};var v=function(e){var t="Build Deck"===e.draftTab?r.a.createElement(g,{draftType:e.draftType,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}):r.a.createElement(p,{draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}),a=e.ready?e.filteredCount>=e.deckSize?r.a.createElement("button",{className:"button-rect button-green",onClick:function(t){e.onChangeSetting("building",!0)}},"Start"):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",{style:{color:"red"}},"There are not enough cards in the selected packs to draft a complete deck.  Add packs in Collection Options."),r.a.createElement("button",{className:"button-rect button-red"},"Error")):r.a.createElement("button",{className:"button-rect button-red"},"Loading...");return r.a.createElement("div",{className:"settings draftSettings"},r.a.createElement(d,{draftTab:e.draftTab,onChangeSetting:e.onChangeSetting}),r.a.createElement("h3",null,"Draft Options"),r.a.createElement("h5",null,e.draftTab),t,a)};var b=function(e){var t=e.collectionSets,a=e.includedSets,n=e.columnValue,o=e.packData;function c(t){"core"!==t.target.name||t.target.checked?"core2"===t.target.name&&t.target.checked?e.onChangeSetting("collectionSetOn",a):t.target.checked?e.onChangeSetting("collectionSetOn",[t.target.name]):e.onChangeSetting("collectionSetOff",[t.target.name]):e.onChangeSetting("collectionSetOff",a)}var l=a.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("input",{type:"checkbox",checked:t[e],name:e,className:"set-checkbox",onChange:c}),r.a.createElement("label",{className:"set-label"},o[e]))}));return r.a.createElement("div",{className:"cardSet "+n},r.a.createElement("h4",{className:"set-header"},e.header?e.header:o[a[0]]),l,r.a.createElement("div",{style:{position:"absolute",right:"0",top:"0",width:"40%"}},r.a.createElement("button",{className:"button-deselectset",value:"deselect",title:"Deselect all",onClick:function(){e.onChangeSetting("collectionSetOff",a)}}),r.a.createElement("button",{className:"button-selectset",value:"select",title:"Select all",onClick:function(){e.onChangeSetting("collectionSetOn",a)}})))};var C=function(e){var t=e.expandCollection,a=e.collectionSets,n=e.onChangeSetting,o={core:"Core set",core2:"Second core set",dwl:"The Dunwich Legacy",tmm:"The Miskatonic Museum",tece:"The Essex County Express",bota:"Blood on the Altar",uau:"Undimensioned and Unseen",wda:"Where Doom Awaits",litas:"Lost in Time and Space",ptc:"The Path to Carcosa",eotp:"Echoes of the Past",tuo:"The Unspeakable Oath",apot:"A Phantom of Truth",tpm:"The Pallid Mask",bsr:"Black Stars Rise",dca:"Dim Carcosa",tfa:"The Forgotten Age",tof:"Threads of Fate",tbb:"The Boundary Beyond",hote:"Heart of the Elders",tcoa:"The City of Archives",tdoy:"The Depths of Yoth",sha:"Shattered Aeons",tcu:"The Circle Undone",tsn:"The Secret Name",wos:"The Wages of Sin",tgg:"For the Greater Good",uad:"Union and Disillusion",icc:"In the Clutches of Chaos",bbt:"Before the Black Throne",tde:"The Dream Eaters",sfk:"The Search for Kadath",tsh:"A Thousand Shapes of Horror",dsm:"Dark Side of the Moon",pnr:"Point of No Return",wgd:"Where the Gods Dwell",woc:"Weaver of the Cosmos",tic:"The Innsmouth Conspiracy",nat:"Nathaniel Cho",har:"Harvey Walters",win:"Winifred Habbamock",jac:"Jacqueline Fine",ste:"Stella Clark",rtnotz:"Return to the Night of the Zealot",rtdwl:"Return to the Dunwich Legacy",rtptc:"Return to the Path to Carcosa",rttfa:"Return to the Forgotten Age"};function c(a){e.onChangeSetting("expandCollection",!t)}if(t)return r.a.createElement("div",{className:"settings collectionSettings"},r.a.createElement("h3",null,"Collection Options"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(b,{collectionSets:a,includedSets:["core","core2"],columnValue:"colcenter",packData:o,onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(b,{collectionSets:a,includedSets:["dwl","tmm","tece","bota","uau","wda","litas"],columnValue:"col1",packData:o,onChangeSetting:n}),r.a.createElement(b,{collectionSets:a,includedSets:["ptc","eotp","tuo","apot","tpm","bsr","dca"],columnValue:"col2",packData:o,onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(b,{collectionSets:a,includedSets:["tfa","tof","tbb","hote","tcoa","tdoy","sha"],columnValue:"col1",packData:o,onChangeSetting:n}),r.a.createElement(b,{collectionSets:a,includedSets:["tcu","tsn","wos","tgg","uad","icc","bbt"],columnValue:"col2",packData:o,onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(b,{collectionSets:a,includedSets:["tde","sfk","tsh","dsm","pnr","wgd","woc"],columnValue:"col1",packData:o,onChangeSetting:n}),r.a.createElement(b,{collectionSets:a,includedSets:["tic"],columnValue:"col2",packData:o,onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(b,{collectionSets:a,includedSets:["nat","har","win","jac","ste"],header:"Starter Decks",columnValue:"col1",packData:o,onChangeSetting:n}),r.a.createElement(b,{collectionSets:a,includedSets:["rtnotz","rtdwl","rtptc","rttfa"],header:"Return to Boxes",columnValue:"col2",packData:o,onChangeSetting:n})),r.a.createElement("button",{className:"button-rect button-green",onClick:c},"Collapse"));var l=a.core+a.core2,i=0;for(var s in a)1===a[s]&&i++;return i-=l,r.a.createElement("div",{className:"settings collectionSettings"},r.a.createElement("h3",null,"Collection Options"),r.a.createElement("p",null,l," core set",1===l?null:"s",", ",i," pack",1===i?null:"s"," selected"),r.a.createElement("button",{className:"button-rect button-green",onClick:c},"Expand"))};var E=function(e){var t=e.cardList,a=e.cardData,n=e.updateCardOverlay,o=0,c=0,l=0,i=0,s=[],d=[],u=[],f=[],m=[],h=[],g=[],p=[],v=[],b=[],C=[],E=[],S=[];function y(e){var t=a.filter((function(t){return t.code===e.target.id}));if(t&&t.length>0){var r="http://www.arkhamdb.com"+t[0].imagesrc;n(r,"Right")}}function k(e){var t=a.filter((function(t){return t.code===e.target.id}));if(t&&t.length>0){var r="http://www.arkhamdb.com"+t[0].imagesrc;n(r,"Left")}}function D(e){n(null,"Left")}t.forEach((function(e){"event"===e.type_code?(C.push(e),c+=e.count):"skill"===e.type_code?(E.push(e),l+=e.count):"asset"===e.type_code?(e.permanent?b.push(e):"Hand"===e.slot?s.push(e):"Hand x2"===e.slot?d.push(e):"Arcane"===e.slot?u.push(e):"Arcane x2"===e.slot?f.push(e):"Accessory"===e.slot?m.push(e):"Body"===e.slot?h.push(e):"Ally"===e.slot?g.push(e):"Tarot"===e.slot?p.push(e):v.push(e),o+=e.count):(S.push(e),i+=e.count)}));var N=o>0?r.a.createElement("h4",null,"Assets (",o,")"):null,x=s.length>0?r.a.createElement("p",{className:"slot-header"},"Hand"):null,O=s.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),P=d.length>0?r.a.createElement("p",{className:"slot-header"},"Hand x2"):null,T=d.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),L=u.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane"):null,w=u.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),j=f.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane x2"):null,_=f.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),z=m.length>0?r.a.createElement("p",{className:"slot-header"},"Accessory"):null,U=m.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),A=h.length>0?r.a.createElement("p",{className:"slot-header"},"Body"):null,B=h.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),W=g.length>0?r.a.createElement("p",{className:"slot-header"},"Ally"):null,X=g.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),M=p.length>0?r.a.createElement("p",{className:"slot-header"},"Tarot"):null,R=p.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),H=v.length>0?r.a.createElement("p",{className:"slot-header"},"Other"):null,F=v.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),V=b.length>0?r.a.createElement("p",{className:"slot-header"},"Permanent"):null,I=b.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:y,onPointerLeave:D,key:t},e.name,a)})),q=c>0?r.a.createElement("h4",null,"Events (",c,")"):null,J=C.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:D,key:t},e.name,a)})),G=l>0?r.a.createElement("h4",null,"Skills (",l,")"):null,Y=E.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:D,key:t},e.name,a)})),Z=i>0?r.a.createElement("h4",null,"Other (",i,")"):null,K=S.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:D,key:t},e.name,a)}));return r.a.createElement("div",{className:"settings deckSettings"},r.a.createElement("h3",{style:{marginBottom:"-10px"}},"Card List"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement("div",{className:"col1"},N,x,O,P,T,L,w,j,_,z,U,A,B,W,X,M,R,H,F,V,I),r.a.createElement("div",{className:"col2"},q,J,G,Y,Z,K)))};var S=function(e){var t=e.draftCount,a=e.draftPool,n=e.draftCard,o=e.draftType,c=e.phase,l=e.cardList,i=e.updateCardList,s=e.updateDraftPool,d=[];function u(e){var t=a.findIndex((function(t){return e.target.src.includes(t.imagesrc)})),r=n(a[t],d);i(r),s([])}d=d.concat(l);for(var f=[],m=0;m<t;m++){var h="https://www.arkhamdb.com"+a[m].imagesrc;f.push(r.a.createElement("div",{className:"draft-card",key:m},r.a.createElement("img",{className:"draft-image",src:h,alt:a[m].name,onClick:u})))}var g="phaseDraft"===o?" - Stage "+c:null;return r.a.createElement("div",{className:"settings draftAreaSettings"},r.a.createElement("h3",null,"Draft",g),r.a.createElement("div",{className:"draft-container"},f),r.a.createElement("p",null,"Click image to draft card"))};var y=function(e){var t=e.investigator,a=e.deckSize,n=e.draftTab,o=e.draftXP,c=e.draftCount,l=e.draftProgress,i=e.draftType,s=e.phase,d=e.cardList,u=e.draftPool,f=e.cardData,m=e.draftCard,h=e.updateCardList,g=e.updateDraftPool,p=e.resetApp,v=e.updateCardOverlay,b=null,C=null;if(f){var y=Object.keys(f).filter((function(e){return f[e].name===t}))[0],k="https://www.arkhamdb.com"+f[y].imagesrc,D="https://www.arkhamdb.com"+f[y].backimagesrc;b=r.a.createElement("img",{className:"investigator-image",src:k,alt:e.investigator}),C=r.a.createElement("img",{className:"investigator-image",src:D,alt:e.investigator+" (back)"})}var N=null;u.length>0&&(N=r.a.createElement(S,{draftCount:c,draftCard:m,phase:s,draftType:i,draftPool:u,cardList:d,updateCardList:h,updateDraftPool:g}));var x="Build Deck"===n?r.a.createElement("p",null,r.a.createElement("b",null,"Cards: "),l,"/",a):r.a.createElement("p",null,r.a.createElement("b",null,"XP: "),l,"/",o);return r.a.createElement("div",null,r.a.createElement("div",{className:"settings draftHeaderSettings"},r.a.createElement("h2",null,t),r.a.createElement("br",null),b,C,x),N,r.a.createElement(E,{cardList:d,cardData:f,updateCardOverlay:v}),r.a.createElement("button",{className:"button-rect button-green",onClick:p},"Restart"))};var k=function(e){var t=e.investigator,a=e.secondaryClass,n=e.cardData,r=e.cardList,o=e.deckSize,c=e.upgrade,l=e.draftUseLimited,i=e.draftXP,s=e.collectionSets,d=Object.keys(n).filter((function(e){return n[e].name===t}))[0],u=n[d].deck_options,f=function(e,t){if(!e)return[];var a=[];return e.forEach((function(e){for(var n=!1,r=0;r<t.length;r++){if(!t[r].limit)N(e,t[r])&&(n=!0)}n||a.push(e)})),a}(r,u),m=null;if("Joe Diamond"===t){var h=r.filter((function(e){var t=e.traits;return!!(t&&t.search(new RegExp("insight","i"))>=0)}));o-k(r)+k(h)<=10&&(m=[{requirement:10,trait:"insight"}])}else if("Lola Hayes"===t){for(var g=["guardian","seeker","rogue","mystic","survivor"].map((function(e){return{faction:e,count:k(r.filter((function(t){return t.faction_code===e||t.faction2_code===e})))}})).sort((function(e,t){return t.count-e.count})),p=0,v=0;v<3;v++)p+=Math.min(7,g[v].count);if(o-k(r)+p<=21){for(var b=g[2].count,C=[],E=0;E<5;E++)g[E].count<7&&g[E].count>=b&&C.push(g[E].faction);m=[{requirement:7,faction:C}]}}var S=0,y=0;function k(e){var t=0;return e&&e.forEach((function(e){e.permanent||(t+=e.count)})),t}function D(e,t){var a=0;return e&&e.forEach((function(e){N(e,t)&&(a+=e.count)})),a}function N(e,t){var n=!0,r=!0,o=!0,c=!0,l=!0,i=!0,s=!0;if("Secondary Class"===t.name&&(o=!1,e.faction_code===a&&(o=!0),e.faction2_code===a&&(o=!0)),t.faction){r=!1;for(var d=0;d<t.faction.length;d++)e.faction_code===t.faction[d]&&(r=!0),e.faction2_code===t.faction[d]&&(r=!0)}if(t.level){n=!1;var u=t.level.min,f=t.level.max,m=void 0===e.xp?0:e.xp;m>=u&&m<=f&&(n=!0)}if(t.trait){c=!1;var h=e.traits;h&&h.search(new RegExp(t.trait,"i"))>=0&&(c=!0)}if(t.uses){l=!1;var g=e.text;g&&g.search(new RegExp("Uses \\([0-9\\s]+"+t.uses[0]+"\\)","i"))>=0&&(l=!0)}if(t.type){i=!1;var p=e.type_code;p&&t.type.find((function(e){return e===p}))&&(i=!0)}return t.text&&(s=!1,e.text&&e.text.search(new RegExp(t.text,"i"))>=0&&(s=!0)),r&&n&&c&&l&&i&&o&&s}return c&&(S=1,y=i),n.filter((function(e){if("investigator"===e.type_code)return!1;if("story"===e.type_code)return!1;if("location"===e.type_code)return!1;if("enemy"===e.type_code)return!1;if("treachery"===e.type_code)return!1;if(e.bonded_to)return!1;if(e.subtype_code)return!1;var t=0;if(e.xp&&(t=e.xp),e.tabooxp&&(t+=e.tabooxp),(e.exceptional||e.tabooexceptional)&&(t*=2),t<S)return!1;if(t>y)return!1;if(e.restrictions&&e.restrictions.investigator)return!1;if(!s[e.pack_code])return!1;for(var a=!1,n=!1,o=0;o<u.length;o++)if(!u[o].requirement){var c=!1;if(N(e,u[o]))if(c=!0,u[o].not)n=!0;else if(u[o].limit){if(l)D(f,u[o])>=u[o].limit&&(c=!1);else c=!1}c&&(a=!0)}if(!a||n)return!1;var i=!1;if(r.forEach((function(t){if(t.name===e.name){var a=e.deck_limit,n=e.quantity;"core"===e.pack_code&&0===s.core2&&n<a&&(a=n),t.count>=a&&(i=!0)}})),i)return!1;if(m)for(var d=0;d<m.length;d++)if(!N(e,m[d]))return!1;return!0}))};var D=function(e){var t=null,a=Object(n.useState)(null),o=Object(i.a)(a,2),c=o[0],l=o[1],d=Object(n.useState)('Left"'),u=Object(i.a)(d,2),f=u[0],m=u[1],h=null;if(c&&(h=r.a.createElement("div",{className:"floatingImage"+f},r.a.createElement("img",{src:c,alt:""}))),e.fetchError)t=r.a.createElement("div",null,"Fetch error!");else if(e.cardData&&e.tabooData)if(e.building)t=r.a.createElement(y,{draftType:e.draftType,draftTab:e.draftTab,investigator:e.investigator,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftXP:e.draftXP,draftCount:e.draftCount[e.phase-1],draftCards:e.draftCards[e.phase-1],draftProgress:e.draftProgress,phase:e.phase,cardList:e.cardList,cardData:e.cardData,draftPool:e.draftPool,draftCard:e.draftCard,updateCardList:e.updateCardList,updateDraftPool:e.updateDraftPool,updateCardOverlay:function(e,t){l(e),m(t)},resetApp:e.resetApp});else{var g=0;k({investigator:e.investigator,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftUseLimited:[!0,!0,!0],draftXP:e.draftXP,upgrade:"Upgrade"===e.draftTab,cardList:e.cardList,cardData:e.cardData,collectionSets:e.collectionSets}).forEach((function(t){if(t.deck_limit&&("asset"===t.type_code||"event"===t.type_code||"skill"===t.type_code)&&"weakness"!==t.subtype_code&&"basicweakness"!==t.subtype_code&&e.collectionSets[t.pack_code]&&0!==e.collectionSets[t.pack_code]&&(!t.restrictions||!t.restrictions.investigator)){var a=t.deck_limit,n=t.quantity;1===e.collectionSets[t.pack_code]&&"core"===t.pack_code&&0===e.collectionSets.core2&&n<a&&(a=n),g+=a}})),"chaos"===e.draftType?g-=2:g-=30,t=r.a.createElement("div",null,r.a.createElement(s,{investigator:e.investigator,secondaryClass:e.secondaryClass,selectedDeckSize:e.selectedDeckSize,selectedTaboo:e.selectedTaboo,deckSize:e.deckSize,cardData:e.cardData,tabooData:e.tabooData,onChangeSetting:e.handleChange}),r.a.createElement(C,{expandCollection:e.expandCollection,collectionSets:e.collectionSets,onChangeSetting:e.handleChange}),r.a.createElement(v,{draftTab:e.draftTab,draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,ready:e.ready,filteredCount:g,onChangeSetting:e.handleChange}))}else t=r.a.createElement("div",{style:{marginBottom:"20px"}},"Loading...");return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"ArkhamDraft"),t,h,r.a.createElement("div",{className:"copyright",style:{padding:"5px",boxSizing:"border-box"}},"Arkham Horror: The Card Game and all information presented here, both literal and graphical, is copyrighted by Fantasy Flight Games. This website is not produced, endorsed, supported, or affiliated with Fantasy Flight Games."))};var N=function(e,t){var a=!1,n=null;if(0===e.length)return null;for(var r=function(){var r=(n=e[Math.floor(Math.random()*e.length)]).code;(t&&t.length>0?t.findIndex((function(e){return e.code===r})):-1)<0&&(a=!0)};!a;)r();return n};var x=function(e){var t=e.draftCards,a=e.draftCard,n=e.cardList,r=e.investigator,o=[];o=o.concat(n);for(var c=0;c<t;){e.cardList=o;var l=k(e),i=N(l);o=a(i,o),i.permanent||c++,"Joe Diamond"!==r&&"Lola Hayes"!==r||(e.cardList=o,l=k(e))}return o};var O=function(e){for(var t=e.draftCount,a=k(e),n=[],r=0;r<t;r++){var o=N(a,n);n.push(o)}return n};var P=function(){var e=Object(n.useState)("Agnes Baker"),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),s=Object(i.a)(c,2),d=s[0],u=s[1],f=Object(n.useState)(null),m=Object(i.a)(f,2),h=m[0],g=m[1],p=Object(n.useState)("None"),v=Object(i.a)(p,2),b=v[0],C=v[1],E=Object(n.useState)("30"),S=Object(i.a)(E,2),y=S[0],k=S[1],N=Object(n.useState)("Build Deck"),P=Object(i.a)(N,2),T=P[0],L=P[1],w=Object(n.useState)("draft"),j=Object(i.a)(w,2),_=j[0],z=j[1],U=Object(n.useState)("medium"),A=Object(i.a)(U,2),B=A[0],W=A[1],X=Object(n.useState)(1),M=Object(i.a)(X,2),R=M[0],H=M[1],F=Object(n.useState)([3,3,3]),V=Object(i.a)(F,2),I=V[0],q=V[1],J=Object(n.useState)([10,10,10]),G=Object(i.a)(J,2),Y=G[0],Z=G[1],K=Object(n.useState)([!0,!0,!0]),Q=Object(i.a)(K,2),$=Q[0],ee=Q[1],te=Object(n.useState)(!1),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!0),ce=Object(i.a)(oe,2),le=ce[0],ie=ce[1],se=Object(n.useState)(null),de=Object(i.a)(se,2),ue=de[0],fe=de[1],me=Object(n.useState)(null),he=Object(i.a)(me,2),ge=he[0],pe=he[1],ve=Object(n.useState)(!1),be=Object(i.a)(ve,2),Ce=be[0],Ee=be[1],Se=Object(n.useState)([]),ye=Object(i.a)(Se,2),ke=ye[0],De=ye[1],Ne=Object(n.useState)([]),xe=Object(i.a)(Ne,2),Oe=xe[0],Pe=xe[1],Te=Object(n.useState)(1),Le=Object(i.a)(Te,2),we=Le[0],je=Le[1],_e=Object(n.useState)(!1),ze=Object(i.a)(_e,2),Ue=ze[0],Ae=ze[1],Be=Object(n.useState)({core:1,core2:1,dwl:1,tmm:1,tece:1,bota:1,uau:1,wda:1,litas:1,ptc:1,eotp:1,tuo:1,apot:1,tpm:1,bsr:1,dca:1,tfa:1,tof:1,tbb:1,hote:1,tcoa:1,tdoy:1,sha:1,tcu:1,tsn:1,wos:1,tgg:1,uad:1,icc:1,bbt:1,tde:1,sfk:1,tsh:1,dsm:1,pnr:1,wgd:1,woc:1,tic:1,rtnotz:1,rtdwl:1,rtptc:1,rttfa:1,nat:1,har:1,win:1,jac:1,ste:1,books:0}),We=Object(i.a)(Be,2),Xe=We[0],Me=We[1],Re=Object(n.useState)(!1),He=Object(i.a)(Re,2),Fe=He[0],Ve=He[1],Ie=0,qe=0;if(ke)for(var Je in ke)ke[Je].permanent||(Ie+=ke[Je].count),qe+=ke[Je].xp*ke[Je].count;function Ge(e,t){var a=[];(a=a.concat(I))[e-1]=t,q(a)}function Ye(e,t){var a=[];(a=a.concat(Y))[e-1]=t,Z(a)}function Ze(e,t){var a=[];(a=a.concat($))[e-1]=!$[e-1],ee(a)}function Ke(e,t){var a=0;(e.xp&&(a=e.xp,e.exceptional&&(a*=2)),t)?(t.length>0?t.findIndex((function(t){return t.key===e.code})):-1)>=0?t.map((function(t){return t.name===e.name?(t.count=t.count+1,t):t})):t.push({name:e.name,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:a,permanent:e.permanent,count:1}):t=[{name:e.name,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:a,permanent:e.permanent,count:1}];return t}Object(n.useEffect)((function(){fetch("https://arkhamdb.com/api/public/cards/").then((function(e){return e.json()})).then((function(e){fe(e)})).catch((function(){return Ee(!0)}))}),[]),Object(n.useEffect)((function(){fetch("https://arkhamdb.com/api/public/taboos/").then((function(e){return e.json()})).then((function(e){e=e.map((function(e){return e.cards=JSON.parse(e.cards),e})).sort((function(e,t){return e.id>t.id?1:-1})),pe(e)})).catch((function(){}))}),[]),Object(n.useEffect)((function(){if(ne&&!Ue){var e="Build Deck"===T?Ie:qe,t=0;if("Build Deck"===T)if("phaseDraft"===_){if(we>3)t=y;else for(var n=0;n<we;n++)t+=parseInt(Y[n],10);t>y&&(t=y)}else t=y;else t=R;if(le){if("chaos"===_){var r=x({investigator:a,secondaryClass:d,deckSize:y,draftCards:y,draftXP:R-e,upgrade:"Upgrade"===T,cardList:ke,collectionSets:Xe,cardData:ue,draftCard:Ke});De(r),ie(!1),Ae(!0)}else if(e<t)if("1"===I[we-1]){var o=x({investigator:a,secondaryClass:d,deckSize:y,draftCards:t-e,draftXP:R-e,upgrade:"Upgrade"===T,cardList:ke,cardData:ue,collectionSets:Xe,draftCard:Ke});De(o),je(we+1)}else{var c=O({investigator:a,secondaryClass:d,deckSize:y,draftCount:I[we-1],draftUseLimited:$[we-1],draftXP:R-e,upgrade:"Upgrade"===T,cardList:ke,cardData:ue,collectionSets:Xe,draftCard:Ke});Pe(c),ie(!1)}}else if(Oe.length<1)if("draft"===_)if(e<t){var l=O({investigator:a,secondaryClass:d,deckSize:y,draftCount:I[we-1],draftUseLimited:$[we-1],draftXP:R-e,upgrade:"Upgrade"===T,cardList:ke,cardData:ue,collectionSets:Xe,draftCard:Ke});Pe(l)}else Ae(!0);else if(e<t){var i=O({investigator:a,secondaryClass:d,deckSize:y,draftCount:I[we-1],draftUseLimited:$[we-1],draftXP:R-e,upgrade:"Upgrade"===T,cardList:ke,cardData:ue,collectionSets:Xe,draftCard:Ke});Pe(i)}else if(we>=3){if(e<y){var s=x({investigator:a,secondaryClass:d,deckSize:y,draftCards:y-e,draftXP:R-e,upgrade:"Upgrade"===T,cardList:ke,cardData:ue,collectionSets:Xe,draftCard:Ke});De(s)}Ae(!0)}else je(we+1),ie(!0)}}),[ne,Ue,le,_,Ie,qe,y,a,ke,ue,ge,Xe,I,$,we,Y,Oe,T,R,d]);var Qe=ue&&ge&&!Ce;return r.a.createElement(D,{investigator:a,secondaryClass:d,selectedDeckSize:h,selectedTaboo:b,deckSize:y,draftTab:T,draftType:_,draftWeighting:B,draftXP:R,draftCount:I,draftCards:Y,draftUseLimited:$,draftProgress:"Build Deck"===T?Ie:qe,ready:Qe,building:ne,fetchError:Ce,phase:we,cardList:ke,collectionSets:Xe,draftPool:Oe,cardData:ue,tabooData:ge,handleChange:function(e,t){if("investigator"===e){if(o(t),ue&&!h){var n=Object.keys(ue).filter((function(e){return ue[e].name===t}))[0];k(ue[n].deck_requirements.size);var r=ue[n].deck_options.filter((function(e){return"Secondary Class"===e.name}));r.length>0&&u(r[0].faction_select[0])}}else if("secondaryClass"===e)u(t);else if("selectedDeckSize"===e)g(t),k(t);else if("draftTab"===e)L(t);else if("draftType"===e)z(t);else if("draftWeighting"===e)W(t);else if("draftXP"===e)H(t);else if("draftCount1"===e)Ge(1,t);else if("draftCount2"===e)Ge(2,t);else if("draftCount3"===e)Ge(3,t);else if("draftCards1"===e)Ye(1,t);else if("draftCards2"===e)Ye(2,t);else if("draftCards3"===e)Ye(3,t);else if("draftUseLimited1"===e)Ze(1,t);else if("draftUseLimited2"===e)Ze(2,t);else if("draftUseLimited3"===e)Ze(3,t);else if("taboo"===e)C(t);else if("expandCollection"===e)Ve(t);else if("collectionSetOn"===e){var c=Object(l.a)({},Xe);t.forEach((function(e){c[e]=1})),Me(c)}else if("collectionSetOff"===e){var i=Object(l.a)({},Xe);t.forEach((function(e){i[e]=0})),Me(i)}else if("building"===e){if(!0===t&&ue&&ge){var s=Object.keys(ue).filter((function(e){return ue[e].name===a}))[0];if(h||k(ue[s].deck_requirements.size),!d){var f=ue[s].deck_options.filter((function(e){return"Secondary Class"===e.name}));f.length>0&&u(f[0].faction_select[0])}var m=ge.filter((function(e){return e.code===b}));fe(function(e,t){return e.map((function(e){delete e.tabooxp,delete e.tabooexceptional;var a=null;return t.length>0&&(a=t[0].cards.filter((function(t){return t.code===e.code}))),a&&a.forEach((function(t){t.xp&&(e.tabooxp=t.xp),t.exceptional&&(e.tabooexceptional=!0)})),e}))}(ue,m))}re(t)}},draftCard:Ke,updateCardList:De,updateDraftPool:Pe,resetApp:function(){re(!1),ie(!0),De([]),Pe([]),je(1),Ae(!1)},expandCollection:Fe})};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.37bb7d46.chunk.js.map