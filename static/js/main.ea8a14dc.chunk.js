(this.webpackJsonparkhamdraftweb=this.webpackJsonparkhamdraftweb||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),l=(a(14),a(4)),i=a(1);a(15);var s=function(e){var t=e.investigator,a=e.parallel,n=e.secondaryClass,o=e.selectedDeckSize,c=e.selectedTaboo,l=e.deckSize,i=e.cardData,s=e.tabooData,d=["Agnes Baker","Agnes Baker (Parallel)","Akachi Onyele","Amanda Sharpe",'"Ashcan" Pete',"Bob Jenkins","Calvin Wright","Carolyn Fern","Daisy Walker","Daisy Walker (Parallel)","Daniela Reyes","Dexter Drake","Diana Stanley","Father Mateo","Finn Edwards","Gloria Goldberg","Harvey Walters","Jacqueline Fine","Jenny Barnes","Jim Culver","Joe Diamond","Leo Anderson","Lily Chen","Lola Hayes","Luke Robinson","Mandy Thompson","Marie Lambeau","Mark Harrigan","Minh Thi Phan","Monterey Jack","Nathaniel Cho","Norman Withers","Patrice Hathaway","Preston Fairmont","Rex Murphy","Rita Young","Roland Banks","Sefina Rousseau","Silas Marsh","Sister Mary",'"Skids" O\'Toole','"Skids" O\'Toole (Parallel)',"Stella Clark","Tommy Muldoon","Tony Morgan","Trish Scarborough","Ursula Downs","Wendy Adams","William Yorick","Winifred Habbamock","Zoey Samaras"],u=a?t+" (Parallel)":t;function m(t){e.onChangeSetting(t.target.name,t.target.value)}function f(t){var a=t.match(/(.*)(\s\(Parallel\))/);a?e.onChangeInvestigator(a[1],!0):e.onChangeInvestigator(t,!1)}var p=null,h=null,g=null,v=n,b=o||l;if(i)for(var E=Object.keys(i).filter((function(e){return i[e].name===t&&(!a||"undefined"!==typeof i[e].alternate_of_name)}))[0],k=i[E].deck_options,y=0;y<k.length;y++){if("Secondary Class"===k[y].name)p=k[y].faction_select.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e[0].toUpperCase()+e.slice(1))}));else if("Deck Size"===k[y].name){h=k[y].deck_size_select.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))}}s&&(g=s.map((function(e,t){return r.a.createElement("option",{value:e.code,key:t},e.date_start)}))).unshift(r.a.createElement("option",{value:"None",key:"100"},"None"));var C=r.a.createElement("div",null,r.a.createElement("label",{className:"taboo",value:c},"Taboo list:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{className:"taboo investigatorList",name:"taboo",value:c,onChange:m},g))),S=p?r.a.createElement("div",null,r.a.createElement("label",{value:v},"Secondary class:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{className:"secondaryClass investigatorList",name:"secondaryClass",value:v,onChange:m},p))):null,x=h?r.a.createElement("div",null,r.a.createElement("label",{value:b},"Deck size:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{className:"deckSize investigatorList",name:"selectedDeckSize",value:b,onChange:m},h))):null;return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Investigator Options"),r.a.createElement("label",null,"Investigator:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{name:"investigator",value:u,onChange:function(e){f(e.target.value)}},d.map((function(e,t){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("button",{className:"button-rect",id:"button-random",onClick:function(e){f(d[Math.floor(Math.random()*d.length)])}},"Random")),S,x,C)};var d=function(e){var t={},a={};function n(t){e.onChangeSetting(t.target.attributes.name.nodeValue,t.target.attributes.value.nodeValue)}return"Build Deck"===e.draftTab?(t={backgroundColor:"#ebebeb"},a={backgroundColor:"#bababa",borderLeft:"black 2px solid",borderBottom:"black 2px solid"}):(t={backgroundColor:"#bababa",borderRight:"black 2px solid",borderBottom:"black 2px solid"},a={backgroundColor:"#ebebeb"}),r.a.createElement("div",{className:"draft-type"},r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Build Deck",style:t,onClick:n},"Build Deck"),r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Upgrade",style:a,onClick:n},"Upgrade"))};var u=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"})};var m=function(e){return r.a.createElement("div",null,r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("input",{type:"range",min:"2",max:"15",step:"1",value:e.draftCount,className:"slider",name:"draftCount1",onChange:function(t){e.onChangeSetting(t.target.name,t.target.value)}}),r.a.createElement("span",{className:"sliderValue"},e.draftCount)))};var f=function(e){return r.a.createElement("div",{className:"draftphaseDiv"},r.a.createElement("h4",{style:{padding:"0 0 5px 0"}},"Stage ",e.phase),r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("span",{className:"draftphase-option"},r.a.createElement("input",{type:"range",min:"1",max:"15",value:e.draftCount,className:"slider",name:"draftCount",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCount)),r.a.createElement("br",null),r.a.createElement("label",null,"Cards selected in this stage: "),r.a.createElement("span",{className:"draftphase-option"},r.a.createElement("input",{type:"range",min:"0",max:e.maxCards,value:e.draftCards,className:"slider",name:"draftCards",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCards)),r.a.createElement("br",null),r.a.createElement("label",null,"Include cards with limited deck slots:"),r.a.createElement("span",{className:"draftphase-option"},r.a.createElement("input",{type:"checkbox",checked:e.draftUseLimited,name:"draftUseLimited",className:"checkbox",onChange:e.onChangeSetting})))};var p=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"},r.a.createElement(f,{phase:"1",draftCount:e.draftCount[0],draftCards:e.draftCards[0],draftUseLimited:e.draftUseLimited[0],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"1",t.target.value)}}),r.a.createElement(f,{phase:"2",draftCount:e.draftCount[1],draftCards:e.draftCards[1],draftUseLimited:e.draftUseLimited[1],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"2",t.target.value)}}),r.a.createElement(f,{phase:"3",draftCount:e.draftCount[2],draftCards:e.draftCards[2],draftUseLimited:e.draftUseLimited[2],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"3",t.target.value)}}))};var h=function(e){function t(t){e.onChangeSetting(t.target.name,t.target.value)}var a,n;"chaos"===e.draftType?(a=r.a.createElement(u,{onChangeSetting:e.onChangeSetting}),n=r.a.createElement("div",{className:"description"},"The original Ultimatum of Chaos rules from the 2017 Invocation Event.  A full deck will be created completely randomly from all cards available to the chosen investigator.")):"draft"===e.draftType?(a=r.a.createElement(m,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting}),n=r.a.createElement("div",{className:"description"},'Select cards one by one from a random display of cards available to the chosen investigator.  Each card will be selected from a number of cards determined by the "Cards to select from" option.')):"phaseDraft"===e.draftType&&(a=r.a.createElement(p,{draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}),n=r.a.createElement("div",null,r.a.createElement("div",{className:"description"},'The draft will proceed through 3 distinct stages.  All stages will draft from the full set of cards available to the chosen investigator.  Each stage will draft a number of cards equal to "Cards selected in this stage", not including Permanent cards.  Each will be selected from a number of cards determined by the "Cards to select from" option.  This allows you to use completely random selection for part of the deck, or use a wider range of choices for part of the deck.'),r.a.createElement("div",{className:"description"},r.a.createElement("b",null,"Note:")," Once the number of cards specified in the options have been drafted, if additional cards are necessary for a legal deck, they will be drafted using the settings for phase 3. If the required number of cards is reached before any phase is completed, the draft will end immediately.")));var o="1"===e.myriadCount?"card":"cards";return r.a.createElement("div",{className:"draftsettings"},r.a.createElement("label",null,"Type:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:t},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft"),r.a.createElement("option",{value:"phaseDraft"},"Draft in stages"))),r.a.createElement("label",null,"Drafting myriad adds:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{style:{width:"25%"},name:"myriadCount",value:e.myriadCount,onChange:t},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")),r.a.createElement("label",{style:{textAlign:"left"}}," ",o)),a,n)};var g=function(e){function t(t){e.onChangeSetting(t.target.name,t.target.value)}var a;return"chaos"===e.draftType?a=r.a.createElement(u,{onChangeSetting:e.onChangeSetting}):"draft"===e.draftType&&(a=r.a.createElement(m,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting})),r.a.createElement("div",{className:"draftsettings"},r.a.createElement("label",null,"Type:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:t},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft"))),r.a.createElement("label",null,"Weighting:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{name:"draftWeighting",value:e.draftWeighting,onChange:t},r.a.createElement("option",{value:"low"},"Prefer low XP"),r.a.createElement("option",{value:"medium"},"Default"),r.a.createElement("option",{value:"high"},"Prefer high XP"))),r.a.createElement("label",null,"XP:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("input",{style:{width:"23%"},name:"draftXP",type:"number",value:e.draftXP,min:"1",onChange:t})),a)};var v=function(e){var t="Build Deck"===e.draftTab?r.a.createElement(h,{draftType:e.draftType,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,myriadCount:e.myriadCount,onChangeSetting:e.onChangeSetting}):r.a.createElement(g,{draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,deckSize:e.deckSize,myriadCount:e.myriadCount,onChangeSetting:e.onChangeSetting}),a=e.ready?"Upgrade"===e.draftTab||e.filteredCount>=e.deckSize?r.a.createElement("button",{className:"button-rect button-green",onClick:function(t){e.onChangeSetting("building",!0)}},"Start"):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",{style:{color:"red"}},"There are not enough cards in the selected packs to draft a complete deck.  Add packs in Collection Options."),r.a.createElement("button",{className:"button-rect button-red"},"Error")):r.a.createElement("button",{className:"button-rect button-red"},"Loading...");return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement(d,{draftTab:e.draftTab,onChangeSetting:e.onChangeSetting}),r.a.createElement("h3",null,"Draft Options"),r.a.createElement("h5",null,e.draftTab),t,a)},b={core:"Core set",core2:"Second core set",dwl:"The Dunwich Legacy",tmm:"The Miskatonic Museum",tece:"The Essex County Express",bota:"Blood on the Altar",uau:"Undimensioned and Unseen",wda:"Where Doom Awaits",litas:"Lost in Time and Space",ptc:"The Path to Carcosa",eotp:"Echoes of the Past",tuo:"The Unspeakable Oath",apot:"A Phantom of Truth",tpm:"The Pallid Mask",bsr:"Black Stars Rise",dca:"Dim Carcosa",tfa:"The Forgotten Age",tof:"Threads of Fate",tbb:"The Boundary Beyond",hote:"Heart of the Elders",tcoa:"The City of Archives",tdoy:"The Depths of Yoth",sha:"Shattered Aeons",tcu:"The Circle Undone",tsn:"The Secret Name",wos:"The Wages of Sin",fgg:"For the Greater Good",uad:"Union and Disillusion",icc:"In the Clutches of Chaos",bbt:"Before the Black Throne",tde:"The Dream Eaters",sfk:"The Search for Kadath",tsh:"A Thousand Shapes of Horror",dsm:"Dark Side of the Moon",pnr:"Point of No Return",wgd:"Where the Gods Dwell",woc:"Weaver of the Cosmos",tic:"The Innsmouth Conspiracy",itd:"In Too Deep",def:"Devil Reef",hhg:"Horror in High Gear",lif:"A Light in the Fog",lod:"The Lair of Dagon",itm:"Into the Maelstrom",nat:"Nathaniel Cho",har:"Harvey Walters",win:"Winifred Habbamock",jac:"Jacqueline Fine",ste:"Stella Clark",rtnotz:"Return to the Night of the Zealot",rtdwl:"Return to the Dunwich Legacy",rtptc:"Return to the Path to Carcosa",rttfa:"Return to the Forgotten Age",rttcu:"Return to the Circle Undone",eoep:"Edge of the Earth"};var E=function(e){var t=e.collectionSets,a=e.includedSets,n=e.columnValue;function o(t){"core"!==t.target.name||t.target.checked?"core2"===t.target.name&&t.target.checked?e.onChangeSetting("collectionSetOn",a):t.target.checked?e.onChangeSetting("collectionSetOn",[t.target.name]):e.onChangeSetting("collectionSetOff",[t.target.name]):e.onChangeSetting("collectionSetOff",a)}var c=a.map((function(e){return r.a.createElement("div",{className:"pack-option",key:e},r.a.createElement("input",{type:"checkbox",checked:t[e],name:e,className:"set-checkbox",onChange:o}),r.a.createElement("label",{className:"set-label"},b[e]))}));return r.a.createElement("div",{className:"cardSet "+n},r.a.createElement("h4",{className:"set-header"},e.header?e.header:b[a[0]]),c,r.a.createElement("div",{style:{position:"absolute",right:"0",top:"0",width:"40%"}},r.a.createElement("button",{className:"button-deselectset",value:"deselect",title:"Deselect all",onClick:function(){e.onChangeSetting("collectionSetOff",a)}}),r.a.createElement("button",{className:"button-selectset",value:"select",title:"Select all",onClick:function(){e.onChangeSetting("collectionSetOn",a)}})))};var k=function(e){var t=e.expandCollection,a=e.collectionSets,n=e.onChangeSetting;function o(a){e.onChangeSetting("expandCollection",!t)}if(t)return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Collection Options"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["core","core2"],columnValue:"colcenter",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["dwl","tmm","tece","bota","uau","wda","litas"],columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["ptc","eotp","tuo","apot","tpm","bsr","dca"],columnValue:"col2",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["tfa","tof","tbb","hote","tcoa","tdoy","sha"],columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["tcu","tsn","wos","fgg","uad","icc","bbt"],columnValue:"col2",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["tde","sfk","tsh","dsm","pnr","wgd","woc"],columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["tic","itd","def","hhg","lif","lod","itm"],columnValue:"col2",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["eoep"],columnValue:"col1",onChangeSetting:n}),r.a.createElement("div",{className:"col2"})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["nat","har","win","jac","ste"],header:"Starter Decks",columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["rtnotz","rtdwl","rtptc","rttfa","rttcu"],header:"Return to Boxes",columnValue:"col2",onChangeSetting:n})),r.a.createElement("button",{className:"button-rect button-green",onClick:o},"Collapse"));var c=a.core+a.core2,l=0;for(var i in a)1===a[i]&&l++;return l-=c,r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Collection Options"),r.a.createElement("p",null,c," core set",1===c?null:"s",", ",l," pack",1===l?null:"s"," selected"),r.a.createElement("button",{className:"button-rect button-green",onClick:o},"Expand"))};var y=function(e){var t=e.cardList,a=e.cardData,n=e.updateCardOverlay,o=0,c=0,l=0,i=0,s=[],d=[],u=[],m=[],f=[],p=[],h=[],g=[],v=[],b=[],E=[],k=[],y=[];function C(e){var t=a.filter((function(t){return t.code===e.target.id}));if(t&&t.length>0&&t[0].imagesrc){var r="http://www.arkhamdb.com"+t[0].imagesrc;n(r,e.clientX)}}function S(e){n(null,0)}t.forEach((function(e){"event"===e.type_code?(E.push(e),c+=e.count):"skill"===e.type_code?(k.push(e),l+=e.count):"asset"===e.type_code?(e.permanent?b.push(e):"Hand"===e.slot?s.push(e):"Hand x2"===e.slot?d.push(e):"Arcane"===e.slot?u.push(e):"Arcane x2"===e.slot?m.push(e):"Accessory"===e.slot?f.push(e):"Body"===e.slot?p.push(e):"Ally"===e.slot?h.push(e):"Tarot"===e.slot?g.push(e):v.push(e),o+=e.count):(y.push(e),i+=e.count)}));var x=o>0?r.a.createElement("h4",null,"Assets (",o,")"):null,N=s.length>0?r.a.createElement("p",{className:"slot-header"},"Hand"):null,D=s.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),O=d.length>0?r.a.createElement("p",{className:"slot-header"},"Hand x2"):null,_=d.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),P=u.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane"):null,L=u.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),T=m.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane x2"):null,w=m.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),j=f.length>0?r.a.createElement("p",{className:"slot-header"},"Accessory"):null,z=f.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),B=p.length>0?r.a.createElement("p",{className:"slot-header"},"Body"):null,U=p.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),A=h.length>0?r.a.createElement("p",{className:"slot-header"},"Ally"):null,q=h.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),I=g.length>0?r.a.createElement("p",{className:"slot-header"},"Tarot"):null,R=g.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),X=v.length>0?r.a.createElement("p",{className:"slot-header"},"Other"):null,W=v.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),M=b.length>0?r.a.createElement("p",{className:"slot-header"},"Permanent"):null,F=b.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),V=c>0?r.a.createElement("h4",null,"Events (",c,")"):null,H=E.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),G=l>0?r.a.createElement("h4",null,"Skills (",l,")"):null,J=k.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),K=i>0?r.a.createElement("h4",null,"Other (",i,")"):null,Y=y.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{className:"cardlist-item",id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)}));return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",{style:{marginBottom:"-10px"}},"Card List"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement("div",{className:"col1"},x,N,D,O,_,P,L,T,w,j,z,B,U,A,q,I,R,X,W,M,F),r.a.createElement("div",{className:"col2"},V,H,G,J,K,Y)))},C=a(8);var S=function(e){for(var t=["guardian","seeker","rogue","mystic","survivor","neutral","multiclass"],a=-1,n=0;n<7;n++)e===t[n]&&(a=n);return["#c8eeff","#ffe3c2","#b6ffd7","#efd2ff","#ffd1d5","#e2e2e2","#fffedf"][a]};var x=function(e){var t=e.draftCount,a=e.draftPool,n=e.draftCard,o=e.draftType,c=e.phase,l=e.cardList,i=e.updateCardList,s=e.updateDraftPool,d=[];function u(e){m({index:a.findIndex((function(t){return e.target.src.includes(t.imagesrc)}))})}function m(e){var t=e.index,r=n(a[t],d);i(r),s([])}d=d.concat(l);for(var f=[],p="",h=function(e){p=a[e].faction2_code?"multiclass":a[e].faction_code;var t=S(p);if(void 0===a[e].imagesrc)f.push(r.a.createElement("div",{className:"draft-card-loading",key:e,style:{backgroundColor:t}},r.a.createElement("h3",null,a[e].name),r.a.createElement("p",null,"Image not available"),r.a.createElement("p",null,r.a.createElement("a",{href:a[e].url,target:"_blank",rel:"noreferrer noopener"},"View on ArkhamDB")),r.a.createElement("button",{className:"button-rect button-green",onClick:function(){m({index:e})}},"Draft")));else{var n="https://www.arkhamdb.com"+a[e].imagesrc;a[e].imageLoaded?f.push(r.a.createElement("div",{className:"draft-card",key:e},r.a.createElement("img",{className:"draft-image",src:n,alt:a[e].name,onClick:u}))):f.push(r.a.createElement("div",{className:"draft-card-loading",key:e,style:{backgroundColor:t}},r.a.createElement("h3",null,a[e].name),r.a.createElement("p",null,"Image loading..."),r.a.createElement("p",null,r.a.createElement("a",{href:a[e].url,target:"_blank",rel:"noreferrer noopener"},"View on ArkhamDB")),r.a.createElement("button",{className:"button-rect button-green",onClick:function(){m({index:e})}},"Draft"),r.a.createElement("img",{className:"draft-image",style:{visibility:"hidden",position:"absolute"},src:n,alt:a[e].name,onLoad:function(){return function(e){var t=e.index,n=Object(C.a)(a);n[t].imageLoaded=!0,s(n)}({index:e})}})))}},g=0;g<t;g++)h(g);var v="phaseDraft"===o?" - Stage "+c:null;return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Draft",v),r.a.createElement("div",{className:"draft-container"},f),r.a.createElement("p",null,"Click image to draft card"))},N=a(7);var D=function(e){var t=e.fileType,a=e.deckTitle,n=e.investigator,r=e.cardList,o=e.specialCards,c=e.cardData;if(void 0!==c&&c){var l=[],i=[],s=[],d=[],u=[],m=[],f=c.filter((function(e){return e.name===n}))[0];r.concat(o).forEach((function(e){var t=c.filter((function(t){return e.key===t.code}))[0],a={name:e.name,subname:t.subname,count:e.count,xp:t.xp,pack:t.pack_code,octgn_id:t.octgn_id};"event"===t.type_code?i.push(a):"skill"===t.type_code?s.push(a):"asset"===t.type_code?l.push(a):"treachery"===t.type_code?d.push(a):"enemy"===t.type_code?u.push(a):m.push(a)})),"OCTGN"===t?function(e){var t=['<?xml version="1.0" encoding="utf-8" standalone="yes"?>\r\n','<deck game="a6d114c7-2e2a-4896-ad8c-0330605c90bf" sleeveid="0">\r\n','  <section name="Investigator" shared="False">\r\n'];e.investigator.octgn_id.split(":").forEach((function(a){t.push('    <card qty="1" id="'+a+'">'+e.investigator.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"),e.assets.length>0&&(t.push('  <section name="Asset" shared="False">\r\n'),e.assets.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));e.events.length>0&&(t.push('  <section name="Event" shared="False">\r\n'),e.events.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));e.skills.length>0&&(t.push('  <section name="Skill" shared="False">\r\n'),e.skills.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));(e.treacheries.length>0||e.enemies.length>0)&&(t.push('  <section name="Weakness" shared="False">\r\n'),e.treacheries.length>0&&e.treacheries.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),e.enemies.length>0&&e.enemies.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));e.others.length>0&&(t.push('  <section name="Other" shared="False">\r\n'),e.others.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));t.push("<notes><![CDATA[]]></notes>\r\n"),t.push("</deck>\r\n");var a=document.createElement("a"),n=new Blob(t,{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=e.deckTitle.replace(/\s/g,"-")+".o8d",document.body.appendChild(a),a.click(),document.body.removeChild(a)}({deckTitle:a.length>0?a:"Deck",investigator:f,assets:l,events:i,skills:s,treacheries:d,enemies:u,others:m}):function(e){var t=[];t.push(e.deckTitle+"\r\n\r\n"),t.push(e.investigator.name+"\r\n\r\n"),e.assets.length>0&&(t.push("Assets\r\n"),e.assets.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.events.length>0&&(t.push("Events\r\n"),e.events.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.skills.length>0&&(t.push("Skills\r\n"),e.skills.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.treacheries.length>0&&(t.push("Treachery\r\n"),e.treacheries.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.enemies.length>0&&(t.push("Enemy\r\n"),e.enemies.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.others.length>0&&(t.push("Other\r\n"),e.others.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));var a=document.createElement("a"),n=new Blob(t,{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=e.deckTitle.replace(/\s/g,"-")+".txt",document.body.appendChild(a),a.click(),document.body.removeChild(a)}({deckTitle:a.length>0?a:"Deck",investigator:f,assets:l,events:i,skills:s,treacheries:d,enemies:u,others:m})}};var O=function(e){var t=Object(n.useState)([!0,!1,!1,!1]),a=Object(i.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(["Random basic weakness","01000"]),d=Object(i.a)(s,2),u=d[0],m=d[1],f=Object(n.useState)(""),p=Object(i.a)(f,2),h=p[0],g=p[1],v=e.investigator,b=e.parallel,E=e.deckSize,k=e.cardData,y=e.collectionSets,C=e.updateCardOverlay;function S(e){var t=0;"CB3"===e.target.name?t=3:"CB2"===e.target.name?t=2:"CB1"===e.target.name&&(t=1);var a=Object(l.a)({},o);a[t]=e.target.checked,c(a)}function x(e){if("01000"!==e.target.id){var t=k.filter((function(t){return t.code===e.target.id}));if(t&&t.length>0&&void 0!==t[0].imagesrc){var a="http://www.arkhamdb.com"+t[0].imagesrc;C(a,e.clientX)}}}function O(e){C(null,0)}var _=[[],[],[],[]],P=!1;if("Lily Chen"===v)_[0].push("08011a"),_[0].push("08015"),_[1].push("08012a"),_[1].push("08015"),_[2].push("08013a"),_[2].push("08015"),_[3].push("08014a"),_[3].push("08015"),P=!0;else{for(var L=Object.keys(k).filter((function(e){return k[e].name===v&&(!b||"undefined"!==typeof k[e].alternate_of_name)}))[0],T=k[L].deck_requirements.card,w=0;w<Object.keys(T).length;w++){var j=T[Object.keys(T)[w]];Object.keys(j).length>1&&(P=!0);for(var z=0;z<Object.keys(j).length;z++)_[z].push(j[Object.keys(j)[z]])}_.sort((function(e,t){return e.length>0?t.length>0?parseInt(e[0])-parseInt(t[0]):-1:1}))}var B=k.filter((function(e){return"basicweakness"===e.subtype_code&&"01000"!==e.code&&y[e.pack_code]})),U=r.a.createElement("div",null,_.map((function(e,t){if(e.length>0){var a=e.map((function(e){var t=Object.keys(k).filter((function(t){return k[t].code===e}))[0],a=k[t].quantity;"Occult Evidence"===k[t].name&&(a="50"===E?3:"40"===E?2:1),"Burden of Destiny"===k[t].name&&(a=1);var n=a>1?" x"+a:"",o=k[t].name;return"Lily Chen"===v?k[t].subname&&(o=o+": "+k[t].subname):P&&(o=o+" ("+k[t].pack_name+")"),r.a.createElement("p",{id:k[t].code,key:k[t].code,onPointerEnter:x,onPointerLeave:O},o+n)}));return P?r.a.createElement("div",{key:t,className:"signatureDiv"},r.a.createElement("span",{className:"signatureLeft"},r.a.createElement("input",{type:"checkbox",checked:o[t],name:"CB"+t,className:"signature-checkbox",onChange:S})),r.a.createElement("span",{className:"signatureRight"},a)):r.a.createElement("div",{key:t,className:"signatureDiv"},r.a.createElement("span",{className:"signatureCenter"},a))}return null})));return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",{style:{marginBottom:"-5px"}},"Export options"),r.a.createElement("div",{className:"exportsettings"},r.a.createElement("label",null,"Deck title:"),r.a.createElement("span",{className:"export-option"},r.a.createElement("input",{className:"deckName",name:"deckName",type:"text",value:h,onChange:function(e){g(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("h4",{style:{marginBottom:"5px"}},"Signature cards"),U),r.a.createElement("div",null,r.a.createElement("h4",{style:{marginBottom:"5px"}},"Weaknesses"),r.a.createElement("p",{id:u[1],onPointerEnter:x,onPointerLeave:O},u[0]),r.a.createElement("button",{className:"button-rect button-green button-drawweakness",onClick:function(){return function(){for(var e=0,t=0;t<B.length;t++)e+=B[t].quantity;for(var a=Math.floor(Math.random()*e),n=0;n<B.length;n++){if(a<=0){m([B[n].name,B[n].code]);break}a-=B[n].quantity}}()}},"Draw weakness"),r.a.createElement("div",{className:"description"},"Export as an OCTGN deck file.  To import a downloaded .o8d deck into ArkhamDB, go to My Decks and click Import Deck, then File.")),r.a.createElement("div",null,r.a.createElement("button",{className:"button-rect button-green button-export",onClick:function(){return function(t){var a,n=[],r=!1,c=Object(N.a)(_.entries());try{var l=function(){var e=Object(i.a)(a.value,2),t=e[0],c=e[1];if(o[t])for(var l=function(e){var t=Object.keys(k).filter((function(t){return k[t].code===c[e]}))[0],a=k[t],l=a.quantity;if("Occult Evidence"===a.name&&(l="50"===E?3:"40"===E?2:1),"Burden of Destiny"===a.name&&(l=0,!r)){for(var i=0;i<4;i++)o[i]&&l++;r=!0}l>0&&n.push({name:a.name,key:a.code,type_code:a.type_code,count:l})},s=0;s<c.length;s++)l(s)};for(c.s();!(a=c.n()).done;)l()}catch(m){c.e(m)}finally{c.f()}var s=Object.keys(k).filter((function(e){return k[e].code===u[1]}))[0],d=k[s];d.octgn_id||(d.octgn_id=""),n.push({name:d.name,key:d.code,type_code:d.type_code,count:1}),D({fileType:t,deckTitle:h,investigator:e.investigator,cardList:e.cardList,specialCards:n,cardData:e.cardData})}("OCTGN")}},"Export as .o8d")))};var _=function(e){var t=e.investigator,a=e.parallel,n=e.deckSize,o=e.draftTab,c=e.draftXP,l=e.draftCount,i=e.draftProgress,s=e.draftType,d=e.phase,u=e.cardList,m=e.draftPool,f=e.cardData,p=e.draftCard,h=e.updateCardList,g=e.updateDraftPool,v=e.resetApp,b=e.collectionSets,E=e.updateCardOverlay,k=null,C=null;if(f){var N=Object.keys(f).filter((function(e){return f[e].name===t&&(!a||"undefined"!==typeof f[e].alternate_of_name)}))[0],D=f[N].faction_code,_=S(D);if(void 0===f[N].imagesrc)k=r.a.createElement("div",{className:"investigator-div-loading",style:{backgroundColor:_}},r.a.createElement("h3",null,t+" (Back)"),r.a.createElement("p",null,"Image not available"),r.a.createElement("p",null,r.a.createElement("a",{href:f[N].url,target:"_blank",rel:"noreferrer noopener"},"View on ArkhamDB")));else{var P="https://www.arkhamdb.com"+f[N].imagesrc;k=r.a.createElement("div",{className:"investigator-div",style:{backgroundColor:_}},r.a.createElement("img",{className:"investigator-image",src:P,alt:e.investigator}))}if(void 0===f[N].backimagesrc)C=r.a.createElement("div",{className:"investigator-div-loading",style:{backgroundColor:_}},r.a.createElement("h3",null,t+" (Back)"),r.a.createElement("p",null,"Image not available"),r.a.createElement("p",null,r.a.createElement("a",{href:f[N].url,target:"_blank",rel:"noreferrer noopener"},"View on ArkhamDB")));else{var L="https://www.arkhamdb.com"+f[N].backimagesrc;C=r.a.createElement("div",{className:"investigator-div",style:{backgroundColor:_}},r.a.createElement("img",{className:"investigator-image",src:L,alt:e.investigator+" (back)"}))}}var T=null,w=null;m.length>0?T=r.a.createElement(x,{draftCount:l,draftCard:p,phase:d,draftType:s,draftPool:m,cardList:u,updateCardList:h,updateDraftPool:g}):"Build Deck"===o&&(w=r.a.createElement(O,{investigator:t,deckSize:n,cardList:u,cardData:f,collectionSets:b,updateCardOverlay:E}));var j="Build Deck"===o?r.a.createElement("p",null,r.a.createElement("b",null,"Cards: "),i,"/",n):r.a.createElement("p",null,r.a.createElement("b",null,"XP: "),i,"/",c);return r.a.createElement("div",null,r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h2",null,t),r.a.createElement("div",{className:"investigator-grid"},k,C),j),T,r.a.createElement(y,{cardList:u,cardData:f,updateCardOverlay:E}),w,r.a.createElement("button",{className:"button-rect button-green",onClick:v},"Restart"))};var P=function(e){var t=e.investigator,a=e.parallel,n=e.secondaryClass,r=e.cardData,o=e.cardList,c=e.deckSize,l=e.upgrade,i=e.draftUseLimited,s=e.draftProgress,d=e.draftXP,u=e.collectionSets,m=Object.keys(r).filter((function(e){return r[e].name===t&&(!a||"undefined"!==typeof r[e].alternate_of_name)}))[0],f=r[m].deck_options,p=function(e,t){if(!e)return[];var a=[];return e.forEach((function(e){for(var n=!1,r=0;r<t.length;r++){if(!t[r].limit)_(e,t[r])&&(n=!0)}n||a.push(e)})),a}(o,f),h=null;if("Joe Diamond"===t){var g=o.filter((function(e){var t=e.traits;return!!(t&&t.search(new RegExp("insight","i"))>=0)}));c-D(o)+D(g)<=10&&(h=[{requirement:10,trait:"insight"}])}else if("Lola Hayes"===t){for(var v=["guardian","seeker","rogue","mystic","survivor"].map((function(e){return{faction:e,count:D(o.filter((function(t){return t.faction_code===e||t.faction2_code===e})))}})).sort((function(e,t){return t.count-e.count})),b=0,E=0;E<3;E++)b+=Math.min(7,v[E].count);if(c-D(o)+b<=21){for(var k=v[2].count,y=[],C=0;C<5;C++)v[C].count<7&&v[C].count>=k&&y.push(v[C].faction);h=[{requirement:7,faction:y}]}}var S=o.filter((function(e){return"Underworld Support"===e.name})).length,x=0,N=0;function D(e){var t=0;return e&&e.forEach((function(e){e.permanent||(t+=e.count)})),t}function O(e,t){var a=0;return e&&e.forEach((function(e){_(e,t)&&(a+=e.count)})),a}function _(e,t){var a=!0,r=!0,o=!0,c=!0,l=!0,i=!0,s=!0;if("Secondary Class"===t.name&&(o=!1,e.faction_code===n&&(o=!0),e.faction2_code===n&&(o=!0)),t.faction){r=!1;for(var d=0;d<t.faction.length;d++)e.faction_code===t.faction[d]&&(r=!0),e.faction2_code===t.faction[d]&&(r=!0)}if(t.level){a=!1;var u=t.level.min,m=t.level.max,f=void 0===e.xp?0:e.xp;f>=u&&f<=m&&(a=!0)}if(t.trait){c=!1;for(var p=e.traits,h=0;h<t.trait.length;h++)p&&p.search(new RegExp(t.trait[h],"i"))>=0&&(c=!0)}if(t.uses){l=!1;var g=e.text;g&&g.search(new RegExp("Uses \\([0-9\\s]+"+t.uses[0]+"\\)","i"))>=0&&(l=!0)}if(t.type){i=!1;var v=e.type_code;v&&t.type.find((function(e){return e===v}))&&(i=!0)}return t.text&&(s=!1,e.text&&e.text.search(new RegExp(t.text,"i"))>=0&&(s=!0)),r&&a&&c&&l&&i&&o&&s}return l&&(x=1,N=d),r.filter((function(e){if("investigator"===e.type_code)return!1;if("story"===e.type_code)return!1;if("location"===e.type_code)return!1;if("enemy"===e.type_code)return!1;if("treachery"===e.type_code)return!1;if(e.bonded_to)return!1;if(e.subtype_code)return!1;var t=0;if(e.xp&&(t=e.xp),void 0!==e.tabooxp&&(t+=e.tabooxp),(e.exceptional||void 0!==e.tabooexceptional&&e.tabooexceptional)&&(t*=2),t<x)return!1;if(t>N)return!1;if(e.restrictions&&e.restrictions.investigator)return!1;if(!u[e.pack_code])return!1;if(e.duplicate_of_code){var a=Object.keys(r).filter((function(t){return r[t].code===e.duplicate_of_code}))[0],n=r[a];if(u[n.pack_code])return!1}if(void 0!==e.taboodecklimit&&0===e.taboodecklimit)return!1;if("Underworld Support"===e.name){if(s>c-5)return console.log("Deck too big"),!1;if(o.filter((function(e){return e.count>1})).length>0)return console.log("Duplicates exist"),!1}for(var l=!1,d=!1,m=0;m<f.length;m++)if(!f[m].requirement){var g=!1;if(_(e,f[m]))if(g=!0,f[m].not)d=!0;else if(f[m].limit){if(i)O(p,f[m])>=f[m].limit&&(g=!1);else g=!1}g&&(l=!0)}if(!l||d)return!1;if("Discipline"===e.name)return!1;var v=!1;if(o.forEach((function(t){if(t.name===e.name&&(void 0===e.subtitle||t.subtitle===e.subtitle)){var a=e.deck_limit;void 0!==e.taboodecklimit&&(a=e.taboodecklimit),S&&(a=1);var n=e.quantity;"core"===e.pack_code&&0===u.core2&&n<a&&(a=n),t.count>=a&&(v=!0)}})),v)return!1;if(h)for(var b=0;b<h.length;b++)if(!_(e,h[b]))return!1;return!0}))};var L=function(e){var t=null,a=Object(n.useState)(null),o=Object(i.a)(a,2),c=o[0],l=o[1],d=Object(n.useState)('Left"'),u=Object(i.a)(d,2),m=u[0],f=u[1],p=function(){var e=Object(n.useState)({width:void 0,height:void 0}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListnener("resize",e)}}),[]),a}(),h=null;if(c&&(h=r.a.createElement("div",{className:"floatingImage"+m},r.a.createElement("img",{src:c,alt:""}))),e.fetchError)t=r.a.createElement("div",null,"Fetch error!");else if(e.cardData&&e.tabooData)if(e.building)t=r.a.createElement(_,{draftType:e.draftType,draftTab:e.draftTab,investigator:e.investigator,parallel:e.parallel,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftXP:e.draftXP,draftCount:e.draftCount[e.phase-1],draftCards:e.draftCards[e.phase-1],draftProgress:e.draftProgress,phase:e.phase,cardList:e.cardList,cardData:e.cardData,collectionSets:e.collectionSets,draftPool:e.draftPool,draftCard:e.draftCard,updateCardList:e.updateCardList,updateDraftPool:e.updateDraftPool,updateCardOverlay:function(e,t){l(e),t<p.width/2?f("Right"):f("Left")},resetApp:e.resetApp});else{var g=0;P({investigator:e.investigator,parallel:e.parallel,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftCount:e.deckSize,draftProgress:0,draftUseLimited:[!0,!0,!0],draftXP:e.draftXP,upgrade:"Upgrade"===e.draftTab,cardList:e.cardList,cardData:e.cardData,collectionSets:e.collectionSets}).forEach((function(t){if(t.deck_limit&&("asset"===t.type_code||"event"===t.type_code||"skill"===t.type_code)&&"weakness"!==t.subtype_code&&"basicweakness"!==t.subtype_code&&e.collectionSets[t.pack_code]&&0!==e.collectionSets[t.pack_code]&&(!t.restrictions||!t.restrictions.investigator)){var a=t.deck_limit,n=t.quantity;1===e.collectionSets[t.pack_code]&&"core"===t.pack_code&&0===e.collectionSets.core2&&n<a&&(a=n),g+=a}})),"chaos"===e.draftType?g-=2:g-=30,t=r.a.createElement("div",null,r.a.createElement(s,{investigator:e.investigator,parallel:e.parallel,secondaryClass:e.secondaryClass,selectedDeckSize:e.selectedDeckSize,selectedTaboo:e.selectedTaboo,deckSize:e.deckSize,cardData:e.cardData,tabooData:e.tabooData,onChangeSetting:e.handleChange,onChangeInvestigator:e.handleChangeInvestigator}),r.a.createElement(k,{expandCollection:e.expandCollection,collectionSets:e.collectionSets,onChangeSetting:e.handleChange}),r.a.createElement(v,{draftTab:e.draftTab,draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,ready:e.ready,filteredCount:g,myriadCount:e.myriadCount,onChangeSetting:e.handleChange}))}else t=r.a.createElement("div",{style:{marginBottom:"20px"}},"Loading...");return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"ArkhamDraft"),t,h,r.a.createElement("div",{className:"copyright",style:{padding:"5px",boxSizing:"border-box"}},"Arkham Horror: The Card Game and all information presented here, both literal and graphical, is copyrighted by Fantasy Flight Games. This website is not produced, endorsed, supported, or affiliated with Fantasy Flight Games."))};var T=function(e,t){var a=!1,n=null;if(0===e.length)return null;for(var r=function(){var r=(n=e[Math.floor(Math.random()*e.length)]).code;(t&&t.length>0?t.findIndex((function(e){return e.code===r})):-1)<0&&(a=!0)};!a;)r();return n};function w(e){var t=e.draftTab,a=e.draftCards,n=e.draftXP,r=e.draftCard,o=e.cardList,c=[];c=c.concat(o);var l=0,i=a;for("Upgrade Deck"===t&&(i=n);l<i;){e.cardList=c;var s=P(e);if(c=r(T(s),c),l=0,"Build Deck"===t){for(var d in c)c[d].permanent||(l+=c[d].count);e.cardList=c,e.draftProgress=l,s=P(e)}else{for(var u in c)l+=c[u].xp*c[u].count;e.cardList=c,e.draftProgress=l,e.draftXP=i-l,s=P(e)}}return c}function j(e){for(var t=e.draftCount,a=P(e),n=[],r=0;r<t;r++){var o=T(a,n);o.imageLoaded=!1,n.push(o)}return n}var z=function(){var e=Object(n.useState)("Agnes Baker"),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(null),f=Object(i.a)(m,2),p=f[0],h=f[1],g=Object(n.useState)(null),v=Object(i.a)(g,2),b=v[0],E=v[1],k=Object(n.useState)("None"),y=Object(i.a)(k,2),C=y[0],S=y[1],x=Object(n.useState)("30"),N=Object(i.a)(x,2),D=N[0],O=N[1],_=Object(n.useState)("Build Deck"),P=Object(i.a)(_,2),T=P[0],z=P[1],B=Object(n.useState)("draft"),U=Object(i.a)(B,2),A=U[0],q=U[1],I=Object(n.useState)("medium"),R=Object(i.a)(I,2),X=R[0],W=R[1],M=Object(n.useState)(1),F=Object(i.a)(M,2),V=F[0],H=F[1],G=Object(n.useState)([3,3,3]),J=Object(i.a)(G,2),K=J[0],Y=J[1],Z=Object(n.useState)([10,10,10]),Q=Object(i.a)(Z,2),$=Q[0],ee=Q[1],te=Object(n.useState)([!0,!0,!0]),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!1),ce=Object(i.a)(oe,2),le=ce[0],ie=ce[1],se=Object(n.useState)(!0),de=Object(i.a)(se,2),ue=de[0],me=de[1],fe=Object(n.useState)(null),pe=Object(i.a)(fe,2),he=pe[0],ge=pe[1],ve=Object(n.useState)(null),be=Object(i.a)(ve,2),Ee=be[0],ke=be[1],ye=Object(n.useState)(!1),Ce=Object(i.a)(ye,2),Se=Ce[0],xe=Ce[1],Ne=Object(n.useState)([]),De=Object(i.a)(Ne,2),Oe=De[0],_e=De[1],Pe=Object(n.useState)([]),Le=Object(i.a)(Pe,2),Te=Le[0],we=Le[1],je=Object(n.useState)(1),ze=Object(i.a)(je,2),Be=ze[0],Ue=ze[1],Ae=Object(n.useState)(!1),qe=Object(i.a)(Ae,2),Ie=qe[0],Re=qe[1],Xe=Object(n.useState)("1"),We=Object(i.a)(Xe,2),Me=We[0],Fe=We[1],Ve=Object(n.useState)({core:1,core2:1,dwl:1,tmm:1,tece:1,bota:1,uau:1,wda:1,litas:1,ptc:1,eotp:1,tuo:1,apot:1,tpm:1,bsr:1,dca:1,tfa:1,tof:1,tbb:1,hote:1,tcoa:1,tdoy:1,sha:1,tcu:1,tsn:1,wos:1,fgg:1,uad:1,icc:1,bbt:1,tde:1,sfk:1,tsh:1,dsm:1,pnr:1,wgd:1,woc:1,tic:1,itd:1,def:1,hhg:1,lif:1,lod:1,itm:1,eoep:1,rtnotz:1,rtdwl:1,rtptc:1,rttfa:1,rttcu:1,nat:1,har:1,win:1,jac:1,ste:1,books:0}),He=Object(i.a)(Ve,2),Ge=He[0],Je=He[1],Ke=Object(n.useState)(!1),Ye=Object(i.a)(Ke,2),Ze=Ye[0],Qe=Ye[1],$e=0,et=0;if(Oe)for(var tt in Oe)Oe[tt].permanent||($e+=Oe[tt].count),et+=Oe[tt].xp*Oe[tt].count;Object(n.useEffect)((function(){return function(e,t){fetch("https://arkhamdb.com/api/public/cards/").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(){return t(!0)}))}(ge,xe)}),[]),Object(n.useEffect)((function(){return function(e,t){fetch("https://arkhamdb.com/api/public/taboos/").then((function(e){return e.json()})).then((function(t){t=t.map((function(e){return e.cards=JSON.parse(e.cards),e})).sort((function(e,t){return e.id>t.id?1:-1})),e(t)})).catch((function(){return t(!0)}))}(ke,xe)}),[]);var at=Object(n.useCallback)((function(e,t){var a=0;if(e.xp&&(a=e.xp),void 0!==e.tabooxp&&(a+=e.tabooxp),(e.exceptional||void 0!==e.tabooexceptional&&e.tabooexceptional)&&(a*=2),"Forced Learning"===e.name){var n="string"===typeof D?parseInt(D):D;O(n+15)}var r=1;("Build Deck"===T&&(e.myriad&&(r=parseInt(Me)),r>e.deck_limit&&(r=e.deck_limit),$e+r>D&&(r=D-$e)),t)?(t.length>0?t.findIndex((function(t){return t.key===e.code})):-1)>=0?t.map((function(t){return t.name===e.name?(t.count=t.count+r,t.count>e.deck_limit&&(t.count=e.deck_limit),t):t})):t.push({name:e.name,subtitle:e.subtitle,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:a,permanent:e.permanent,count:r,duplicateKey:e.duplicate_of_code}):t=[{name:e.name,subtitle:e.subtitle,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:a,permanent:e.permanent,count:r,duplicateKey:e.duplicate_of_code}];return t}),[Me,$e,D,T]);function nt(e,t){var a=[];(a=a.concat(K))[e-1]=t,Y(a)}function rt(e,t){var a=[];(a=a.concat($))[e-1]=t,ee(a)}function ot(e,t){var a=[];(a=a.concat(ne))[e-1]=!ne[e-1],re(a)}Object(n.useEffect)((function(){if(le&&!Ie){var e="Build Deck"===T?$e:et,t=0;if("Build Deck"===T)if("phaseDraft"===A){if(Be>=3)t=D;else for(var n=0;n<Be;n++)t+=parseInt($[n],10);t>D&&(t=D)}else t=D;else t=V;if(e>=D)return void Re(!0);if(ue){if("chaos"===A){var r=w({draftTab:T,investigator:a,parallel:d,secondaryClass:p,deckSize:D,draftCards:t-e,draftProgress:e,draftXP:t,upgrade:"Upgrade"===T,cardList:Oe,collectionSets:Ge,cardData:he,draftCard:at});_e(r)}else if(e<t)if("1"===K[Be-1]){var o=w({draftTab:T,investigator:a,parallel:d,secondaryClass:p,deckSize:D,draftCards:t-e,draftProgress:e,draftXP:t,upgrade:"Upgrade"===T,cardList:Oe,cardData:he,collectionSets:Ge,draftCard:at});_e(o),Ue(Be+1)}else{console.log("Draft A Progress : "+e);var c=j({investigator:a,parallel:d,secondaryClass:p,deckSize:D,draftCount:K[Be-1],draftProgress:e,draftUseLimited:ne[Be-1],draftXP:V-e,upgrade:"Upgrade"===T,cardList:Oe,cardData:he,collectionSets:Ge});we(c),me(!1)}}else if(Te.length<1)if("draft"===A)if(e<t){console.log("Draft B Progress : "+e);var l=j({investigator:a,parallel:d,secondaryClass:p,deckSize:D,draftCount:K[Be-1],draftProgress:e,draftUseLimited:ne[Be-1],draftXP:V-e,upgrade:"Upgrade"===T,cardList:Oe,cardData:he,collectionSets:Ge});we(l)}else Re(!0);else if(e<t){console.log("Draft C Progress : "+e);var i=j({investigator:a,parallel:d,secondaryClass:p,deckSize:D,draftCount:K[Be-1],draftProgress:e,draftUseLimited:ne[Be-1],draftXP:V-e,upgrade:"Upgrade"===T,cardList:Oe,cardData:he,collectionSets:Ge});we(i)}else if(Be>=3){if(e<D){var s=w({draftTab:T,investigator:a,parallel:d,secondaryClass:p,deckSize:D,draftCards:t-e,draftProgress:e,draftXP:V-e,upgrade:"Upgrade"===T,cardList:Oe,cardData:he,collectionSets:Ge,draftCard:at});_e(s)}Re(!0)}else Ue(Be+1),me(!0)}}),[le,Ie,ue,A,$e,et,D,a,d,Oe,he,Ee,Ge,K,ne,Be,$,Te,T,V,p,at]);var ct=he&&Ee&&!Se;return r.a.createElement(L,{investigator:a,parallel:d,secondaryClass:p,selectedDeckSize:b,selectedTaboo:C,deckSize:D,myriadCount:Me,draftTab:T,draftType:A,draftWeighting:X,draftXP:V,draftCount:K,draftCards:$,draftUseLimited:ne,draftProgress:"Build Deck"===T?$e:et,ready:ct,building:le,fetchError:Se,phase:Be,cardList:Oe,collectionSets:Ge,draftPool:Te,cardData:he,tabooData:Ee,handleChange:function(e,t){if("secondaryClass"===e)h(t);else if("selectedDeckSize"===e)E(t),O(t);else if("draftTab"===e)z(t);else if("draftType"===e)q(t);else if("draftWeighting"===e)W(t);else if("draftXP"===e)H(t);else if("draftCount1"===e)nt(1,t);else if("draftCount2"===e)nt(2,t);else if("draftCount3"===e)nt(3,t);else if("draftCards1"===e)rt(1,t);else if("draftCards2"===e)rt(2,t);else if("draftCards3"===e)rt(3,t);else if("draftUseLimited1"===e)ot(1,t);else if("draftUseLimited2"===e)ot(2,t);else if("draftUseLimited3"===e)ot(3,t);else if("taboo"===e)S(t);else if("myriadCount"===e)Fe(t);else if("expandCollection"===e)Qe(t);else if("collectionSetOn"===e){var n=Object(l.a)({},Ge);t.forEach((function(e){n[e]=1})),Je(n)}else if("collectionSetOff"===e){var r=Object(l.a)({},Ge);t.forEach((function(e){r[e]=0})),Je(r)}else if("building"===e){if(!0===t&&he&&Ee){var o=Object.keys(he).filter((function(e){return he[e].name===a&&(!d||"undefined"!==typeof he[e].alternate_of_name)}))[0];if(b||O(he[o].deck_requirements.size),!p){var c=he[o].deck_options.filter((function(e){return"Secondary Class"===e.name}));c.length>0&&h(c[0].faction_select[0])}var i=Ee.filter((function(e){return e.code===C}));ge(function(e,t){return e.map((function(e){delete e.tabooxp,delete e.tabooexceptional,delete e.taboodecklimit;var a=null;return t.length>0&&(a=t[0].cards.filter((function(t){return t.code===e.code}))),a&&a.forEach((function(t){void 0!==t.xp&&(e.tabooxp=t.xp),void 0!==t.exceptional&&t.exceptional&&(e.tabooexceptional=!0,e.taboodecklimit=1),void 0!==t.deck_limit&&(e.taboodecklimit=t.deck_limit)})),e}))}(he,i))}ie(t)}},handleChangeInvestigator:function(e,t){if(u(t),o(e),he){var a=Object.keys(he).filter((function(a){return he[a].name===e&&(!t||"undefined"!==typeof he[a].alternate_of_name)}))[0];O(he[a].deck_requirements.size);var n=he[a].deck_options.filter((function(e){return"Secondary Class"===e.name}));n.length>0&&h(n[0].faction_select[0]);var r=he[a].deck_options.filter((function(e){return"Deck Size"===e.name})),c=he[a].deck_requirements.size;if(O(c),r.length>0){var l=r[0].deck_size_select[0];E(l)}else E(null)}},draftCard:at,updateCardList:_e,updateDraftPool:we,resetApp:function(){if(ie(!1),me(!0),_e([]),we([]),Ue(1),Re(!1),b)O(b);else{var e=Object.keys(he).filter((function(e){return he[e].name===a&&(!d||"undefined"!==typeof he[e].alternate_of_name)}))[0];O(he[e].deck_requirements.size)}},expandCollection:Ze})};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.ea8a14dc.chunk.js.map