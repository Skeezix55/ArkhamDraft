(this.webpackJsonparkhamdraftweb=this.webpackJsonparkhamdraftweb||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(12),a(2)),l=a(1);a(13);var s=function(e){var t=e.investigator,a=e.secondaryClass,n=e.selectedDeckSize,o=e.selectedTaboo,c=e.deckSize,i=e.cardData,l=e.tabooData,s=["Agnes Baker","Akachi Onyele","Amanda Sharpe",'"Ashcan" Pete',"Calvin Wright","Carolyn Fern","Daisy Walker","Dexter Drake","Diana Stanley","Father Mateo","Finn Edwards","Gloria Goldberg","Harvey Walters","Jacqueline Fine","Jenny Barnes","Jim Culver","Joe Diamond","Leo Anderson","Lola Hayes","Luke Robinson","Mandy Thompson","Marie Lambeau","Mark Harrigan","Minh Thi Phan","Nathaniel Cho","Norman Withers","Patrice Hathaway","Preston Fairmont","Rex Murphy","Rita Young","Roland Banks","Sefina Rousseau","Silas Marsh","Sister Mary",'"Skids" O\'Toole',"Stella Clark","Tommy Muldoon","Tony Morgan","Trish Scarborough","Ursula Downs","Wendy Adams","William Yorick","Winifred Habbamock","Zoey Samaras"];function d(t){e.onChangeSetting(t.target.name,t.target.value)}var u=null,m=null,f=null,p=a,h=n||c;if(i)for(var g=Object.keys(i).filter((function(e){return i[e].name===t}))[0],v=i[g].deck_options,b=0;b<v.length;b++){if("Secondary Class"===v[b].name)u=v[b].faction_select.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e[0].toUpperCase()+e.slice(1))}));else if("Deck Size"===v[b].name){m=v[b].deck_size_select.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))}}l&&(f=l.map((function(e,t){return r.a.createElement("option",{value:e.code,key:t},e.date_start)}))).unshift(r.a.createElement("option",{value:"None",key:"100"},"None"));var E=r.a.createElement("div",null,r.a.createElement("label",{className:"taboo",value:o},"Taboo list:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{className:"taboo investigatorList",name:"taboo",value:o,onChange:d},f))),k=u?r.a.createElement("div",null,r.a.createElement("label",{value:p},"Secondary class:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{className:"secondaryClass investigatorList",name:"secondaryClass",value:p,onChange:d},u))):null,y=m?r.a.createElement("div",null,r.a.createElement("label",{value:h},"Deck size:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{className:"deckSize investigatorList",name:"selectedDeckSize",value:h,onChange:d},m))):null;return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Investigator Options"),r.a.createElement("label",null,"Investigator:"),r.a.createElement("span",{className:"investigator-option"},r.a.createElement("select",{name:"investigator",value:t,onChange:d},s.map((function(e,t){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("button",{className:"button-rect",id:"button-random",onClick:function(t){e.onChangeSetting("investigator",s[Math.floor(Math.random()*s.length)])}},"Random")),k,y,E)};var d=function(e){var t={},a={};function n(t){e.onChangeSetting(t.target.attributes.name.nodeValue,t.target.attributes.value.nodeValue)}return"Build Deck"===e.draftTab?(t={backgroundColor:"#ebebeb"},a={backgroundColor:"#bababa",borderLeft:"black 2px solid",borderBottom:"black 2px solid"}):(t={backgroundColor:"#bababa",borderRight:"black 2px solid",borderBottom:"black 2px solid"},a={backgroundColor:"#ebebeb"}),r.a.createElement("div",{className:"draft-type"},r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Build Deck",style:t,onClick:n},"Build Deck"),r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Upgrade",style:a,onClick:n},"Upgrade"))};var u=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"})};var m=function(e){return r.a.createElement("div",null,r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("input",{type:"range",min:"2",max:"15",step:"1",value:e.draftCount,className:"slider",name:"draftCount1",onChange:function(t){e.onChangeSetting(t.target.name,t.target.value)}}),r.a.createElement("span",{className:"sliderValue"},e.draftCount)))};var f=function(e){return r.a.createElement("div",{className:"draftphaseDiv"},r.a.createElement("h4",{style:{padding:"0 0 5px 0"}},"Stage ",e.phase),r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("span",{className:"draftphase-option"},r.a.createElement("input",{type:"range",min:"1",max:"15",value:e.draftCount,className:"slider",name:"draftCount",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCount)),r.a.createElement("br",null),r.a.createElement("label",null,"Cards selected in this stage: "),r.a.createElement("span",{className:"draftphase-option"},r.a.createElement("input",{type:"range",min:"0",max:e.maxCards,value:e.draftCards,className:"slider",name:"draftCards",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCards)),r.a.createElement("br",null),r.a.createElement("label",null,"Include cards with limited deck slots:"),r.a.createElement("span",{className:"draftphase-option"},r.a.createElement("input",{type:"checkbox",checked:e.draftUseLimited,name:"draftUseLimited",className:"checkbox",onChange:e.onChangeSetting})))};var p=function(e){var t=e.deckSize-e.draftCards[0],a=t-e.draftCards[1],n=a-e.draftCards[2],o=null,c=null,i={},l={},s={};return t<e.draftCards[1]?(o=t>0?"Only "+t:"No",i={display:"block"}):i={display:"none"},a<e.draftCards[2]?(c=a>0?"Only "+a:"No",l={display:"block"},a<0&&(a=0)):l={display:"none"},s=n>0?{display:"block"}:{display:"none"},r.a.createElement("div",{className:"draftSettingsDraft"},r.a.createElement(f,{phase:"1",draftCount:e.draftCount[0],draftCards:e.draftCards[0],draftUseLimited:e.draftUseLimited[0],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"1",t.target.value)}}),r.a.createElement(f,{phase:"2",draftCount:e.draftCount[1],draftCards:e.draftCards[1],draftUseLimited:e.draftUseLimited[1],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"2",t.target.value)}}),r.a.createElement(f,{phase:"3",draftCount:e.draftCount[2],draftCards:e.draftCards[2],draftUseLimited:e.draftUseLimited[2],maxCards:e.deckSize,onChangeSetting:function(t){e.onChangeSetting(t.target.name+"3",t.target.value)}}),r.a.createElement("div",{className:"warning",style:i},r.a.createElement("b",null,"Warning:")," ",o," cards will be drawn in Phase 2."),r.a.createElement("div",{className:"warning",style:l},r.a.createElement("b",null,"Warning:")," ",c," cards will be drawn in Phase 3."),r.a.createElement("div",{className:"warning",style:s},r.a.createElement("b",null,"Warning:")," The final ",n," cards will be drawn at random."))};var h=function(e){function t(t){e.onChangeSetting(t.target.name,t.target.value)}var a,n;"chaos"===e.draftType?(a=r.a.createElement(u,{onChangeSetting:e.onChangeSetting}),n=r.a.createElement("div",{className:"description"},"The original Ultimatum of Chaos rules from the 2017 Invocation Event.  A full deck will be created completely randomly from all cards available to the chosen investigator.")):"draft"===e.draftType?(a=r.a.createElement(m,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting}),n=r.a.createElement("div",{className:"description"},'Select cards one by one from a random display of cards available to the chosen investigator.  Each card will be selected from a number of cards determined by the "Cards to select from" option.')):"phaseDraft"===e.draftType&&(a=r.a.createElement(p,{draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}),n=r.a.createElement("div",{className:"description"},'The draft will proceed through 3 distinct stages.  All stages will draft from the full set of cards available to the chosen investigator.  Each stage will draft a number of cards equal to "Cards selected in this stage", not including Permanent cards.  Each will be selected from a number of cards determined by the "Cards to select from" option.  This allows you to use completely random selection for part of the deck, or use a wider range of choices for part of the deck.'));var o="1"===e.myriadCount?"card":"cards";return r.a.createElement("div",{className:"draftsettings"},r.a.createElement("label",null,"Type:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:t},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft"),r.a.createElement("option",{value:"phaseDraft"},"Draft in stages"))),r.a.createElement("label",null,"Drafting myriad adds:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{style:{width:"25%"},name:"myriadCount",value:e.myriadCount,onChange:t},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")),r.a.createElement("label",{style:{textAlign:"left"}}," ",o)),a,n)};var g=function(e){function t(t){e.onChangeSetting(t.target.name,t.target.value)}var a;return"chaos"===e.draftType?a=r.a.createElement(u,{onChangeSetting:e.onChangeSetting}):"draft"===e.draftType&&(a=r.a.createElement(m,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting})),r.a.createElement("div",{className:"draftsettings"},r.a.createElement("label",null,"Type:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:t},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft"))),r.a.createElement("label",null,"Weighting:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("select",{name:"draftWeighting",value:e.draftWeighting,onChange:t},r.a.createElement("option",{value:"low"},"Prefer low XP"),r.a.createElement("option",{value:"medium"},"Default"),r.a.createElement("option",{value:"high"},"Prefer high XP"))),r.a.createElement("label",null,"XP:"),r.a.createElement("span",{className:"draft-option"},r.a.createElement("input",{style:{width:"23%"},name:"draftXP",type:"number",value:e.draftXP,min:"1",onChange:t})),a)};var v=function(e){var t="Build Deck"===e.draftTab?r.a.createElement(h,{draftType:e.draftType,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,myriadCount:e.myriadCount,onChangeSetting:e.onChangeSetting}):r.a.createElement(g,{draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,deckSize:e.deckSize,myriadCount:e.myriadCount,onChangeSetting:e.onChangeSetting}),a=e.ready?"Upgrade"===e.draftTab||e.filteredCount>=e.deckSize?r.a.createElement("button",{className:"button-rect button-green",onClick:function(t){e.onChangeSetting("building",!0)}},"Start"):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",{style:{color:"red"}},"There are not enough cards in the selected packs to draft a complete deck.  Add packs in Collection Options."),r.a.createElement("button",{className:"button-rect button-red"},"Error")):r.a.createElement("button",{className:"button-rect button-red"},"Loading...");return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement(d,{draftTab:e.draftTab,onChangeSetting:e.onChangeSetting}),r.a.createElement("h3",null,"Draft Options"),r.a.createElement("h5",null,e.draftTab),t,a)},b={core:"Core set",core2:"Second core set",dwl:"The Dunwich Legacy",tmm:"The Miskatonic Museum",tece:"The Essex County Express",bota:"Blood on the Altar",uau:"Undimensioned and Unseen",wda:"Where Doom Awaits",litas:"Lost in Time and Space",ptc:"The Path to Carcosa",eotp:"Echoes of the Past",tuo:"The Unspeakable Oath",apot:"A Phantom of Truth",tpm:"The Pallid Mask",bsr:"Black Stars Rise",dca:"Dim Carcosa",tfa:"The Forgotten Age",tof:"Threads of Fate",tbb:"The Boundary Beyond",hote:"Heart of the Elders",tcoa:"The City of Archives",tdoy:"The Depths of Yoth",sha:"Shattered Aeons",tcu:"The Circle Undone",tsn:"The Secret Name",wos:"The Wages of Sin",fgg:"For the Greater Good",uad:"Union and Disillusion",icc:"In the Clutches of Chaos",bbt:"Before the Black Throne",tde:"The Dream Eaters",sfk:"The Search for Kadath",tsh:"A Thousand Shapes of Horror",dsm:"Dark Side of the Moon",pnr:"Point of No Return",wgd:"Where the Gods Dwell",woc:"Weaver of the Cosmos",tic:"The Innsmouth Conspiracy",itd:"In Too Deep",def:"Devil Reef",hhg:"Horror in High Gear",lif:"A Light in the Fog",lod:"The Lair of Dagon",nat:"Nathaniel Cho",har:"Harvey Walters",win:"Winifred Habbamock",jac:"Jacqueline Fine",ste:"Stella Clark",rtnotz:"Return to the Night of the Zealot",rtdwl:"Return to the Dunwich Legacy",rtptc:"Return to the Path to Carcosa",rttfa:"Return to the Forgotten Age"};var E=function(e){var t=e.collectionSets,a=e.includedSets,n=e.columnValue;function o(t){"core"!==t.target.name||t.target.checked?"core2"===t.target.name&&t.target.checked?e.onChangeSetting("collectionSetOn",a):t.target.checked?e.onChangeSetting("collectionSetOn",[t.target.name]):e.onChangeSetting("collectionSetOff",[t.target.name]):e.onChangeSetting("collectionSetOff",a)}var c=a.map((function(e){return r.a.createElement("div",{className:"pack-option",key:e},r.a.createElement("input",{type:"checkbox",checked:t[e],name:e,className:"set-checkbox",onChange:o}),r.a.createElement("label",{className:"set-label"},b[e]))}));return r.a.createElement("div",{className:"cardSet "+n},r.a.createElement("h4",{className:"set-header"},e.header?e.header:b[a[0]]),c,r.a.createElement("div",{style:{position:"absolute",right:"0",top:"0",width:"40%"}},r.a.createElement("button",{className:"button-deselectset",value:"deselect",title:"Deselect all",onClick:function(){e.onChangeSetting("collectionSetOff",a)}}),r.a.createElement("button",{className:"button-selectset",value:"select",title:"Select all",onClick:function(){e.onChangeSetting("collectionSetOn",a)}})))};var k=function(e){var t=e.expandCollection,a=e.collectionSets,n=e.onChangeSetting;function o(a){e.onChangeSetting("expandCollection",!t)}if(t)return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Collection Options"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["core","core2"],columnValue:"colcenter",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["dwl","tmm","tece","bota","uau","wda","litas"],columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["ptc","eotp","tuo","apot","tpm","bsr","dca"],columnValue:"col2",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["tfa","tof","tbb","hote","tcoa","tdoy","sha"],columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["tcu","tsn","wos","fgg","uad","icc","bbt"],columnValue:"col2",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["tde","sfk","tsh","dsm","pnr","wgd","woc"],columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["tic","itd","def","hhg","lif","lod"],columnValue:"col2",onChangeSetting:n})),r.a.createElement("div",{className:"cardContainer"},r.a.createElement(E,{collectionSets:a,includedSets:["nat","har","win","jac","ste"],header:"Starter Decks",columnValue:"col1",onChangeSetting:n}),r.a.createElement(E,{collectionSets:a,includedSets:["rtnotz","rtdwl","rtptc","rttfa"],header:"Return to Boxes",columnValue:"col2",onChangeSetting:n})),r.a.createElement("button",{className:"button-rect button-green",onClick:o},"Collapse"));var c=a.core+a.core2,i=0;for(var l in a)1===a[l]&&i++;return i-=c,r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Collection Options"),r.a.createElement("p",null,c," core set",1===c?null:"s",", ",i," pack",1===i?null:"s"," selected"),r.a.createElement("button",{className:"button-rect button-green",onClick:o},"Expand"))};var y=function(e){var t=e.cardList,a=e.cardData,n=e.updateCardOverlay,o=0,c=0,i=0,l=0,s=[],d=[],u=[],m=[],f=[],p=[],h=[],g=[],v=[],b=[],E=[],k=[],y=[];function C(e){var t=a.filter((function(t){return t.code===e.target.id}));if(t&&t.length>0){var r="http://www.arkhamdb.com"+t[0].imagesrc;n(r,e.clientX)}}function S(e){n(null,0)}t.forEach((function(e){"event"===e.type_code?(E.push(e),c+=e.count):"skill"===e.type_code?(k.push(e),i+=e.count):"asset"===e.type_code?(e.permanent?b.push(e):"Hand"===e.slot?s.push(e):"Hand x2"===e.slot?d.push(e):"Arcane"===e.slot?u.push(e):"Arcane x2"===e.slot?m.push(e):"Accessory"===e.slot?f.push(e):"Body"===e.slot?p.push(e):"Ally"===e.slot?h.push(e):"Tarot"===e.slot?g.push(e):v.push(e),o+=e.count):(y.push(e),l+=e.count)}));var x=o>0?r.a.createElement("h4",null,"Assets (",o,")"):null,O=s.length>0?r.a.createElement("p",{className:"slot-header"},"Hand"):null,N=s.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),D=d.length>0?r.a.createElement("p",{className:"slot-header"},"Hand x2"):null,T=d.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),w=u.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane"):null,L=u.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),_=m.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane x2"):null,j=m.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),P=f.length>0?r.a.createElement("p",{className:"slot-header"},"Accessory"):null,z=f.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),U=p.length>0?r.a.createElement("p",{className:"slot-header"},"Body"):null,A=p.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),B=h.length>0?r.a.createElement("p",{className:"slot-header"},"Ally"):null,q=h.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),W=g.length>0?r.a.createElement("p",{className:"slot-header"},"Tarot"):null,X=g.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),R=v.length>0?r.a.createElement("p",{className:"slot-header"},"Other"):null,F=v.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),M=b.length>0?r.a.createElement("p",{className:"slot-header"},"Permanent"):null,H=b.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),I=c>0?r.a.createElement("h4",null,"Events (",c,")"):null,V=E.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),G=i>0?r.a.createElement("h4",null,"Skills (",i,")"):null,J=k.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)})),K=l>0?r.a.createElement("h4",null,"Other (",l,")"):null,Y=y.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){var a=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:C,onPointerLeave:S,key:t},e.name,a)}));return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",{style:{marginBottom:"-10px"}},"Card List"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement("div",{className:"col1"},x,O,N,D,T,w,L,_,j,P,z,U,A,B,q,W,X,R,F,M,H),r.a.createElement("div",{className:"col2"},I,V,G,J,K,Y)))};var C=function(e){var t=e.draftCount,a=e.draftPool,n=e.draftCard,o=e.draftType,c=e.phase,i=e.cardList,l=e.updateCardList,s=e.updateDraftPool,d=[];function u(e){var t=a.findIndex((function(t){return e.target.src.includes(t.imagesrc)})),r=n(a[t],d);l(r),s([])}d=d.concat(i);for(var m=[],f=0;f<t;f++){var p="https://www.arkhamdb.com"+a[f].imagesrc;void 0===p&&(p=""),m.push(r.a.createElement("div",{className:"draft-card",key:f},r.a.createElement("img",{className:"draft-image",src:p,alt:a[f].name,onClick:u})))}var h="phaseDraft"===o?" - Stage "+c:null;return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",null,"Draft",h),r.a.createElement("div",{className:"draft-container"},m),r.a.createElement("p",null,"Click image to draft card"))},S=a(6);var x=function(e){var t=e.fileType,a=e.deckTitle,n=e.investigator,r=e.cardList,o=e.specialCards,c=e.cardData;if(void 0!==c&&c){console.log(a.length);var i=[],l=[],s=[],d=[],u=[],m=[],f=c.filter((function(e){return e.name===n}))[0];r.concat(o).forEach((function(e){var t=c.filter((function(t){return e.key===t.code}))[0],a={name:e.name,subname:t.subname,count:e.count,xp:t.xp,pack:t.pack_code,octgn_id:t.octgn_id};"event"===t.type_code?l.push(a):"skill"===t.type_code?s.push(a):"asset"===t.type_code?i.push(a):"treachery"===t.type_code?d.push(a):"enemy"===t.type_code?u.push(a):m.push(a)})),"OCTGN"===t?function(e){var t=['<?xml version="1.0" encoding="utf-8" standalone="yes"?>\r\n','<deck game="a6d114c7-2e2a-4896-ad8c-0330605c90bf" sleeveid="0">\r\n','  <section name="Investigator" shared="False">\r\n'];e.investigator.octgn_id.split(":").forEach((function(a){t.push('    <card qty="1" id="'+a+'">'+e.investigator.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"),e.assets.length>0&&(t.push('  <section name="Asset" shared="False">\r\n'),e.assets.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));e.events.length>0&&(t.push('  <section name="Event" shared="False">\r\n'),e.events.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));e.skills.length>0&&(t.push('  <section name="Skill" shared="False">\r\n'),e.skills.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));(e.treacheries.length>0||e.enemies.length>0)&&(t.push('  <section name="Weakness" shared="False">\r\n'),e.treacheries.length>0&&e.treacheries.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),e.enemies.length>0&&e.enemies.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));e.others.length>0&&(t.push('  <section name="Other" shared="False">\r\n'),e.others.forEach((function(e){t.push('    <card qty="'+e.count+'" id="'+e.octgn_id+'">'+e.name.replace(/["]/g,"&quot;")+"</card>\r\n")})),t.push("  </section>\r\n"));t.push("<notes><![CDATA[]]></notes>\r\n"),t.push("</deck>\r\n");var a=document.createElement("a"),n=new Blob(t,{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=e.deckTitle.replace(/\s/g,"-")+".o8d",document.body.appendChild(a),a.click(),document.body.removeChild(a)}({deckTitle:a.length>0?a:"Deck",investigator:f,assets:i,events:l,skills:s,treacheries:d,enemies:u,others:m}):function(e){var t=[];t.push(e.deckTitle+"\r\n\r\n"),t.push(e.investigator.name+"\r\n\r\n"),e.assets.length>0&&(t.push("Assets\r\n"),e.assets.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.events.length>0&&(t.push("Events\r\n"),e.events.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.skills.length>0&&(t.push("Skills\r\n"),e.skills.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.treacheries.length>0&&(t.push("Treachery\r\n"),e.treacheries.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.enemies.length>0&&(t.push("Enemy\r\n"),e.enemies.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));e.others.length>0&&(t.push("Other\r\n"),e.others.forEach((function(e){var a=void 0!==e.subname?":"+e.subname:"",n=void 0!==e.xp&&e.xp>0?" ["+e.xp+"] ":" ";t.push(e.count+"x "+e.name+a+n+"("+b[e.pack]+")\r\n")})),t.push("\r\n"));var a=document.createElement("a"),n=new Blob(t,{type:"text/plain"});a.href=URL.createObjectURL(n),a.download=e.deckTitle.replace(/\s/g,"-")+".txt",document.body.appendChild(a),a.click(),document.body.removeChild(a)}({deckTitle:a.length>0?a:"Deck",investigator:f,assets:i,events:l,skills:s,treacheries:d,enemies:u,others:m})}};var O=function(e){var t=Object(n.useState)([!0,!1,!1]),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(["Random basic weakness","01000"]),d=Object(l.a)(s,2),u=d[0],m=d[1],f=Object(n.useState)(""),p=Object(l.a)(f,2),h=p[0],g=p[1],v=e.investigator,b=e.deckSize,E=e.cardData,k=e.collectionSets,y=e.updateCardOverlay;function C(e){var t=0;"CB2"===e.target.name?t=2:"CB1"===e.target.name&&(t=1);var a=Object(i.a)({},o);a[t]=e.target.checked,c(a)}function O(e){if("01000"!==e.target.id){var t=E.filter((function(t){return t.code===e.target.id}));if(t&&t.length>0){var a="http://www.arkhamdb.com"+t[0].imagesrc;y(a,e.clientX)}}}function N(e){y(null,0)}for(var D=[[],[],[]],T=Object.keys(E).filter((function(e){return E[e].name===v}))[0],w=E[T].deck_requirements.card,L=!1,_=0;_<Object.keys(w).length;_++){var j=w[Object.keys(w)[_]];Object.keys(j).length>1&&(L=!0);for(var P=0;P<Object.keys(j).length;P++)D[P].push(j[Object.keys(j)[P]])}D.sort((function(e,t){return e.length>0?t.length>0?parseInt(e[0])-parseInt(t[0]):-1:1}));var z=E.filter((function(e){return"basicweakness"===e.subtype_code&&"01000"!==e.code&&k[e.pack_code]})),U=r.a.createElement("div",null,D.map((function(e,t){if(e.length>0){var a=e.map((function(e){var t=Object.keys(E).filter((function(t){return E[t].code===e}))[0],a=E[t].quantity;"Occult Evidence"===E[t].name&&(a="50"===b?3:"40"===b?2:1);var n=a>1?" x"+a:"";return L?r.a.createElement("p",{id:E[t].code,key:E[t].code,onPointerEnter:O,onPointerLeave:N},E[t].name+" ("+E[t].pack_name+")"+n):r.a.createElement("p",{id:E[t].code,key:E[t].code,onPointerEnter:O,onPointerLeave:N},E[t].name+n)}));return L?r.a.createElement("div",{key:t,className:"signatureDiv"},r.a.createElement("span",{className:"signatureLeft"},r.a.createElement("input",{type:"checkbox",checked:o[t],name:"CB"+t,className:"signature-checkbox",onChange:C})),r.a.createElement("span",{className:"signatureRight"},a)):r.a.createElement("div",{key:t,className:"signatureDiv"},r.a.createElement("span",{className:"signatureCenter"},a))}return null})));return r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h3",{style:{marginBottom:"-5px"}},"Export options"),r.a.createElement("div",{className:"exportsettings"},r.a.createElement("label",null,"Deck title:"),r.a.createElement("span",{className:"export-option"},r.a.createElement("input",{className:"deckName",name:"deckName",type:"text",value:h,onChange:function(e){g(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("h4",{style:{marginBottom:"5px"}},"Signature cards"),U),r.a.createElement("div",null,r.a.createElement("h4",{style:{marginBottom:"5px"}},"Weaknesses"),r.a.createElement("p",{id:u[1],onPointerEnter:O,onPointerLeave:N},u[0]),r.a.createElement("button",{className:"button-rect button-green button-drawweakness",onClick:function(){return function(){for(var e=0,t=0;t<z.length;t++)e+=z[t].quantity;for(var a=Math.floor(Math.random()*e),n=0;n<z.length;n++){if(a<=0){m([z[n].name,z[n].code]);break}a-=z[n].quantity}}()}},"Draw weakness"),r.a.createElement("div",{className:"description"},"Export as an OCTGN deck file.  To import a downloaded .o8d deck into ArkhamDB, go to My Decks and click Import Deck, then File.")),r.a.createElement("div",null,r.a.createElement("button",{className:"button-rect button-green button-export",onClick:function(){return function(t){var a,n=[],r=Object(S.a)(D.entries());try{var c=function(){var e=Object(l.a)(a.value,2),t=e[0],r=e[1];if(o[t])for(var c=function(e){var t=Object.keys(E).filter((function(t){return E[t].code===r[e]}))[0],a=E[t],o=a.quantity;"Occult Evidence"===a.name&&(o="50"===b?3:"40"===b?2:1),n.push({name:a.name,key:a.code,type_code:a.type_code,count:o})},i=0;i<r.length;i++)c(i)};for(r.s();!(a=r.n()).done;)c()}catch(d){r.e(d)}finally{r.f()}var i=Object.keys(E).filter((function(e){return E[e].code===u[1]}))[0],s=E[i];s.octgn_id||(s.octgn_id=""),n.push({name:s.name,key:s.code,type_code:s.type_code,count:1}),x({fileType:t,deckTitle:h,investigator:e.investigator,cardList:e.cardList,specialCards:n,cardData:e.cardData})}("OCTGN")}},"Export as .o8d")))};var N=function(e){var t=e.investigator,a=e.deckSize,n=e.draftTab,o=e.draftXP,c=e.draftCount,i=e.draftProgress,l=e.draftType,s=e.phase,d=e.cardList,u=e.draftPool,m=e.cardData,f=e.draftCard,p=e.updateCardList,h=e.updateDraftPool,g=e.resetApp,v=e.collectionSets,b=e.updateCardOverlay,E=null,k=null;if(m){var S=Object.keys(m).filter((function(e){return m[e].name===t}))[0],x="https://www.arkhamdb.com"+m[S].imagesrc,N="https://www.arkhamdb.com"+m[S].backimagesrc;E=r.a.createElement("img",{className:"investigator-image",src:x,alt:e.investigator}),k=r.a.createElement("img",{className:"investigator-image",src:N,alt:e.investigator+" (back)"})}var D=null,T=null;u.length>0?D=r.a.createElement(C,{draftCount:c,draftCard:f,phase:s,draftType:l,draftPool:u,cardList:d,updateCardList:p,updateDraftPool:h}):"Build Deck"===n&&(T=r.a.createElement(O,{investigator:t,deckSize:a,cardList:d,cardData:m,collectionSets:v,updateCardOverlay:b}));var w="Build Deck"===n?r.a.createElement("p",null,r.a.createElement("b",null,"Cards: "),i,"/",a):r.a.createElement("p",null,r.a.createElement("b",null,"XP: "),i,"/",o);return r.a.createElement("div",null,r.a.createElement("div",{className:"settingsDiv"},r.a.createElement("h2",null,t),E,k,w),D,r.a.createElement(y,{cardList:d,cardData:m,updateCardOverlay:b}),T,r.a.createElement("button",{className:"button-rect button-green",onClick:g},"Restart"))};var D=function(e){var t=e.investigator,a=e.secondaryClass,n=e.cardData,r=e.cardList,o=e.deckSize,c=e.upgrade,i=e.draftUseLimited,l=e.draftXP,s=e.collectionSets,d=Object.keys(n).filter((function(e){return n[e].name===t}))[0],u=n[d].deck_options,m=function(e,t){if(!e)return[];var a=[];return e.forEach((function(e){for(var n=!1,r=0;r<t.length;r++){if(!t[r].limit)O(e,t[r])&&(n=!0)}n||a.push(e)})),a}(r,u),f=null;if("Joe Diamond"===t){var p=r.filter((function(e){var t=e.traits;return!!(t&&t.search(new RegExp("insight","i"))>=0)}));o-S(r)+S(p)<=10&&(f=[{requirement:10,trait:"insight"}])}else if("Lola Hayes"===t){for(var h=["guardian","seeker","rogue","mystic","survivor"].map((function(e){return{faction:e,count:S(r.filter((function(t){return t.faction_code===e||t.faction2_code===e})))}})).sort((function(e,t){return t.count-e.count})),g=0,v=0;v<3;v++)g+=Math.min(7,h[v].count);if(o-S(r)+g<=21){for(var b=h[2].count,E=[],k=0;k<5;k++)h[k].count<7&&h[k].count>=b&&E.push(h[k].faction);f=[{requirement:7,faction:E}]}}var y=0,C=0;function S(e){var t=0;return e&&e.forEach((function(e){e.permanent||(t+=e.count)})),t}function x(e,t){var a=0;return e&&e.forEach((function(e){O(e,t)&&(a+=e.count)})),a}function O(e,t){var n=!0,r=!0,o=!0,c=!0,i=!0,l=!0,s=!0;if("Secondary Class"===t.name&&(o=!1,e.faction_code===a&&(o=!0),e.faction2_code===a&&(o=!0)),t.faction){r=!1;for(var d=0;d<t.faction.length;d++)e.faction_code===t.faction[d]&&(r=!0),e.faction2_code===t.faction[d]&&(r=!0)}if(t.level){n=!1;var u=t.level.min,m=t.level.max,f=void 0===e.xp?0:e.xp;f>=u&&f<=m&&(n=!0)}if(t.trait){c=!1;var p=e.traits;p&&p.search(new RegExp(t.trait,"i"))>=0&&(c=!0)}if(t.uses){i=!1;var h=e.text;h&&h.search(new RegExp("Uses \\([0-9\\s]+"+t.uses[0]+"\\)","i"))>=0&&(i=!0)}if(t.type){l=!1;var g=e.type_code;g&&t.type.find((function(e){return e===g}))&&(l=!0)}return t.text&&(s=!1,e.text&&e.text.search(new RegExp(t.text,"i"))>=0&&(s=!0)),r&&n&&c&&i&&l&&o&&s}return c&&(y=1,C=l),n.filter((function(e){if("investigator"===e.type_code)return!1;if("story"===e.type_code)return!1;if("location"===e.type_code)return!1;if("enemy"===e.type_code)return!1;if("treachery"===e.type_code)return!1;if(e.bonded_to)return!1;if(e.subtype_code)return!1;var t=0;if(e.xp&&(t=e.xp),void 0!==e.tabooxp&&(t+=e.tabooxp),(e.exceptional||void 0!==e.tabooexceptional&&e.tabooexceptional)&&(t*=2),t<y)return!1;if(t>C)return!1;if(e.restrictions&&e.restrictions.investigator)return!1;if(!s[e.pack_code])return!1;if(e.duplicate_of_code){var a=Object.keys(n).filter((function(t){return n[t].code===e.duplicate_of_code}))[0],o=n[a];if(s[o.pack_code])return!1}if(void 0!==e.taboodecklimit&&0===e.taboodecklimit)return!1;for(var c=!1,l=!1,d=0;d<u.length;d++)if(!u[d].requirement){var p=!1;if(O(e,u[d]))if(p=!0,u[d].not)l=!0;else if(u[d].limit){if(i)x(m,u[d])>=u[d].limit&&(p=!1);else p=!1}p&&(c=!0)}if(!c||l)return!1;var h=!1;if(r.forEach((function(t){if(t.name===e.name&&(void 0===e.subtitle||t.subtitle===e.subtitle)){var a=e.deck_limit;void 0!==e.taboodecklimit&&(a=e.taboodecklimit);var n=e.quantity;"core"===e.pack_code&&0===s.core2&&n<a&&(a=n),t.count>=a&&(h=!0)}})),h)return!1;if(f)for(var g=0;g<f.length;g++)if(!O(e,f[g]))return!1;return!0}))};var T=function(e){var t=null,a=Object(n.useState)(null),o=Object(l.a)(a,2),c=o[0],i=o[1],d=Object(n.useState)('Left"'),u=Object(l.a)(d,2),m=u[0],f=u[1],p=function(){var e=Object(n.useState)({width:void 0,height:void 0}),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListnener("resize",e)}}),[]),a}(),h=null;if(c&&(h=r.a.createElement("div",{className:"floatingImage"+m},r.a.createElement("img",{src:c,alt:""}))),e.fetchError)t=r.a.createElement("div",null,"Fetch error!");else if(e.cardData&&e.tabooData)if(e.building)t=r.a.createElement(N,{draftType:e.draftType,draftTab:e.draftTab,investigator:e.investigator,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftXP:e.draftXP,draftCount:e.draftCount[e.phase-1],draftCards:e.draftCards[e.phase-1],draftProgress:e.draftProgress,phase:e.phase,cardList:e.cardList,cardData:e.cardData,collectionSets:e.collectionSets,draftPool:e.draftPool,draftCard:e.draftCard,updateCardList:e.updateCardList,updateDraftPool:e.updateDraftPool,updateCardOverlay:function(e,t){i(e),t<p.width/2?f("Right"):f("Left")},resetApp:e.resetApp});else{var g=0;D({investigator:e.investigator,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftUseLimited:[!0,!0,!0],draftXP:e.draftXP,upgrade:"Upgrade"===e.draftTab,cardList:e.cardList,cardData:e.cardData,collectionSets:e.collectionSets}).forEach((function(t){if(t.deck_limit&&("asset"===t.type_code||"event"===t.type_code||"skill"===t.type_code)&&"weakness"!==t.subtype_code&&"basicweakness"!==t.subtype_code&&e.collectionSets[t.pack_code]&&0!==e.collectionSets[t.pack_code]&&(!t.restrictions||!t.restrictions.investigator)){var a=t.deck_limit,n=t.quantity;1===e.collectionSets[t.pack_code]&&"core"===t.pack_code&&0===e.collectionSets.core2&&n<a&&(a=n),g+=a}})),"chaos"===e.draftType?g-=2:g-=30,t=r.a.createElement("div",null,r.a.createElement(s,{investigator:e.investigator,secondaryClass:e.secondaryClass,selectedDeckSize:e.selectedDeckSize,selectedTaboo:e.selectedTaboo,deckSize:e.deckSize,cardData:e.cardData,tabooData:e.tabooData,onChangeSetting:e.handleChange}),r.a.createElement(k,{expandCollection:e.expandCollection,collectionSets:e.collectionSets,onChangeSetting:e.handleChange}),r.a.createElement(v,{draftTab:e.draftTab,draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,ready:e.ready,filteredCount:g,myriadCount:e.myriadCount,onChangeSetting:e.handleChange}))}else t=r.a.createElement("div",{style:{marginBottom:"20px"}},"Loading...");return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"ArkhamDraft"),t,h,r.a.createElement("div",{className:"copyright",style:{padding:"5px",boxSizing:"border-box"}},"Arkham Horror: The Card Game and all information presented here, both literal and graphical, is copyrighted by Fantasy Flight Games. This website is not produced, endorsed, supported, or affiliated with Fantasy Flight Games."))};var w=function(e,t){var a=!1,n=null;if(0===e.length)return null;for(var r=function(){var r=(n=e[Math.floor(Math.random()*e.length)]).code;(t&&t.length>0?t.findIndex((function(e){return e.code===r})):-1)<0&&(a=!0)};!a;)r();return n};function L(e){var t=e.draftTab,a=e.draftCards,n=e.draftXP,r=e.draftCard,o=e.cardList,c=e.investigator,i=[];i=i.concat(o);var l=0,s=a;for("Upgrade Deck"===t&&(s=n);l<s;){e.cardList=i;var d=D(e);if(i=r(w(d),i),l=0,"Build Deck"===t){for(var u in i)i[u].permanent||(l+=i[u].count);"Joe Diamond"!==c&&"Lola Hayes"!==c||(e.cardList=i,d=D(e))}else{for(var m in i)l+=i[m].xp*i[m].count;e.cardList=i,e.draftXP=s-l,d=D(e)}}return i}function _(e){for(var t=e.draftCount,a=D(e),n=[],r=0;r<t;r++){var o=w(a,n);n.push(o)}return n}var j=function(){var e=Object(n.useState)("Agnes Baker"),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),s=Object(l.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(null),f=Object(l.a)(m,2),p=f[0],h=f[1],g=Object(n.useState)("None"),v=Object(l.a)(g,2),b=v[0],E=v[1],k=Object(n.useState)("30"),y=Object(l.a)(k,2),C=y[0],S=y[1],x=Object(n.useState)("Build Deck"),O=Object(l.a)(x,2),N=O[0],D=O[1],w=Object(n.useState)("draft"),j=Object(l.a)(w,2),P=j[0],z=j[1],U=Object(n.useState)("medium"),A=Object(l.a)(U,2),B=A[0],q=A[1],W=Object(n.useState)(1),X=Object(l.a)(W,2),R=X[0],F=X[1],M=Object(n.useState)([3,3,3]),H=Object(l.a)(M,2),I=H[0],V=H[1],G=Object(n.useState)([10,10,10]),J=Object(l.a)(G,2),K=J[0],Y=J[1],Z=Object(n.useState)([!0,!0,!0]),Q=Object(l.a)(Z,2),$=Q[0],ee=Q[1],te=Object(n.useState)(!1),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!0),ce=Object(l.a)(oe,2),ie=ce[0],le=ce[1],se=Object(n.useState)(null),de=Object(l.a)(se,2),ue=de[0],me=de[1],fe=Object(n.useState)(null),pe=Object(l.a)(fe,2),he=pe[0],ge=pe[1],ve=Object(n.useState)(!1),be=Object(l.a)(ve,2),Ee=be[0],ke=be[1],ye=Object(n.useState)([]),Ce=Object(l.a)(ye,2),Se=Ce[0],xe=Ce[1],Oe=Object(n.useState)([]),Ne=Object(l.a)(Oe,2),De=Ne[0],Te=Ne[1],we=Object(n.useState)(1),Le=Object(l.a)(we,2),_e=Le[0],je=Le[1],Pe=Object(n.useState)(!1),ze=Object(l.a)(Pe,2),Ue=ze[0],Ae=ze[1],Be=Object(n.useState)("1"),qe=Object(l.a)(Be,2),We=qe[0],Xe=qe[1],Re=Object(n.useState)({core:1,core2:1,dwl:1,tmm:1,tece:1,bota:1,uau:1,wda:1,litas:1,ptc:1,eotp:1,tuo:1,apot:1,tpm:1,bsr:1,dca:1,tfa:1,tof:1,tbb:1,hote:1,tcoa:1,tdoy:1,sha:1,tcu:1,tsn:1,wos:1,fgg:1,uad:1,icc:1,bbt:1,tde:1,sfk:1,tsh:1,dsm:1,pnr:1,wgd:1,woc:1,tic:1,itd:1,def:1,hhg:1,lif:1,lod:1,itm:1,rtnotz:1,rtdwl:1,rtptc:1,rttfa:1,nat:1,har:1,win:1,jac:1,ste:1,books:0}),Fe=Object(l.a)(Re,2),Me=Fe[0],He=Fe[1],Ie=Object(n.useState)(!1),Ve=Object(l.a)(Ie,2),Ge=Ve[0],Je=Ve[1],Ke=0,Ye=0;if(Se)for(var Ze in Se)Se[Ze].permanent||(Ke+=Se[Ze].count),Ye+=Se[Ze].xp*Se[Ze].count;Object(n.useEffect)((function(){return function(e,t){fetch("https://arkhamdb.com/api/public/cards/").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(){return t(!0)}))}(me,ke)}),[]),Object(n.useEffect)((function(){return function(e,t){fetch("https://arkhamdb.com/api/public/taboos/").then((function(e){return e.json()})).then((function(t){t=t.map((function(e){return e.cards=JSON.parse(e.cards),e})).sort((function(e,t){return e.id>t.id?1:-1})),e(t)})).catch((function(){return t(!0)}))}(ge,ke)}),[]);var Qe=Object(n.useCallback)((function(e,t){var a=0;e.xp&&(a=e.xp),void 0!==e.tabooxp&&(a+=e.tabooxp),(e.exceptional||void 0!==e.tabooexceptional&&e.tabooexceptional)&&(a*=2);var n=1;("Build Deck"===N&&(e.myriad&&(n=parseInt(We)),n>e.deck_limit&&(n=e.deck_limit),Ke+n>C&&(n=C-Ke)),t)?(t.length>0?t.findIndex((function(t){return t.key===e.code})):-1)>=0?t.map((function(t){return t.name===e.name?(t.count=t.count+n,t.count>e.deck_limit&&(t.count=e.deck_limit),t):t})):t.push({name:e.name,subtitle:e.subtitle,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:a,permanent:e.permanent,count:n,duplicateKey:e.duplicate_of_code}):t=[{name:e.name,subtitle:e.subtitle,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:a,permanent:e.permanent,count:n,duplicateKey:e.duplicate_of_code}];return t}),[We,Ke,C,N]);function $e(e,t){var a=[];(a=a.concat(I))[e-1]=t,V(a)}function et(e,t){var a=[];(a=a.concat(K))[e-1]=t,Y(a)}function tt(e,t){var a=[];(a=a.concat($))[e-1]=!$[e-1],ee(a)}Object(n.useEffect)((function(){if(ne&&!Ue){var e="Build Deck"===N?Ke:Ye,t=0;if("Build Deck"===N)if("phaseDraft"===P){if(_e>3)t=C;else for(var n=0;n<_e;n++)t+=parseInt(K[n],10);t>C&&(t=C)}else t=C;else t=R;if(ie){if("chaos"===P){var r=L({draftTab:N,investigator:a,secondaryClass:d,deckSize:C,draftCards:t,draftXP:t,upgrade:"Upgrade"===N,cardList:Se,collectionSets:Me,cardData:ue,draftCard:Qe});xe(r),le(!1),Ae(!0)}else if(e<t)if("1"===I[_e-1]){var o=L({draftTab:N,investigator:a,secondaryClass:d,deckSize:C,draftCards:t,draftXP:t,upgrade:"Upgrade"===N,cardList:Se,cardData:ue,collectionSets:Me,draftCard:Qe});xe(o),je(_e+1)}else{var c=_({investigator:a,secondaryClass:d,deckSize:C,draftCount:I[_e-1],draftUseLimited:$[_e-1],draftXP:R-e,upgrade:"Upgrade"===N,cardList:Se,cardData:ue,collectionSets:Me});Te(c),le(!1)}}else if(De.length<1)if("draft"===P)if(e<t){var i=_({investigator:a,secondaryClass:d,deckSize:C,draftCount:I[_e-1],draftUseLimited:$[_e-1],draftXP:R-e,upgrade:"Upgrade"===N,cardList:Se,cardData:ue,collectionSets:Me});Te(i)}else Ae(!0);else if(e<t){var l=_({investigator:a,secondaryClass:d,deckSize:C,draftCount:I[_e-1],draftUseLimited:$[_e-1],draftXP:R-e,upgrade:"Upgrade"===N,cardList:Se,cardData:ue,collectionSets:Me});Te(l)}else if(_e>=3){if(e<C){var s=L({draftTab:N,investigator:a,secondaryClass:d,deckSize:C,draftCards:C-e,draftXP:R-e,upgrade:"Upgrade"===N,cardList:Se,cardData:ue,collectionSets:Me,draftCard:Qe});xe(s)}Ae(!0)}else je(_e+1),le(!0)}}),[ne,Ue,ie,P,Ke,Ye,C,a,Se,ue,he,Me,I,$,_e,K,De,N,R,d,Qe]);var at=ue&&he&&!Ee;return r.a.createElement(T,{investigator:a,secondaryClass:d,selectedDeckSize:p,selectedTaboo:b,deckSize:C,myriadCount:We,draftTab:N,draftType:P,draftWeighting:B,draftXP:R,draftCount:I,draftCards:K,draftUseLimited:$,draftProgress:"Build Deck"===N?Ke:Ye,ready:at,building:ne,fetchError:Ee,phase:_e,cardList:Se,collectionSets:Me,draftPool:De,cardData:ue,tabooData:he,handleChange:function(e,t){if("investigator"===e){if(o(t),ue&&!p){var n=Object.keys(ue).filter((function(e){return ue[e].name===t}))[0];S(ue[n].deck_requirements.size);var r=ue[n].deck_options.filter((function(e){return"Secondary Class"===e.name}));r.length>0&&u(r[0].faction_select[0])}}else if("secondaryClass"===e)u(t);else if("selectedDeckSize"===e)h(t),S(t);else if("draftTab"===e)D(t);else if("draftType"===e)z(t);else if("draftWeighting"===e)q(t);else if("draftXP"===e)F(t);else if("draftCount1"===e)$e(1,t);else if("draftCount2"===e)$e(2,t);else if("draftCount3"===e)$e(3,t);else if("draftCards1"===e)et(1,t);else if("draftCards2"===e)et(2,t);else if("draftCards3"===e)et(3,t);else if("draftUseLimited1"===e)tt(1,t);else if("draftUseLimited2"===e)tt(2,t);else if("draftUseLimited3"===e)tt(3,t);else if("taboo"===e)E(t);else if("myriadCount"===e)Xe(t);else if("expandCollection"===e)Je(t);else if("collectionSetOn"===e){var c=Object(i.a)({},Me);t.forEach((function(e){c[e]=1})),He(c)}else if("collectionSetOff"===e){var l=Object(i.a)({},Me);t.forEach((function(e){l[e]=0})),He(l)}else if("building"===e){if(!0===t&&ue&&he){var s=Object.keys(ue).filter((function(e){return ue[e].name===a}))[0];if(p||S(ue[s].deck_requirements.size),!d){var m=ue[s].deck_options.filter((function(e){return"Secondary Class"===e.name}));m.length>0&&u(m[0].faction_select[0])}var f=he.filter((function(e){return e.code===b}));me(function(e,t){return e.map((function(e){delete e.tabooxp,delete e.tabooexceptional,delete e.taboodecklimit;var a=null;return t.length>0&&(a=t[0].cards.filter((function(t){return t.code===e.code}))),a&&a.forEach((function(t){void 0!==t.xp&&(e.tabooxp=t.xp),void 0!==t.exceptional&&t.exceptional&&(e.tabooexceptional=!0,e.taboodecklimit=1),void 0!==t.deck_limit&&(e.taboodecklimit=t.deck_limit)})),e}))}(ue,f))}re(t)}},draftCard:Qe,updateCardList:xe,updateDraftPool:Te,resetApp:function(){re(!1),le(!0),xe([]),Te([]),je(1),Ae(!1)},expandCollection:Ge})};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))},7:function(e,t,a){e.exports=a(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.b6085165.chunk.js.map