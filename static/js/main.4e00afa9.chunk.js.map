{"version":3,"sources":["components/options/InvestigatorSettings.js","components/options/SettingsType.js","components/options/SettingsChaos.js","components/options/SettingsDraft.js","components/options/SettingsPhase.js","components/options/SettingsPhasedDraft.js","components/options/SettingsBuild.js","components/options/SettingsUpgrade.js","components/options/Settings.js","components/PackData.js","components/options/CollectionCycle.js","components/options/CollectionSettings.js","components/draft/CardList.js","components/ClassColors.js","components/draft/DraftArea.js","components/ExportDeck.js","components/options/ExportSettings.js","components/draft/Draft.js","components/DraftFilters.js","App.js","components/DraftData.js","AppContainer.js","index.js"],"names":["InvestigatorSettings","props","investigator","parallel","secondaryClass","selectedDeckSize","selectedTaboo","deckSize","cardData","tabooData","investigatorData","investigatorFull","handleChange","event","onChangeSetting","target","name","value","changeInvestigator","match","onChangeInvestigator","secondaryFactionList","deckSizeList","tabooList","secondaryClassValue","deckSizeValue","investigatorID","Object","keys","filter","key","alternate_of_name","deckOptions","deck_options","i","length","faction_select","map","item","index","toUpperCase","slice","deck_size_select","code","date_start","unshift","tabooDiv","className","onChange","secondaryClassDiv","deckSizeDiv","id","onClick","Math","floor","random","SettingsType","style1","style2","handleClick","attributes","nodeValue","draftTab","backgroundColor","borderLeft","borderBottom","borderRight","style","SettingsChaos","SettingsDraft","type","min","max","step","draftCount","SettingsPhase","padding","phase","maxCards","draftCards","checked","draftUseLimited","SettingsPhasedDraft","limit2","limit3","limit4","warningText2","warningText3","warningStyle2","warningStyle3","warningStyle4","display","SettingsBuild","draftSettings","draftDescription","draftType","myriadText","myriadCount","width","textAlign","SettingsUpgrade","draftWeighting","draftXP","Settings","button","ready","filteredCount","color","PackData","CollectionCycle","collectionSets","includedSets","columnValue","checkboxes","header","position","right","top","title","CollectionSettings","expandCollection","handleExpand","coreCount","packCount","CardList","cardList","updateCardOverlay","assetCount","eventCount","skillCount","otherCount","hand","hand2","arcane","arcane2","accessory","body","ally","tarot","otherasset","permanent","skill","other","onEnterCard","cardArray","imagesrc","clientX","onLeaveCard","forEach","type_code","push","count","slot","assetHeader","handHeader","handContents","sort","a","b","countStr","onPointerEnter","onPointerLeave","hand2Header","hand2Contents","arcaneHeader","arcaneContents","arcane2Header","arcane2Contents","accessoryHeader","accessoryContents","bodyHeader","bodyContents","allyHeader","allyContents","tarotHeader","tarotContents","otherassetHeader","otherassetContents","permanentHeader","permanentContents","eventHeader","eventContents","skillHeader","skillContents","otherHeader","otherContents","marginBottom","ColorForClass","classCode","factionCodes","factionIndex","f","DraftArea","draftPool","draftCard","updateCardList","updateDraftPool","newList","draftCardWithIndex","findIndex","src","includes","updatedList","concat","images","factionCode","faction2_code","faction_code","classColor","undefined","href","url","rel","imageSrc","imageLoaded","alt","visibility","onLoad","newPool","phaseText","ExportDeck","fileType","deckTitle","specialCards","asset","treachery","enemy","investigatorCard","listItem","card","dataItem","dataObject","subname","xp","pack","pack_code","octgn_id","deckTextData","split","replace","assets","events","skills","treacheries","enemies","others","element","document","createElement","file","Blob","URL","createObjectURL","download","appendChild","click","removeChild","ExportO8D","subtitle","level","ExportTXT","SettingsExport","useState","useSignatures","changeUseSignatures","basicWeakness","changeBasicWeakness","changeDeckTitle","handleCheckbox","newSignatures","signatureCards","useCheckbox","cardRequirements","deck_requirements","crkey","requirement","rkey","a1","a2","parseInt","weaknessCards","subtype_code","signatureOptions","signatureID","sigQuantity","quantity","quantityText","cardName","pack_name","weaknessCount","weaknessRoll","handleWeaknessClick","burdenOfDestinyAdded","entries","signatureIndex","signatureArray","j","cardID","weaknessID","weaknessCard","handleExportClick","Draft","draftProgress","resetApp","investigatorCardImage","investigatorCardImageBack","backimagesrc","draftContent","exportContent","ExportSettings","progress","FilterCards","upgrade","filteredDeck","list","options","legal","limit","testDeckOption","filterDeckForLimited","requirementOptions","joeRequiredCards","cardTraits","traits","search","RegExp","countDeck","trait","lolaRequiredCards","faction","e1","e2","minCount","factionRequirement","minLevel","maxLevel","countDeckLimited","option","secondaryFaction","uses","text","ixp","cardText","cardType","find","bonded_to","tabooxp","exceptional","tabooexceptional","restrictions","duplicate_of_code","duplicateID","duplicateCard","taboodecklimit","rejected","optionLegal","not","limited","deckLimit","deck_limit","App","contents","overlayImage","updateOverlayImage","overlayPosition","updateOverlayPosition","windowSize","height","setWindowSize","useEffect","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListnener","useWindowSize","overlay","fetchError","building","image","xloc","cardLimit","handleChangeInvestigator","boxSizing","DrawCard","randomCard","randomCode","standardChaosDraft","draftTarget","filteredData","simpleDraft","AppContainer","changeParallel","changeSecondaryClass","changeSelectedDeckSize","changeSelectedTaboo","changeDeckSize","changeDraftTab","changeDraftType","changeDraftWeighting","changeDraftXP","changeDraftCount","changeDraftCards","changeDraftUseLimited","changeBuilding","newPhase","changeNewPhase","updateCardData","updateTabooData","updateFetchError","changePhase","complete","changeComplete","updateMyriadCount","updateCollectionSets","changeExpandCollection","draftProgressBuild","draftProgressUpgrade","fetch","then","res","json","catch","fetchData","cards","JSON","parse","item1","item2","fetchTaboo","useCallback","cardXP","addCount","myriad","duplicateKey","doChangeDraftCount","newCount","doChangeDraftCards","newCards","doChangeDraftUseLimited","newUseLimited","pool","addCollectionSets","set","removeCollectionSets","size","classOptions","tData","cData","tabooEntry","taboo","mergeTabooData","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4e00afa9.chunk.js","sourcesContent":["import React from \"react\"\n\nfunction InvestigatorSettings(props) {\n    const { investigator, parallel, secondaryClass, selectedDeckSize, selectedTaboo, deckSize, cardData, tabooData } = props\n\n    const investigatorData = [\n        'Agnes Baker',\n        'Agnes Baker (Parallel)',\n        'Akachi Onyele',\n        'Amanda Sharpe',\n        '\"Ashcan\" Pete',\n        'Bob Jenkins',\n        'Calvin Wright',\n        'Carolyn Fern',\n        'Daisy Walker',\n        'Daisy Walker (Parallel)',\n        'Daniela Reyes',\n        'Dexter Drake',\n        'Diana Stanley',\n        'Father Mateo',\n        'Finn Edwards',\n        'Gloria Goldberg',\n        'Harvey Walters',\n        'Jacqueline Fine',\n        'Jenny Barnes',\n        'Jim Culver',\n        'Joe Diamond',\n        'Leo Anderson',\n        'Lily Chen',\n        'Lola Hayes',\n        'Luke Robinson',\n        'Mandy Thompson',\n        'Marie Lambeau',\n        'Mark Harrigan',\n        'Minh Thi Phan',\n        'Monterey Jack',\n        'Nathaniel Cho',\n        'Norman Withers',\n        'Patrice Hathaway',\n        'Preston Fairmont',\n        'Rex Murphy',\n        'Rita Young',\n        'Roland Banks',\n        'Sefina Rousseau',\n        'Silas Marsh',\n        'Sister Mary',\n        '\"Skids\" O\\'Toole',\n        '\"Skids\" O\\'Toole (Parallel)',\n        'Stella Clark',\n        'Tommy Muldoon',\n        'Tony Morgan',\n        'Trish Scarborough',\n        'Ursula Downs',\n        'Wendy Adams',\n        'William Yorick',\n        'Winifred Habbamock',\n        'Zoey Samaras'\n    ]\n\n    const investigatorFull = parallel ? investigator + ' (Parallel)' : investigator\n\n    function handleChange(event) {\n        props.onChangeSetting(event.target.name, event.target.value)\n    }\n\n    function changeInvestigator(value) {\n        let re = /(.*)(\\s\\(Parallel\\))/\n\n        const match = value.match(re)\n\n        if (match) {\n            // parallel investigator\n//            props.onChangeSetting('parallel', true)\n//            props.onChangeSetting('investigator', match[1])\n            props.onChangeInvestigator(match[1], true)\n        }\n        else {\n//            props.onChangeSetting('parallel', false)\n//            props.onChangeSetting('investigator', value)\n            props.onChangeInvestigator(value, false)\n        }\n    }\n\n    function handleChangeInvestigator(event) {\n        changeInvestigator(event.target.value)\n    }\n\n    function handleRandom(event) {\n        changeInvestigator(investigatorData[Math.floor(Math.random() * investigatorData.length)])\n    }\n\n    let secondaryFactionList = null\n    let deckSizeList = null\n    let tabooList = null\n    let secondaryClassValue = secondaryClass\n    let deckSizeValue = selectedDeckSize ? selectedDeckSize : deckSize\n\n    if (cardData) {\n        const investigatorID = Object.keys(cardData)\n        .filter(key => {\n            return cardData[key].name === investigator && (parallel ? typeof cardData[key].alternate_of_name !== 'undefined' : true)\n        })[0]\n\n        const deckOptions = cardData[investigatorID].deck_options\n\n        for (let i = 0; i < deckOptions.length; i++) {\n            if (deckOptions[i].name === 'Secondary Class')\n            {\n                const list = deckOptions[i].faction_select\n\n                secondaryFactionList = list.map((item, index) => {\n                    return <option value={item} key={index}>\n                        {item[0].toUpperCase() + item.slice(1)}\n                        </option>\n                })\n            }\n            else if (deckOptions[i].name === 'Deck Size')\n            {\n                const list = deckOptions[i].deck_size_select\n\n                deckSizeList = list.map((item, index) => {\n                    return <option value={item} key={index}>\n                        {item}\n                        </option>\n                })\n            }\n        }\n    }\n\n    if (tabooData) {\n        tabooList = tabooData.map((item, index) => {\n            return <option value={item.code} key={index}>\n                {item.date_start}\n                </option>\n        })\n\n        tabooList.unshift(<option value=\"None\" key=\"100\">\n            {\"None\"}\n            </option>)\n    }\n\n    const tabooDiv = <div>\n        <label className=\"taboo\" value={selectedTaboo}>Taboo list:</label>\n        <span className=\"investigator-option\">\n            <select className=\"taboo investigatorList\" name=\"taboo\" value={selectedTaboo} onChange={handleChange}>\n                {tabooList}\n            </select>\n        </span>\n    </div>\n\n//    let skidsName = '\"Skids\" '\n//    skidsName = skidsName + \"O'Toole\"\n//    const skidsOption = <option value={skidsName}>{skidsName}</option>\n\n    const secondaryClassDiv = secondaryFactionList ?\n        <div>\n            <label value={secondaryClassValue}>Secondary class:</label>\n            <span className=\"investigator-option\">\n                <select className=\"secondaryClass investigatorList\" name=\"secondaryClass\" value={secondaryClassValue} onChange={handleChange}>\n                    {secondaryFactionList}\n                </select>\n            </span>\n        </div>\n        :\n        null\n\n    const deckSizeDiv = deckSizeList ?\n        <div>\n            <label value={deckSizeValue}>Deck size:</label>\n            <span className=\"investigator-option\">\n                <select className=\"deckSize investigatorList\" name=\"selectedDeckSize\" value={deckSizeValue} onChange={handleChange}>\n                    {deckSizeList}\n                </select>\n            </span>\n        </div>\n        :\n        null\n\n    return (\n        <div className=\"settingsDiv\">\n            <h3>Investigator Options</h3>\n            <label>Investigator:</label>\n            <span className=\"investigator-option\">\n                <select name=\"investigator\" value={investigatorFull} onChange={handleChangeInvestigator}>\n                    {investigatorData.map( (name, index) => (\n                        <option value={name} key={name}>{name}</option>\n                    ))}\n                </select>\n                <button className=\"button-rect\" id=\"button-random\" onClick={handleRandom}>Random</button>\n            </span>\n            {secondaryClassDiv}\n            {deckSizeDiv}\n            {tabooDiv}\n        </div>\n    )\n}\n\nexport default InvestigatorSettings","import React from 'react'\n\nfunction SettingsType(props) {\n    let style1 = {}\n    let style2 = {}\n\n    if (props.draftTab === 'Build Deck') {\n        style1 = {\n            backgroundColor: \"#ebebeb\"\n        }\n        style2 = {\n            backgroundColor: \"#bababa\",\n            borderLeft: \"black 2px solid\",\n            borderBottom: \"black 2px solid\"\n        }\n    } else {\n        style1 = {\n            backgroundColor: \"#bababa\",\n            borderRight: \"black 2px solid\",\n            borderBottom: \"black 2px solid\"\n        }\n        style2 = {\n            backgroundColor: \"#ebebeb\"\n        }\n    }\n\n    function handleClick(event) {\n        props.onChangeSetting(event.target.attributes.name.nodeValue, event.target.attributes.value.nodeValue)\n    }\n\n    return (\n        <div className='draft-type'>\n            <div className='type-button' name='draftTab' value='Build Deck' style={style1} onClick={handleClick}>\n                Build Deck\n            </div>\n            <div className='type-button' name='draftTab' value='Upgrade' style={style2} onClick={handleClick}>\n                Upgrade\n            </div>\n        </div>\n    )\n}\n\nexport default SettingsType","import React from 'react'\n\nfunction SettingsChaos(props) {\n    return (\n        <div className=\"draftSettingsDraft\">\n        </div>\n    )\n}\n\nexport default SettingsChaos","import React from 'react'\n\nfunction SettingsDraft(props) {\n\n    function handleChange(event) {\n        props.onChangeSetting(event.target.name, event.target.value)\n    }\n\n    return (\n        <div>\n            <label>Cards to select from:</label>\n            <span className=\"draft-option\">\n                <input type=\"range\" min=\"2\" max=\"15\" step=\"1\" value={props.draftCount} className=\"slider\" name=\"draftCount1\" onChange={handleChange}/>\n                <span className=\"sliderValue\">{props.draftCount}</span>\n            </span>\n        </div>\n    )\n}\n\nexport default SettingsDraft","import React from 'react'\n\nfunction SettingsPhase(props) {\n    return (\n        <div className=\"draftphaseDiv\">\n            <h4 style={{padding: \"0 0 5px 0\"}}>Stage {props.phase}</h4>\n            <label>Cards to select from:</label>\n            <span className='draftphase-option'>\n                <input type=\"range\" min=\"1\" max=\"15\" value={props.draftCount} className=\"slider\" name=\"draftCount\" onChange={props.onChangeSetting}/>\n                <span className=\"sliderValue\">{props.draftCount}</span>\n            </span>\n            <br />\n            <label>Cards selected in this stage: </label>\n            <span className='draftphase-option'>\n                <input type=\"range\" min=\"0\" max={props.maxCards} value={props.draftCards} className=\"slider\" name=\"draftCards\" onChange={props.onChangeSetting}/>\n                <span className=\"sliderValue\">{props.draftCards}</span>\n            </span>\n            <br />\n            <label>Include cards with limited deck slots:</label>\n            <span className='draftphase-option'>\n                <input type=\"checkbox\" checked={props.draftUseLimited} name=\"draftUseLimited\" className=\"checkbox\" onChange={props.onChangeSetting}/>\n            </span>\n        </div>\n    )\n}\n\nexport default SettingsPhase","import React from 'react'\n\nimport SettingsPhase from './SettingsPhase'\n\nfunction SettingsPhasedDraft(props) {\n    let limit2 = props.deckSize - props.draftCards[0]\n    let limit3 = limit2 - props.draftCards[1]\n    let limit4 = limit3 - props.draftCards[2]\n\n    let warningText2 = null\n    let warningText3 = null\n    let warningStyle2 = {}\n    let warningStyle3 = {}\n    let warningStyle4 = {}\n\n    if (limit2 < props.draftCards[1]) {\n        if (limit2 > 0) warningText2 = \"Only \" + limit2\n        else warningText2 = \"No\"\n\n        warningStyle2 = {display: \"block\"}\n    } else {\n        warningStyle2 = {display: \"none\"}\n    }\n\n    if (limit3 < props.draftCards[2]) {\n        if (limit3 > 0) warningText3 = \"Only \" + limit3\n        else warningText3 = \"No\"\n\n        warningStyle3 = {display: \"block\"}\n        if (limit3 < 0) limit3 = 0;\n    } else {\n        warningStyle3 = {display: \"none\"}\n    }\n\n    if (limit4 > 0) {\n        warningStyle4 = {display: \"block\"}\n    } else {\n        warningStyle4 = {display: \"none\"}\n    }\n\n    function handleChange1(event) {\n        props.onChangeSetting(event.target.name + '1', event.target.value)\n    }\n\n    function handleChange2(event) {\n        props.onChangeSetting(event.target.name + '2', event.target.value)\n    }\n\n    function handleChange3(event) {\n        props.onChangeSetting(event.target.name + '3', event.target.value)\n    }\n\n    return (\n        <div className=\"draftSettingsDraft\">\n            <SettingsPhase phase=\"1\" draftCount={props.draftCount[0]} draftCards={props.draftCards[0]} draftUseLimited={props.draftUseLimited[0]} maxCards={props.deckSize} onChangeSetting={handleChange1} />\n            <SettingsPhase phase=\"2\" draftCount={props.draftCount[1]} draftCards={props.draftCards[1]} draftUseLimited={props.draftUseLimited[1]} maxCards={props.deckSize} onChangeSetting={handleChange2} />\n            <SettingsPhase phase=\"3\" draftCount={props.draftCount[2]} draftCards={props.draftCards[2]} draftUseLimited={props.draftUseLimited[2]} maxCards={props.deckSize} onChangeSetting={handleChange3} />\n            <div className=\"warning\" style={warningStyle2}>\n                <b>Warning:</b> {warningText2} cards will be drawn in Phase 2.\n            </div>\n            <div className=\"warning\" style={warningStyle3}>\n                <b>Warning:</b> {warningText3} cards will be drawn in Phase 3.\n            </div>\n            <div className=\"warning\" style={warningStyle4}>\n                <b>Warning:</b> The final {limit4} cards will be drawn at random.\n            </div>\n        </div>\n    )\n}\n\nexport default SettingsPhasedDraft\n","import React from 'react'\n\nimport SettingsChaos from './SettingsChaos'\nimport SettingsDraft from './SettingsDraft'\nimport SettingsPhasedDraft from './SettingsPhasedDraft'\n\nfunction SettingsBuild(props) {\n    function handleChange(event) {\n        props.onChangeSetting(event.target.name, event.target.value)\n    }\n\n    let draftSettings\n    let draftDescription\n\n    if (props.draftType === 'chaos') {\n        draftSettings = <SettingsChaos \n            onChangeSetting={props.onChangeSetting}\n        />\n        draftDescription = <div className=\"description\">\n            The original Ultimatum of Chaos rules from the 2017 Invocation Event.  A \n            full deck will be created completely randomly from all cards available to \n            the chosen investigator.\n        </div>\n    }\n    else if (props.draftType === 'draft') {\n        draftSettings = <SettingsDraft\n            draftCount={props.draftCount[0]} \n            onChangeSetting={props.onChangeSetting}\n        />\n        draftDescription = <div className=\"description\">\n            Select cards one by one from a random display of cards available to the \n            chosen investigator.  Each card will be selected from a number of cards \n            determined by the \"Cards to select from\" option.  \n        </div>\n    }\n    else if (props.draftType === 'phaseDraft') {\n        draftSettings = <SettingsPhasedDraft\n            draftCount={props.draftCount} \n            draftCards={props.draftCards}\n            draftUseLimited={props.draftUseLimited}\n            deckSize={props.deckSize} \n            onChangeSetting={props.onChangeSetting}\n        />\n        draftDescription = <div className=\"description\">\n            The draft will proceed through 3 distinct stages.  All stages will draft \n            from the full set of cards available to the chosen investigator.  Each stage \n            will draft a number of cards equal to \"Cards selected in this stage\", not \n            including Permanent cards.  Each will be selected from a number of cards \n            determined by the \"Cards to select from\" option.  This allows you to use \n            completely random selection for part of the deck, or use a wider range of \n            choices for part of the deck.\n        </div>\n    }\n\n    const myriadText = props.myriadCount === '1' ? 'card' : 'cards'\n\n    return (\n        <div className=\"draftsettings\">\n            <label>Type:</label>\n            <span className='draft-option'>\n                <select name=\"draftType\" value={props.draftType} onChange={handleChange}>\n                    <option value=\"chaos\">Standard chaos</option>\n                    <option value=\"draft\">Simple draft</option>\n                    <option value=\"phaseDraft\">Draft in stages</option>\n                </select>\n            </span>\n            <label>Drafting myriad adds:</label>\n            <span className='draft-option'>\n                <select style={{width: '25%'}} name=\"myriadCount\" value={props.myriadCount} onChange={handleChange}>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                </select>\n                <label style={{textAlign: \"left\"}}> {myriadText}</label>\n            </span>\n            {draftSettings}\n            {draftDescription}\n        </div>\n    )\n}\n\nexport default SettingsBuild","import React from 'react'\n\nimport SettingsChaos from './SettingsChaos'\nimport SettingsDraft from './SettingsDraft'\n\nfunction SettingsUpgrade(props) {\n    function handleChange(event) {\n        props.onChangeSetting(event.target.name, event.target.value)\n    }\n\n    let draftSettings\n\n    if (props.draftType === 'chaos') draftSettings = <SettingsChaos \n        onChangeSetting={props.onChangeSetting}\n    />\n    else if (props.draftType === 'draft') draftSettings = <SettingsDraft\n        draftCount={props.draftCount[0]} \n        onChangeSetting={props.onChangeSetting}\n    />\n\n    //const myriadText = props.myriadCount === '1' ? 'card' : 'cards'\n\n    return (\n        <div className=\"draftsettings\">\n        <label>Type:</label>\n        <span className='draft-option'>\n            <select name=\"draftType\" value={props.draftType} onChange={handleChange}>\n                <option value=\"chaos\">Standard chaos</option>\n                <option value=\"draft\">Simple draft</option>\n            </select>\n        </span>\n        <label>Weighting:</label>\n        <span className='draft-option'>\n            <select name=\"draftWeighting\" value={props.draftWeighting} onChange={handleChange}>\n                <option value=\"low\">Prefer low XP</option>\n                <option value=\"medium\">Default</option>\n                <option value=\"high\">Prefer high XP</option>\n            </select>\n        </span>\n        <label>XP:</label>\n        <span className='draft-option'>\n            <input style={{width: '23%'}} name=\"draftXP\" type=\"number\" value={props.draftXP} min=\"1\" onChange={handleChange}></input>\n        </span>\n        {draftSettings}\n    </div>\n    )\n}\n\nexport default SettingsUpgrade","import React from 'react'\n\nimport SettingsType from './SettingsType'\nimport SettingsBuild from './SettingsBuild'\nimport SettingsUpgrade from './SettingsUpgrade'\n\nfunction Settings(props) {\n    function handleStart(event) {\n        props.onChangeSetting('building', true)\n    }\n\n    const draftSettings = props.draftTab === 'Build Deck' ?\n        <SettingsBuild \n            draftType={props.draftType}\n            draftCount={props.draftCount}\n            draftCards={props.draftCards}\n            draftUseLimited={props.draftUseLimited}\n            deckSize={props.deckSize}\n            myriadCount={props.myriadCount}\n            onChangeSetting={props.onChangeSetting}\n        /> :\n        <SettingsUpgrade \n            draftType={props.draftType}\n            draftWeighting={props.draftWeighting}\n            draftXP={props.draftXP}\n            draftCount={props.draftCount}\n            draftCards={props.draftCards}\n            deckSize={props.deckSize}\n            myriadCount={props.myriadCount}\n            onChangeSetting={props.onChangeSetting}\n        />\n\n    const button = props.ready\n        ? (props.draftTab === 'Upgrade' || props.filteredCount >= props.deckSize \n            ? <button className=\"button-rect button-green\" onClick={handleStart}>Start</button>\n            : <div>\n                <br />\n                <p style={{color: 'red'}}>There are not enough cards in the selected packs to draft a complete deck.  Add packs in Collection Options.</p>\n                <button className=\"button-rect button-red\">Error</button>\n              </div>)\n        : <button className=\"button-rect button-red\">Loading...</button>\n\n    return (\n        <div className='settingsDiv'>\n            <SettingsType draftTab={props.draftTab} onChangeSetting={props.onChangeSetting}/>\n            <h3>Draft Options</h3>\n            <h5>{props.draftTab}</h5>\n            {draftSettings}\n            {button}\n        </div>\n    )\n}\n\nexport default Settings","const PackData = {\n    'core': 'Core set',\n    'core2': 'Second core set',\n    'dwl': 'The Dunwich Legacy',\n    'tmm': 'The Miskatonic Museum',\n    'tece': 'The Essex County Express',\n    'bota': 'Blood on the Altar',\n    'uau': 'Undimensioned and Unseen',\n    'wda': 'Where Doom Awaits',\n    'litas': 'Lost in Time and Space',\n    'ptc': 'The Path to Carcosa',\n    'eotp': 'Echoes of the Past',\n    'tuo': 'The Unspeakable Oath',\n    'apot': 'A Phantom of Truth',\n    'tpm': 'The Pallid Mask',\n    'bsr': 'Black Stars Rise',\n    'dca': 'Dim Carcosa',\n    'tfa': 'The Forgotten Age',\n    'tof': 'Threads of Fate',\n    'tbb': 'The Boundary Beyond',\n    'hote': 'Heart of the Elders',\n    'tcoa': 'The City of Archives',\n    'tdoy': 'The Depths of Yoth',\n    'sha': 'Shattered Aeons',\n    'tcu': 'The Circle Undone',\n    'tsn': 'The Secret Name',\n    'wos': 'The Wages of Sin',\n    'fgg': 'For the Greater Good',\n    'uad': 'Union and Disillusion',\n    'icc': 'In the Clutches of Chaos',\n    'bbt': 'Before the Black Throne',\n    'tde': 'The Dream Eaters',\n    'sfk': 'The Search for Kadath',\n    'tsh': 'A Thousand Shapes of Horror',\n    'dsm': 'Dark Side of the Moon',\n    'pnr': 'Point of No Return',\n    'wgd': 'Where the Gods Dwell',\n    'woc': 'Weaver of the Cosmos',\n    'tic': 'The Innsmouth Conspiracy',\n    'itd': 'In Too Deep',\n    'def': 'Devil Reef',\n    'hhg': 'Horror in High Gear',\n    'lif': 'A Light in the Fog',\n    'lod': 'The Lair of Dagon',\n    'itm': 'Into the Maelstrom',\n    'nat': 'Nathaniel Cho',\n    'har': 'Harvey Walters',\n    'win': 'Winifred Habbamock',\n    'jac': 'Jacqueline Fine',\n    'ste': 'Stella Clark',\n    'rtnotz': 'Return to the Night of the Zealot',\n    'rtdwl': 'Return to the Dunwich Legacy',\n    'rtptc': 'Return to the Path to Carcosa',\n    'rttfa': 'Return to the Forgotten Age',\n    'rttcu': 'Return to the Circle Undone',\n    'eoep': 'Edge of the Earth'\n}\n\nexport default PackData","import React from 'react'\nimport PackData from '../../components/PackData'\n\nfunction CollectionCycle(props) {\n    const { collectionSets, includedSets, columnValue } = props\n\n    function handleChange(event) {\n        if (event.target.name === 'core' && !event.target.checked) props.onChangeSetting('collectionSetOff', includedSets)\n        else if (event.target.name === 'core2' && event.target.checked) props.onChangeSetting('collectionSetOn', includedSets)\n        else if (event.target.checked) props.onChangeSetting('collectionSetOn', [event.target.name])\n        else props.onChangeSetting('collectionSetOff', [event.target.name])\n\n//        if (event.target.name === 'core') {\n//            if (!event.target.checked) props.onChangeSetting('collectionSetOff', ['core2'])\n//        }\n    }\n\n    function handleSelect(event) {\n        props.onChangeSetting('collectionSetOn', includedSets)\n    }\n\n    function handleDeselect(event) {\n        props.onChangeSetting('collectionSetOff', includedSets)\n    }\n\n    const checkboxes = includedSets.map( code => {\n        return (\n            <div className=\"pack-option\" key={code}>\n                <input type=\"checkbox\" checked={collectionSets[code]} name={code} className=\"set-checkbox\" onChange={handleChange}/>\n                <label className=\"set-label\">{PackData[code]}</label>\n            </div>\n        )\n    })\n\n    return (\n        <div className={'cardSet ' + columnValue}>\n            <h4 className=\"set-header\">{props.header ? props.header : PackData[includedSets[0]]}</h4>\n\n            {checkboxes}\n\n            <div style={{position: \"absolute\", right: \"0\", top: \"0\", width: \"40%\"}}>\n                <button className=\"button-deselectset\" value=\"deselect\" title=\"Deselect all\" onClick={() => handleDeselect()}/>\n                <button className=\"button-selectset\" value=\"select\" title=\"Select all\" onClick={() => handleSelect()}/>\n            </div>\n        </div>\n    )\n}\n\nexport default CollectionCycle\n","import React from 'react'\nimport CollectionCycle from './CollectionCycle'\n\nfunction CollectionSettings(props) {\n    const { expandCollection, collectionSets, onChangeSetting } = props\n\n\n    function handleExpand(event) {\n        props.onChangeSetting('expandCollection', !expandCollection)\n    }\n\n    // I'm lazy, just gonna hard code this... (also avoids incomplete ArkhamDB entries)\n    if (expandCollection) {\n        return (\n            <div className=\"settingsDiv\">\n                <h3>Collection Options</h3>\n                <div className=\"cardContainer\">\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['core', 'core2']}\n                        columnValue='colcenter'\n                        onChangeSetting={onChangeSetting}\n                    />\n                </div>\n                <div className=\"cardContainer\">\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['dwl', 'tmm', 'tece', 'bota', 'uau', 'wda', 'litas']}\n                        columnValue='col1'\n                        onChangeSetting={onChangeSetting}\n                    />\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['ptc', 'eotp', 'tuo', 'apot', 'tpm', 'bsr', 'dca']}\n                        columnValue='col2'\n                        onChangeSetting={onChangeSetting}\n                    />\n                </div>\n                <div className=\"cardContainer\">\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['tfa', 'tof', 'tbb', 'hote', 'tcoa', 'tdoy', 'sha']}\n                        columnValue='col1'\n                        onChangeSetting={onChangeSetting}\n                    />\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['tcu', 'tsn', 'wos', 'fgg', 'uad', 'icc', 'bbt']}\n                        columnValue='col2'\n                        onChangeSetting={onChangeSetting}\n                    />\n                </div>\n                <div className=\"cardContainer\">\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['tde', 'sfk', 'tsh', 'dsm', 'pnr', 'wgd', 'woc']}\n                        columnValue='col1'\n                        onChangeSetting={onChangeSetting}\n                    />\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['tic', 'itd', 'def', 'hhg', 'lif', 'lod', 'itm']}\n                        columnValue='col2'\n                        onChangeSetting={onChangeSetting}\n                    />\n                </div>\n                <div className=\"cardContainer\">\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['eoep']}\n                        columnValue='col1'\n                        onChangeSetting={onChangeSetting}\n                    />\n                    <div className='col2'>\n                    </div>\n                </div>\n                <div className=\"cardContainer\">\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['nat', 'har', 'win', 'jac', 'ste']}\n                        header='Starter Decks'\n                        columnValue='col1'\n                        onChangeSetting={onChangeSetting}\n                    />\n                    <CollectionCycle \n                        collectionSets={collectionSets}\n                        includedSets={['rtnotz', 'rtdwl', 'rtptc', 'rttfa', 'rttcu']}\n                        header='Return to Boxes'\n                        columnValue='col2'\n                        onChangeSetting={onChangeSetting}\n                    />\n                </div>\n\n                <button className=\"button-rect button-green\" onClick={handleExpand}>Collapse</button>\n            </div>\n        )\n    }\n    else {\n        var coreCount = collectionSets['core'] + collectionSets['core2']\n        var packCount = 0\n        for (var code in collectionSets) {\n            if (collectionSets[code] === 1) packCount++\n        }\n        packCount -= coreCount\n\n        return (\n            <div className=\"settingsDiv\">\n                <h3>Collection Options</h3>\n                <p>{coreCount} core set{coreCount === 1 ? null : 's'}, {packCount} pack{packCount === 1 ? null : 's'} selected</p>\n                <button className=\"button-rect button-green\" onClick={handleExpand}>Expand</button>\n            </div>\n        )\n    }\n}\n\nexport default CollectionSettings\n","import React from 'react'\n\nfunction CardList(props) {\n    const { cardList, cardData, updateCardOverlay } = props\n\n    let assetCount = 0\n    let eventCount = 0\n    let skillCount = 0\n    let otherCount = 0\n    const hand = []\n    const hand2 = []\n    const arcane = []\n    const arcane2 = []\n    const accessory = []\n    const body = []\n    const ally = []\n    const tarot = []\n    const otherasset = []\n    const permanent = []\n    const event = []\n    const skill = []\n    const other = []\n\n    cardList.forEach(item => {\n        if (item.type_code === 'event') {\n            event.push(item)\n            eventCount += item.count\n        }\n        else if (item.type_code === 'skill') {\n            skill.push(item)\n            skillCount += item.count\n        }\n        else if (item.type_code === 'asset') {\n            if (item.permanent) permanent.push(item)\n            else if (item.slot === 'Hand') hand.push(item)\n            else if (item.slot === 'Hand x2') hand2.push(item)\n            else if (item.slot === 'Arcane') arcane.push(item)\n            else if (item.slot === 'Arcane x2') arcane2.push(item)\n            else if (item.slot === 'Accessory') accessory.push(item)\n            else if (item.slot === 'Body') body.push(item)\n            else if (item.slot === 'Ally') ally.push(item)\n            else if (item.slot === 'Tarot') tarot.push(item)\n            else otherasset.push(item)\n            assetCount += item.count\n        }\n        else {\n            other.push(item)\n            otherCount += item.count\n        }\n    })\n\n    function onEnterCard(event) {\n        const cardArray = cardData.filter(item => item.code === event.target.id)\n\n        if (cardArray && cardArray.length > 0 && cardArray[0].imagesrc) {\n            const imagesrc = \"http://www.arkhamdb.com\" + cardArray[0].imagesrc\n\n            updateCardOverlay(imagesrc, event.clientX)\n        }\n    }\n/*\n    function onEnterCardRight(event) {\n        const cardArray = cardData.filter(item => item.code === event.target.id)\n\n        if (cardArray && cardArray.length > 0) {\n            const imagesrc = \"http://www.arkhamdb.com\" + cardArray[0].imagesrc\n\n            updateCardOverlay(imagesrc, \"Left\")\n        }\n    }\n*/\n    function onLeaveCard(event) {\n        updateCardOverlay(null, 0)\n    }\n\n    const assetHeader = assetCount > 0 ? <h4>Assets ({assetCount})</h4> : null\n    \n    const handHeader = hand.length > 0 ? <p className='slot-header'>Hand</p> : null\n    const handContents = hand.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const hand2Header = hand2.length > 0 ? <p className='slot-header'>Hand x2</p> : null\n    const hand2Contents = hand2.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const arcaneHeader = arcane.length > 0 ? <p className='slot-header'>Arcane</p> : null\n    const arcaneContents = arcane.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const arcane2Header = arcane2.length > 0 ? <p className='slot-header'>Arcane x2</p> : null\n    const arcane2Contents = arcane2.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const accessoryHeader = accessory.length > 0 ? <p className='slot-header'>Accessory</p> : null\n    const accessoryContents = accessory.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const bodyHeader = body.length > 0 ? <p className='slot-header'>Body</p> : null\n    const bodyContents = body.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const allyHeader = ally.length > 0 ? <p className='slot-header'>Ally</p> : null\n    const allyContents = ally.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const tarotHeader = tarot.length > 0 ? <p className='slot-header'>Tarot</p> : null\n    const tarotContents = tarot.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const otherassetHeader = otherasset.length > 0 ? <p className='slot-header'>Other</p> : null\n    const otherassetContents = otherasset.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const permanentHeader = permanent.length > 0 ? <p className='slot-header'>Permanent</p> : null\n    const permanentContents = permanent.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const eventHeader = eventCount > 0 ? <h4>Events ({eventCount})</h4> : null\n    const eventContents = event.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const skillHeader = skillCount > 0 ? <h4>Skills ({skillCount})</h4> : null\n    const skillContents = skill.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    const otherHeader = otherCount > 0 ? <h4>Other ({otherCount})</h4> : null\n    const otherContents = other.sort((a, b) => (a.name > b.name) ? 1 : -1).map((item, index) => {\n        const countStr = item.count > 1 ? ' x' + item.count : null\n\n        return <p id={item.key} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard} key={index}>{item.name}{countStr}</p>\n    })\n\n    return (\n        <div className=\"settingsDiv\">\n            <h3 style={{marginBottom: \"-10px\"}}>Card List</h3>\n            <div className=\"cardContainer\">\n                <div className=\"col1\">\n                    {assetHeader}\n                    {handHeader}\n                    {handContents}\n                    {hand2Header}\n                    {hand2Contents}\n                    {arcaneHeader}\n                    {arcaneContents}\n                    {arcane2Header}\n                    {arcane2Contents}\n                    {accessoryHeader}\n                    {accessoryContents}\n                    {bodyHeader}\n                    {bodyContents}\n                    {allyHeader}\n                    {allyContents}\n                    {tarotHeader}\n                    {tarotContents}\n                    {otherassetHeader}\n                    {otherassetContents}\n                    {permanentHeader}\n                    {permanentContents}\n                </div>\n                <div className=\"col2\">\n                    {eventHeader}\n                    {eventContents}\n                    {skillHeader}\n                    {skillContents}\n                    {otherHeader}\n                    {otherContents}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default CardList\n","function ColorForClass(classCode)\n{\n    const factionCodes = [ 'guardian', 'seeker', 'rogue', 'mystic', 'survivor', 'neutral', 'multiclass' ]\n    const factionColors = [ '#c8eeff', '#ffe3c2', '#b6ffd7', '#efd2ff', '#ffd1d5', '#e2e2e2', '#fffedf' ]\n\n    let factionIndex = -1\n\n    for (let f = 0; f < 7; f++) {\n        if (classCode === factionCodes[f]) factionIndex = f\n    }\n\n    return factionColors[factionIndex]\n}\n\nexport default ColorForClass","import React from 'react'\nimport ColorForClass from '../ClassColors'\n\nfunction DraftArea(props) {\n    const { draftCount, draftPool, draftCard, draftType, phase, cardList, updateCardList, updateDraftPool } = props\n\n    let newList = []\n    newList = newList.concat(cardList)\n\n    function handleClick(event) {\n        const index = draftPool.findIndex(item => {\n            return event.target.src.includes(item.imagesrc)\n        })\n    \n        draftCardWithIndex({index: index})\n    }\n\n    function draftCardWithIndex(props) {\n        const { index } = props;\n\n        const updatedList = draftCard(draftPool[index], newList)\n\n        updateCardList(updatedList)\n        updateDraftPool([])\n    }\n\n    function imageLoaded(props)\n    {\n        const { index } = props;\n\n        const newPool = [...draftPool]\n        newPool[index].imageLoaded = true\n        updateDraftPool(newPool)\n    }\n\n    let images = []\n\n    let factionCode = ''\n\n    for (let i = 0; i < draftCount; i++) {\n        if (draftPool[i].faction2_code) factionCode = 'multiclass'\n        else factionCode = draftPool[i].faction_code;\n\n        const classColor = ColorForClass(factionCode)\n\n        if (draftPool[i].imagesrc === undefined) {\n            images.push(<div className=\"draft-card-loading\" key={i} style={{backgroundColor: classColor}}><h3>{draftPool[i].name}</h3><p>Image not available</p><p><a href={draftPool[i].url} target=\"_blank\" rel=\"noreferrer noopener\">View on ArkhamDB</a></p><button className='button-rect button-green' onClick={() => { draftCardWithIndex({index: i}) }}>Draft</button></div>)\n        }\n        else {\n            let imageSrc = \"https://www.arkhamdb.com\" + draftPool[i].imagesrc\n            if (draftPool[i].imageLoaded) {\n                images.push(<div className=\"draft-card\" key={i}><img className=\"draft-image\" src={imageSrc} alt={draftPool[i].name} onClick={handleClick} /></div>)            \n            }\n            else {\n                images.push(<div className=\"draft-card-loading\" key={i} style={{backgroundColor: classColor}}><h3>{draftPool[i].name}</h3><p>Image loading...</p><p><a href={draftPool[i].url} target=\"_blank\" rel=\"noreferrer noopener\">View on ArkhamDB</a></p><button className='button-rect button-green' onClick={() => { draftCardWithIndex({index: i}) }}>Draft</button><img className=\"draft-image\" style={{visibility: \"hidden\", position: \"absolute\"}} src={imageSrc} alt={draftPool[i].name} onLoad={() => imageLoaded({index: i})} /></div>)\n            }\n        }\n    }\n\n    const phaseText = draftType === 'phaseDraft' ? ' - Stage ' + phase : null\n\n    return (\n        <div className=\"settingsDiv\">\n            <h3>Draft{phaseText}</h3>\n            <div className='draft-container'>\n                {images}\n            </div>\n            <p>Click image to draft card</p>\n        </div>\n    )\n}\n\nexport default DraftArea","import PackData from '../components/PackData'\n\nfunction ExportDeck(props) {\n    const { fileType, deckTitle, investigator, cardList, specialCards, cardData } = props\n\n    if (cardData === undefined || !cardData) return\n\n    const asset = []\n    const event = []\n    const skill = []\n    const treachery = []\n    const enemy = []\n    const other = []\n\n    // we're getting card info from CardData now, not the items...\n    const investigatorCard = cardData\n    .filter(item => {\n        return item.name === investigator\n    })[0]\n\n    cardList.concat(specialCards).forEach(listItem => {\n        const card = cardData.filter(dataItem => {\n            return listItem.key === dataItem.code\n        })[0]\n\n        let dataObject = {\n            name: listItem.name,\n            subname: card.subname,\n            count: listItem.count,\n            xp: card.xp,\n            pack: card.pack_code,\n            octgn_id: card.octgn_id\n        }\n\n        if (card.type_code === 'event') {\n            event.push(dataObject)\n        }\n        else if (card.type_code === 'skill') {\n            skill.push(dataObject)\n        }\n        else if (card.type_code === 'asset') {\n            asset.push(dataObject)\n        }\n        else if (card.type_code === 'treachery') {\n            treachery.push(dataObject)\n        }\n        else if (card.type_code === 'enemy') {\n            enemy.push(dataObject)\n        }\n        else {\n            other.push(dataObject)\n        }\n    })\n\n    if (fileType === 'OCTGN') ExportO8D({\n        deckTitle: (deckTitle.length > 0 ? deckTitle : 'Deck'),\n        investigator: investigatorCard,\n        assets: asset,\n        events: event,\n        skills: skill,\n        treacheries: treachery,\n        enemies: enemy,\n        others: other\n    })\n\n    else ExportTXT({\n        deckTitle: (deckTitle.length > 0 ? deckTitle : 'Deck'),\n        investigator: investigatorCard,\n        assets: asset,\n        events: event,\n        skills: skill,\n        treacheries: treachery,\n        enemies: enemy,\n        others: other\n    })\n}\n\nfunction ExportO8D(props) {\n    var deckTextData = ['<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\\r\\n',\n        '<deck game=\"a6d114c7-2e2a-4896-ad8c-0330605c90bf\" sleeveid=\"0\">\\r\\n',\n        '  <section name=\"Investigator\" shared=\"False\">\\r\\n'\n    ]\n    \n    const o8dids = props.investigator.octgn_id.split(':')\n\n    o8dids.forEach( item => {\n        deckTextData.push('    <card qty=\"1\" id=\"' + item + '\">' + props.investigator.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n    })\n\n    deckTextData.push('  </section>\\r\\n')\n\n    if (props.assets.length > 0) {\n        deckTextData.push('  <section name=\"Asset\" shared=\"False\">\\r\\n')\n\n        props.assets.forEach( item => {\n            deckTextData.push('    <card qty=\"' + item.count + '\" id=\"' + item.octgn_id + '\">' + item.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n        })    \n\n        deckTextData.push('  </section>\\r\\n')\n    }\n\n    if (props.events.length > 0) {\n        deckTextData.push('  <section name=\"Event\" shared=\"False\">\\r\\n')\n\n        props.events.forEach( item => {\n            deckTextData.push('    <card qty=\"' + item.count + '\" id=\"' + item.octgn_id + '\">' + item.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n        })    \n\n        deckTextData.push('  </section>\\r\\n')\n    }\n\n    if (props.skills.length > 0) {\n        deckTextData.push('  <section name=\"Skill\" shared=\"False\">\\r\\n')\n\n        props.skills.forEach( item => {\n            deckTextData.push('    <card qty=\"' + item.count + '\" id=\"' + item.octgn_id + '\">' + item.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n        })    \n\n        deckTextData.push('  </section>\\r\\n')\n    }\n\n    if (props.treacheries.length > 0 || props.enemies.length > 0) {\n        deckTextData.push('  <section name=\"Weakness\" shared=\"False\">\\r\\n')\n\n        if (props.treacheries.length > 0) {\n            props.treacheries.forEach( item => {\n                deckTextData.push('    <card qty=\"' + item.count + '\" id=\"' + item.octgn_id + '\">' + item.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n            })    \n        }\n\n        if (props.enemies.length > 0) {\n            props.enemies.forEach( item => {\n                deckTextData.push('    <card qty=\"' + item.count + '\" id=\"' + item.octgn_id + '\">' + item.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n            })    \n        }\n\n        deckTextData.push('  </section>\\r\\n')\n    }\n\n    if (props.others.length > 0) {\n        deckTextData.push('  <section name=\"Other\" shared=\"False\">\\r\\n')\n\n        props.others.forEach( item => {\n            deckTextData.push('    <card qty=\"' + item.count + '\" id=\"' + item.octgn_id + '\">' + item.name.replace(/[\"]/g, '&quot;') + '</card>\\r\\n')\n        })    \n\n        deckTextData.push('  </section>\\r\\n')\n    }\n\n    deckTextData.push('<notes><![CDATA[]]></notes>\\r\\n')\n    deckTextData.push('</deck>\\r\\n')\n\n    const element = document.createElement(\"a\")\n    const file = new Blob(deckTextData, {type: 'text/plain'})\n    element.href = URL.createObjectURL(file)\n    element.download = props.deckTitle.replace(/\\s/g, '-') + \".o8d\"\n    document.body.appendChild(element) // Required for this to work in FireFox\n    element.click()\n    document.body.removeChild(element)\n}\n\nfunction ExportTXT(props) {\n    var deckTextData = []\n    \n    deckTextData.push(props.deckTitle + '\\r\\n\\r\\n')\n    deckTextData.push(props.investigator.name + '\\r\\n\\r\\n')\n\n    if (props.assets.length > 0) {\n        deckTextData.push('Assets\\r\\n')\n\n        props.assets.forEach( item => {\n            const subtitle = (item.subname !== undefined) ? ':' + item.subname : ''\n            const level = (item.xp !== undefined && item.xp > 0) ? ' [' + item.xp + '] ' : ' '\n\n            deckTextData.push(item.count + 'x ' + item.name + subtitle + level + '(' + PackData[item.pack] + ')\\r\\n')\n        })    \n\n        deckTextData.push('\\r\\n')\n    }\n\n    if (props.events.length > 0) {\n        deckTextData.push('Events\\r\\n')\n\n        props.events.forEach( item => {\n            const subtitle = (item.subname !== undefined) ? ':' + item.subname : ''\n            const level = (item.xp !== undefined && item.xp > 0) ? ' [' + item.xp + '] ' : ' '\n\n            deckTextData.push(item.count + 'x ' + item.name + subtitle + level + '(' + PackData[item.pack] + ')\\r\\n')\n        })    \n\n        deckTextData.push('\\r\\n')\n    }\n\n    if (props.skills.length > 0) {\n        deckTextData.push('Skills\\r\\n')\n\n        props.skills.forEach( item => {\n            const subtitle = (item.subname !== undefined) ? ':' + item.subname : ''\n            const level = (item.xp !== undefined && item.xp > 0) ? ' [' + item.xp + '] ' : ' '\n\n            deckTextData.push(item.count + 'x ' + item.name + subtitle + level + '(' + PackData[item.pack] + ')\\r\\n')\n        })    \n\n        deckTextData.push('\\r\\n')\n    }\n\n    if (props.treacheries.length > 0) {\n        deckTextData.push('Treachery\\r\\n')\n\n        props.treacheries.forEach( item => {\n            const subtitle = (item.subname !== undefined) ? ':' + item.subname : ''\n            const level = (item.xp !== undefined && item.xp > 0) ? ' [' + item.xp + '] ' : ' '\n\n            deckTextData.push(item.count + 'x ' + item.name + subtitle + level + '(' + PackData[item.pack] + ')\\r\\n')\n        })    \n\n        deckTextData.push('\\r\\n')\n    }\n\n\n    if (props.enemies.length > 0) {\n        deckTextData.push('Enemy\\r\\n')\n\n        props.enemies.forEach( item => {\n            const subtitle = (item.subname !== undefined) ? ':' + item.subname : ''\n            const level = (item.xp !== undefined && item.xp > 0) ? ' [' + item.xp + '] ' : ' '\n\n            deckTextData.push(item.count + 'x ' + item.name + subtitle + level + '(' + PackData[item.pack] + ')\\r\\n')\n        })    \n\n        deckTextData.push('\\r\\n')\n    }\n\n    if (props.others.length > 0) {\n        deckTextData.push('Other\\r\\n')\n\n        props.others.forEach( item => {\n            const subtitle = (item.subname !== undefined) ? ':' + item.subname : ''\n            const level = (item.xp !== undefined && item.xp > 0) ? ' [' + item.xp + '] ' : ' '\n\n            deckTextData.push(item.count + 'x ' + item.name + subtitle + level + '(' + PackData[item.pack] + ')\\r\\n')\n        })    \n\n        deckTextData.push('\\r\\n')\n    }\n\n    const element = document.createElement(\"a\")\n    const file = new Blob(deckTextData, {type: 'text/plain'})\n    element.href = URL.createObjectURL(file)\n    element.download = props.deckTitle.replace(/\\s/g, '-') + \".txt\"\n    document.body.appendChild(element) // Required for this to work in FireFox\n    element.click()\n    document.body.removeChild(element)\n}\n\nexport default ExportDeck","import React, { useState } from 'react';\nimport ExportDeck from '../ExportDeck'\n\nfunction SettingsExport(props) {\n    const [useSignatures, changeUseSignatures] = useState([ true, false, false, false])\n    const [basicWeakness, changeBasicWeakness] = useState(['Random basic weakness', '01000'])\n    const [deckTitle, changeDeckTitle] = useState('')\n\n    const { investigator, parallel, deckSize, cardData, collectionSets, updateCardOverlay } = props\n    \n    function handleInput(event) {\n        changeDeckTitle(event.target.value)\n    }\n\n    function handleCheckbox(event) {\n        var index = 0\n\n        if (event.target.name === 'CB3') index = 3\n        else if (event.target.name === 'CB2') index = 2\n        else if (event.target.name === 'CB1') index = 1\n\n        var newSignatures = { ...useSignatures }\n        newSignatures[index] = event.target.checked\n\n        changeUseSignatures(newSignatures)\n    }\n\n    function onEnterCard(event) {\n        // basic weakness\n        if (event.target.id === '01000') return\n\n        const cardArray = cardData.filter(item => item.code === event.target.id)\n\n        if (cardArray && cardArray.length > 0 && cardArray[0].imagesrc !== undefined) {\n            const imagesrc = \"http://www.arkhamdb.com\" + cardArray[0].imagesrc\n\n            updateCardOverlay(imagesrc, event.clientX)\n        }\n    }\n\n    function onLeaveCard(event) {\n        updateCardOverlay(null, 0)\n    }\n\n    function handleWeaknessClick() {\n        var weaknessCount = 0\n\n        for (let i = 0; i < weaknessCards.length; i++) {\n            weaknessCount += weaknessCards[i].quantity\n        }\n\n        var weaknessRoll = Math.floor(Math.random()*weaknessCount)\n\n        for (let i = 0; i < weaknessCards.length; i++) {\n            if (weaknessRoll <= 0) {\n                changeBasicWeakness([weaknessCards[i].name, weaknessCards[i].code])\n                break\n            }\n            \n            weaknessRoll -= weaknessCards[i].quantity\n        }\n    }\n\n    function handleExportClick(fileType) {\n        var specialCards = []\n        let burdenOfDestinyAdded =  false\n\n//        for (let i = 0; i < signatureCards.length; i++) {\n        for (let [signatureIndex, signatureArray] of signatureCards.entries()) {\n            if (useSignatures[signatureIndex]) {\n                for (let j = 0; j < signatureArray.length; j++) {\n                    const cardID = Object.keys(cardData)\n                    .filter(key => {\n                        return cardData[key].code === signatureArray[j]\n                    })[0]\n                \n                    const card = cardData[cardID]\n                    let sigQuantity = card.quantity\n\n                    if (card.name === 'Occult Evidence') {\n                        if (deckSize === '50') sigQuantity = 3\n                        else if (deckSize === '40') sigQuantity = 2\n                        else sigQuantity = 1\n                    }\n\n                    if (card.name === 'Burden of Destiny') {\n                        sigQuantity = 0\n\n                        if (!burdenOfDestinyAdded) {\n\n                            for (let i = 0; i < 4; i++)\n                                if (useSignatures[i]) sigQuantity++\n\n                            burdenOfDestinyAdded = true\n                        }\n                    }\n\n                    if (sigQuantity > 0) specialCards.push({name: card.name, key: card.code, type_code: card.type_code, count: sigQuantity })\n                }\n            }\n        }\n\n        const weaknessID = Object.keys(cardData)\n        .filter(key => {\n            return cardData[key].code === basicWeakness[1]\n        })[0]\n    \n        const weaknessCard = cardData[weaknessID]\n        if (!weaknessCard.octgn_id) weaknessCard.octgn_id = ''\n\n        specialCards.push({name: weaknessCard.name, key: weaknessCard.code, type_code: weaknessCard.type_code, count: 1 })\n\n        ExportDeck({\n            fileType: fileType,\n            deckTitle: deckTitle,\n            investigator: props.investigator,\n            cardList: props.cardList,\n            specialCards: specialCards,\n            cardData: props.cardData\n        })\n    }\n\n    var signatureCards = [ [], [], [], [] ]\n    var useCheckbox = false\n\n    if (investigator === 'Lily Chen') {\n        signatureCards[0].push('08011a')\n        signatureCards[0].push('08015')\n        signatureCards[1].push('08012a')\n        signatureCards[1].push('08015')\n        signatureCards[2].push('08013a')\n        signatureCards[2].push('08015')\n        signatureCards[3].push('08014a')\n        signatureCards[3].push('08015')\n\n        useCheckbox = true\n    }\n    else {\n        const investigatorID = Object.keys(cardData)\n        .filter(key => {\n    //        return cardData[key].name === investigator\n            return cardData[key].name === investigator && (parallel ? typeof cardData[key].alternate_of_name !== 'undefined' : true)\n        })[0]\n\n        const investigatorCard = cardData[investigatorID]\n\n        const cardRequirements = investigatorCard.deck_requirements.card\n\n        for (let crkey = 0; crkey < Object.keys(cardRequirements).length; crkey++) {\n            const requirement = cardRequirements[Object.keys(cardRequirements)[crkey]]\n\n            if (Object.keys(requirement).length > 1) useCheckbox = true\n\n            for (let rkey = 0; rkey < Object.keys(requirement).length; rkey++) {\n                signatureCards[rkey].push(requirement[Object.keys(requirement)[rkey]])\n            }\n        }\n    \n        signatureCards.sort( (a1, a2) => {\n            if (a1.length > 0) {\n                if (a2.length > 0) {\n                    return parseInt(a1[0]) - parseInt(a2[0])\n                }\n                else return -1\n            }\n\n            return 1\n        })\n    }\n\n    // make sure it's selected in the collection too\n    var weaknessCards = cardData.filter( card => {\n        return card.subtype_code === 'basicweakness' && card.code !== '01000' && collectionSets[card.pack_code]\n    })\n\n    var signatureOptions = <div>\n        {\n            signatureCards.map( (item, index) => {\n                if (item.length > 0) {\n                    const cardList = item.map( code => {\n                        var signatureID = Object.keys(cardData)\n                        .filter(key => {\n                            return cardData[key].code === code\n                        })[0]\n\n                        let sigQuantity = cardData[signatureID].quantity\n\n                        if (cardData[signatureID].name === 'Occult Evidence') {\n                            if (deckSize === '50') sigQuantity = 3\n                            else if (deckSize === '40') sigQuantity = 2\n                            else sigQuantity = 1\n                        }\n\n                        if (cardData[signatureID].name === 'Burden of Destiny') {\n                            sigQuantity = 1\n                        }\n\n                        const quantityText = (sigQuantity > 1) ? ' x' + sigQuantity : ''\n\n                        let cardName = cardData[signatureID].name\n                        if (investigator === 'Lily Chen') {\n                            if (cardData[signatureID].subname) cardName = cardName + ': ' + cardData[signatureID].subname\n                        }\n                        else if (useCheckbox) {\n                            cardName = cardName + ' (' + cardData[signatureID].pack_name + ')'\n                        }\n                        \n//                        return (useCheckbox ?\n//                            <p id={cardData[signatureID].code} key={cardData[siif gnatureID].code} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard}>{cardData[signatureID].name + ' (' + cardData[signatureID].pack_name + ')' + quantityText}</p> :\n//                            <p id={cardData[signatureID].code} key={cardData[signatureID].code} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard}>{cardData[signatureID].name + quantityText}</p>)\n                    return (\n                        <p id={cardData[signatureID].code} key={cardData[signatureID].code} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard}>{cardName + quantityText}</p>)\n                    })\n\n                    return (useCheckbox ?\n                        <div key={index} className=\"signatureDiv\">\n                            <span className=\"signatureLeft\">\n                                <input type=\"checkbox\" checked={useSignatures[index]} name={\"CB\" + index} className=\"signature-checkbox\" onChange={handleCheckbox}/>\n                            </span>\n                            <span className=\"signatureRight\">\n                                {cardList}\n                            </span>\n                        </div>\n                        :\n                        <div key={index} className=\"signatureDiv\">\n                            <span className=\"signatureCenter\">\n                                {cardList}\n                            </span>\n                        </div>\n                    )\n                }\n                else return null\n            })\n        }\n        </div>\n\n    return (\n        <div className=\"settingsDiv\">\n            <h3 style={{marginBottom: '-5px'}}>Export options</h3>\n            <div className=\"exportsettings\">\n                <label>Deck title:</label>\n                <span className=\"export-option\">\n                    <input className=\"deckName\" name=\"deckName\" type='text' value={deckTitle} onChange={handleInput}></input>\n                </span>\n            </div>\n            <div>\n                <h4 style={{marginBottom: '5px'}}>Signature cards</h4>\n                {signatureOptions}\n            </div>\n            <div>\n                <h4 style={{marginBottom: '5px'}}>Weaknesses</h4>\n                <p id={basicWeakness[1]} onPointerEnter={onEnterCard} onPointerLeave={onLeaveCard}>{basicWeakness[0]}</p>\n                <button className='button-rect button-green button-drawweakness' onClick={ () => handleWeaknessClick()}>Draw weakness</button>\n                <div className=\"description\">\n                    Export as an OCTGN deck file.  To import a downloaded .o8d deck into ArkhamDB, go to My Decks and click Import Deck, then File.\n                </div>\n            </div>\n            <div>\n                <button className='button-rect button-green button-export' onClick={ () => handleExportClick('OCTGN')}>Export as .o8d</button>\n            </div>\n        </div>\n    )\n}\n//<button className='button-rect button-green button-export' onClick={ () => handleExportClick('text')}>Export as .txt</button>\n\nexport default SettingsExport","import React from 'react'\n\nimport CardList from './CardList'\nimport DraftArea from './DraftArea'\nimport ExportSettings from '../options/ExportSettings'\nimport ColorForClass from '../ClassColors'\n\nfunction Draft(props) {\n    const { investigator, parallel, deckSize, draftTab, draftXP, draftCount, draftProgress, draftType, phase, cardList, draftPool, cardData, draftCard, updateCardList, updateDraftPool, resetApp, collectionSets, updateCardOverlay } = props\n\n    let investigatorCardImage = null\n    let investigatorCardImageBack = null\n        \n    if (cardData) {\n        const investigatorID = Object.keys(cardData)\n        .filter(key => {\n//            return  cardData[key].name === investigator\n            return cardData[key].name === investigator && (parallel ? typeof cardData[key].alternate_of_name !== 'undefined' : true)\n        })[0]\n\n        const factionCode = cardData[investigatorID].faction_code;\n        const classColor = ColorForClass(factionCode)\n\n        if (cardData[investigatorID].imagesrc === undefined) {\n            investigatorCardImage = <div className=\"investigator-div-loading\" style={{backgroundColor: classColor}}><h3>{investigator + ' (Back)'}</h3><p>Image not available</p><p><a href={cardData[investigatorID].url} target=\"_blank\" rel=\"noreferrer noopener\">View on ArkhamDB</a></p></div>\n        }\n        else {\n            const imagesrc = \"https://www.arkhamdb.com\" + cardData[investigatorID].imagesrc\n            investigatorCardImage = <div className=\"investigator-div\" style={{backgroundColor: classColor}}><img className=\"investigator-image\" src={imagesrc} alt={props.investigator} /></div>\n        }\n\n        if (cardData[investigatorID].backimagesrc === undefined) {\n            investigatorCardImageBack = <div className=\"investigator-div-loading\" style={{backgroundColor: classColor}}><h3>{investigator + ' (Back)'}</h3><p>Image not available</p><p><a href={cardData[investigatorID].url} target=\"_blank\" rel=\"noreferrer noopener\">View on ArkhamDB</a></p></div>\n        }\n        else {\n            const backimagesrc = \"https://www.arkhamdb.com\" + cardData[investigatorID].backimagesrc\n            investigatorCardImageBack = <div className=\"investigator-div\" style={{backgroundColor: classColor}}><img className=\"investigator-image\" src={backimagesrc} alt={props.investigator + ' (back)'} /></div>\n        }\n//        investigatorCardImageBack = <img className=\"investigator-image\" src={backimagesrc} alt={props.investigator + ' (back)'} />\n    }\n\n    let draftContent = null\n    let exportContent = null\n\n    if (draftPool.length > 0) {\n        draftContent = <DraftArea \n            draftCount={draftCount}\n            draftCard={draftCard}\n            phase={phase}\n            draftType={draftType}\n            draftPool={draftPool}\n            cardList={cardList}\n            updateCardList={updateCardList}\n            updateDraftPool={updateDraftPool}\n        />\n    }\n    else if (draftTab === 'Build Deck') {\n        exportContent = <ExportSettings\n            investigator={investigator}\n            deckSize={deckSize}\n            cardList={cardList}\n            cardData={cardData}\n            collectionSets={collectionSets}\n            updateCardOverlay={updateCardOverlay}\n        />\n    }\n\n    const progress = draftTab === 'Build Deck' ? \n        <p><b>Cards: </b>{draftProgress}/{deckSize}</p> : \n        <p><b>XP: </b>{draftProgress}/{draftXP}</p>\n\n    return (\n        <div>\n            <div className=\"settingsDiv\">\n                <h2>{investigator}</h2>\n                <div className=\"investigator-grid\">\n                    {investigatorCardImage}\n                    {investigatorCardImageBack}\n                </div>\n                {progress}\n            </div>\n            {draftContent}\n            <CardList \n                cardList={cardList}\n                cardData={cardData}\n                updateCardOverlay={updateCardOverlay}\n            />\n            {exportContent}\n            <button className='button-rect button-green' onClick={resetApp}>Restart</button>\n        </div>\n    )\n}\n\nexport default Draft","// card data:\n// pack_code\n// pack_name\n// type_code\n        // treachery\n        // investigator\n        // asset\n        // event\n        // skill\n        // enemy\n        // story\n        // location\n// type_name\n// subtype_code\n// faction_code\n// faction_name\n// position\n// exceptional\n// myriad\n// code\n// name\n// real_name\n// subname\n// text\n// real_text\n// quantity\n// skill_willpower\n// skill_intellect\n// skill_combat\n// skill_agility\n// clues_fixed\n// health\n// health_per_investigator\n// sanity\n// deck_limit\n// traits\n// real_traits\n// deck_requirements\n// deck_options\n// flavor\n// illustrator\n// is_unique\n// exile\n// hidden\n// permanent\n// double_sided\n// back_text\n// back_flavor\n// octgn_id\n// url\n// imagesrc\n// backimagesrc\n\n// slot\n    // Hand\n    // Accessory\n    // Ally\n    // Hand x2\n    // Arcane\n    // Body\n    // Tarot\n// restrictions\n// cost\n// xp\n\nfunction FilterCards(props) {\n    const { investigator, parallel, secondaryClass, cardData, cardList, deckSize, upgrade, draftUseLimited, draftXP, collectionSets } = props\n\n    const investigatorID = Object.keys(cardData)\n    .filter(key => {\n//        return cardData[key].name === investigator\n        return cardData[key].name === investigator && (parallel ? typeof cardData[key].alternate_of_name !== 'undefined' : true)\n    })[0]\n\n    const deckOptions = cardData[investigatorID].deck_options\n\n    const filteredDeck = filterDeckForLimited(cardList, deckOptions)\n\n    // requirement trait: exclude if it doesn't pass a different option AND the requirement\n    let requirementOptions = null\n\n    if (investigator === 'Joe Diamond') {\n        const joeRequiredCards = cardList.filter(item => {\n            const cardTraits = item.traits\n\n            if (cardTraits && cardTraits.search(new RegExp('insight', \"i\")) >= 0)\n                return true\n\n            return false\n        })\n\n        if (deckSize - countDeck(cardList) + countDeck(joeRequiredCards) <= 10) {\n            requirementOptions = [{\n                requirement: 10,\n                trait: 'insight'\n            }]\n        }\n    }\n    else if (investigator === 'Lola Hayes') {\n        const lolaRequiredCards = ['guardian', 'seeker', 'rogue', 'mystic', 'survivor'].map(faction => {\n            return {\n                faction: faction,\n                count: countDeck(cardList.filter(item => {\n                    if (item.faction_code === faction) {\n                        return true\n                    }\n                    if (item.faction2_code === faction) {\n                        return true\n                    }\n\n                    return false\n                }))\n            }\n        }).sort((e1, e2) => e2.count - e1.count)\n\n        let count = 0\n        for (let i = 0; i < 3; i++) {\n            count += Math.min(7, lolaRequiredCards[i].count)\n        }\n\n        if (deckSize - countDeck(cardList) + count <= 21) {\n            const minCount = lolaRequiredCards[2].count\n\n            let factionRequirement = []\n            for (let i = 0; i < 5; i++) {\n                if (lolaRequiredCards[i].count < 7 && lolaRequiredCards[i].count >= minCount) factionRequirement.push(lolaRequiredCards[i].faction)\n            }\n\n            requirementOptions = [{\n                requirement: 7,\n                faction: factionRequirement\n            }]\n        }\n    }\n\n    let minLevel = 0\n    let maxLevel = 0\n\n    if (upgrade) {\n        minLevel = 1\n        maxLevel = draftXP\n    }\n//console.log('Filter : ' + props.draftXP)\n    const filteredData = cardData.filter(card => {\n        if (card.type_code === 'investigator') return false\n        if (card.type_code === 'story') return false\n        if (card.type_code === 'location') return false\n        if (card.type_code === 'enemy') return false\n        if (card.type_code === 'treachery') return false\n        if (card.bonded_to) return false\n        // currently means weakness\n\n        if (card.subtype_code) return false\n\n        let xp = 0\n        if (card.xp) xp = card.xp\n        if (card.tabooxp !== undefined) xp += card.tabooxp\n        if (card.exceptional || (card.tabooexceptional !== undefined && card.tabooexceptional)) xp *= 2\n\n        if (xp < minLevel) return false\n        if (xp > maxLevel) return false\n\n//        arcane research!!!! oh no!!\n//        green man medallion as well\n\n        if (card.restrictions && card.restrictions.investigator) return false\n        if (!collectionSets[card.pack_code]) return false\n\n        if (card.duplicate_of_code) {\n            const duplicateID = Object.keys(cardData)\n            .filter(key => {\n                return cardData[key].code === card.duplicate_of_code\n            })[0]\n\n            const duplicateCard = cardData[duplicateID]\n\n            // if the set of the card that this card is duplicating is included, don't include this\n            if (collectionSets[duplicateCard.pack_code]) return false\n        }\n\n        // restricted list, normal limit test only happens on cards already in deck\n        if (card.taboodecklimit !== undefined && card.taboodecklimit === 0) return false\n\n        // this isn't right for upgrades yet\n        let legal = false\n        let rejected = false\n\n        for (let i = 0; i < deckOptions.length; i++) {\n//console.log(deckOptions[i])\n            if (deckOptions[i].requirement) continue\n\n            let optionLegal = false\n\n            if (testDeckOption(card, deckOptions[i])) {\n                optionLegal = true\n\n                if (deckOptions[i].not) {\n//console.log('Reject : ' + card.name)\n//                    optionLegal = false\n                    rejected = true\n                }\n                else if (deckOptions[i].limit) {\n//console.log(deckOptions[i].limit)\n                    if (!draftUseLimited) optionLegal = false\n                    else {\n                        const inDeck = countDeckLimited(filteredDeck, deckOptions[i])\n//console.log('In deck : ' + inDeck)\n                        if (inDeck >= deckOptions[i].limit) {\n//console.log('Over limit : ' + card.name)\n                            optionLegal = false\n                        }\n                    }\n                }\n            }\n\n            if (optionLegal) legal = true\n        }\n//console.log(legal)\n//console.log(rejected)\n        if (!legal || rejected) return false\n\n        // Discipline doesn't have an entry to differentiate it as a sig card\n        if (card.name === 'Discipline') return false\n\n        // check to see if there's already max in the deck\n        let limited = false\n        \n        cardList.forEach(item => {\n            if (item.name === card.name && !(card.subtitle !== undefined && item.subtitle !== card.subtitle)) {\n                var deckLimit = card.deck_limit\n                if (card.taboodecklimit !== undefined) {\n                    deckLimit = card.taboodecklimit\n//                    console.log('TabooDeckLimit : ' + card.taboodecklimit)\n                }\n\n                var quantity = card.quantity\n\n                if (card.pack_code === 'core' && collectionSets['core2'] === 0 && quantity < deckLimit) deckLimit = quantity\n\n                if (item.count >= deckLimit) {\n//console.log(card.name + ' : Over the limit')\n                    limited = true\n                }\n            }\n        })\n\n        if (limited) return false\n\n        // check to see if it passes all required tests\n        if (requirementOptions) {\n            for (let i = 0; i < requirementOptions.length; i++) {\n                if (!testDeckOption(card, requirementOptions[i])) {\n                    return false\n                }\n            }\n        }\n\n        return true\n    })\n\n    function filterDeckForLimited(list, options) {\n        if (!list) return []\n\n        let filteredDeck = []\n\n        list.forEach(item => {\n            let legal = false\n\n            for (let i = 0; i < options.length; i++) {\n                if (options[i].limit) continue;\n\n                const optionLegal = testDeckOption(item, options[i])\n\n                if (optionLegal) legal = true\n            }\n\n            if (!legal) filteredDeck.push(item)\n        })\n\n        return filteredDeck\n    }\n    \n    function countDeck(list) {\n        let count = 0\n\n        if (list) {\n            list.forEach(item => {\n                if (!item.permanent) count += item.count\n            })\n        }\n\n        return count\n    }\n    \n    function countDeckLimited(list, option) {\n        let count = 0\n\n        if (list) {\n            list.forEach(item => {\n                if (testDeckOption(item, option)) {\n                    count += item.count\n                }\n            })\n        }\n\n        return count\n    }\n\n    function testDeckOption(card, option) {\n//console.log(option)\n        let level = true\n        let faction = true\n        let secondaryFaction = true\n        let trait = true\n        let uses = true\n        let type = true\n        let text = true\n\n        if (option.name === 'Secondary Class') {\n            secondaryFaction = false\n\n            if (card.faction_code === secondaryClass) {\n                secondaryFaction = true\n            }\n            if (card.faction2_code === secondaryClass) {\n                secondaryFaction = true\n            }\n        }\n\n        if (option.faction) {\n            faction = false\n\n            for (let f = 0; f < option.faction.length; f++) {\n                if (card.faction_code === option.faction[f]) {\n                    faction = true\n                }\n                if (card.faction2_code === option.faction[f]) {\n                    faction = true\n                }\n            }\n        } \n\n        if (option.level) {\n            level = false\n\n            const min = option.level.min\n            const max = option.level.max\n\n            const ixp = card.xp === undefined ? 0 : card.xp\n\n            if (ixp >= min && ixp <= max) level = true;\n        }\n\n        if (option.trait) {\n            trait = false\n\n            const cardTraits = card.traits\n\n            for (let i = 0; i < option.trait.length; i++) {\n                if (cardTraits && cardTraits.search(new RegExp(option.trait[i], \"i\")) >= 0) {\n                    trait = true\n                }\n            }\n        }\n\n        if (option.uses) {\n            uses = false\n\n            const cardText = card.text\n\n            if (cardText && cardText.search(new RegExp('Uses \\\\([0-9\\\\s]+' + option.uses[0] + '\\\\)', \"i\")) >= 0)\n                uses = true\n        }\n\n        if (option.type) {\n            type = false\n\n            const cardType = card.type_code\n\n            if (cardType && option.type.find(item => item === cardType))\n                type = true\n        }\n           \n        if (option.text) {\n            text = false\n            \n            if (card.text && card.text.search(new RegExp(option.text, \"i\")) >= 0)\n                text = true\n        }\n            \n//console.log(faction + ' ' + level + ' ' + trait + ' ' + uses + ' ' + type + ' ' + secondaryFaction)\n        return faction && level && trait && uses && type && secondaryFaction && text\n    }\n\n//    filteredData.forEach(element => console.log(element.name))\n\n    return filteredData\n}\n\nexport default FilterCards\n\n/* odds research\n            // stat test\n            const setArray = [ 'core'\n                ,'dwl', 'tmm', 'tece', 'bota', 'uau', 'wda', 'litas'\n                ,'ptc', 'eotp', 'tuo', 'apot', 'tpm', 'bsr', 'dca'\n                ,'tfa', 'tof', 'tbb', 'hote', 'tcoa', 'tdoy', 'sha'\n                ,'tcu', 'tsn', 'wos', 'fgg', 'uad', 'icc', 'bbt'\n                ,'tde', 'sfk', 'tsh', 'dsm', 'pnr', 'wgd', 'woc'\n                ,'rtnotz', 'rtdwl', 'rtptc'\n            ]\n\n//            const assets = countCards('asset', setArray)\n//            const events = countCards('event', setArray)\n//            const skills = countCards('skill', setArray)\n\n            const hand = countCards('asset', 'Hand', setArray)\n            const hands2 = countCards('asset', 'Hand x2', setArray)\n            const ally = countCards('asset', 'Ally', setArray)\n            const accessory = countCards('asset', 'Accessory', setArray)\n            const arcane = countCards('asset', 'Arcane', setArray)\n            const body = countCards('asset', 'Body', setArray)\n            const tarot = countCards('asset', 'Tarot', setArray)\n\n//            console.log('Assets: ' + assets)\n//            console.log('Events: ' + events)\n//            console.log('Skills: ' + skills)\n\n            console.log('Hand: ' + hand)\n            console.log('Ally: ' + ally)\n            console.log('Arcane: ' + arcane)\n            console.log('2xHands: ' + hands2)\n            console.log('Accessory: ' + accessory)\n            console.log('Body: ' + body)\n            conso le.log('Tarot: ' + tarot)\n*/\n/* odds research\n    function countCards(cardType, cardSlot, sets) {\n        const filteredData = cardData.filter(card => {\n            // currently means weakness\n            if (card.type_code !== cardType) return false\n            if (card.subtype_code) return false\n            if (card.slot && card.slot !== cardSlot) return false\n            if (!card.slot) return false\n//            if (card.xp && card.xp > 0) return false            \n            if (card.restrictions && card.restrictions.investigator) return false\n    //        console.log(card.slot + ' <=> ' + cardSlot + ' (' + card.name + ')')\n    \n            let foundSet = false\n            for (let i = 0; i < sets.length; i++) {\n                if (card.pack_code === sets[i]) foundSet = true\n            }\n\n            return foundSet\n        })\n\n        return filteredData.length\n    }\n*/\n\n","import React, { useState, useEffect } from 'react'\n\nimport './App.css';\n\nimport InvestigatorSettings from './components/options/InvestigatorSettings'\nimport Settings from './components/options/Settings'\nimport CollectionSettings from './components/options/CollectionSettings'\n\nimport Draft from './components/draft/Draft'\nimport FilterCards from './components/DraftFilters'\n\nfunction useWindowSize() {\n    const [windowSize, setWindowSize] = useState({width: undefined, height: undefined})\n\n    useEffect( () => {\n        function handleResize() {\n            setWindowSize({\n                width: window.innerWidth,\n                height: window.innerHeight\n            })\n        }\n\n        window.addEventListener(\"resize\", handleResize)\n\n        handleResize()\n\n        return () => window.removeEventListnener(\"resize\", handleResize)\n    }, [])\n\n    return windowSize\n}\n\nfunction App(props) {\n    let contents = null\n\n    const [overlayImage, updateOverlayImage] = useState(null)\n    const [overlayPosition, updateOverlayPosition] = useState('Left\"')\n\n    const windowSize = useWindowSize()\n\n    function updateCardOverlay(image, xloc) {\n        updateOverlayImage(image)\n    \n        if (xloc < windowSize['width']/2) updateOverlayPosition('Right')\n        else updateOverlayPosition('Left')\n    }\n    \n    let overlay = null\n\n    if (overlayImage) {\n        overlay = <div className={\"floatingImage\"+overlayPosition}><img src={overlayImage} alt=\"\" /></div>\n    }\n\n    if (props.fetchError) {\n        contents = \n            <div>\n                Fetch error!\n            </div>\n    }\n    else if (!props.cardData || !props.tabooData) {\n        contents =\n            <div style={{marginBottom: \"20px\"}}>\n                Loading...\n            </div>\n    }\n    else if (props.building) {\n        contents = \n            <Draft\n                draftType={props.draftType}\n                draftTab={props.draftTab}\n                investigator={props.investigator} \n                parallel={props.parallel}\n                secondaryClass={props.secondaryClass} \n                deckSize={props.deckSize}\n                draftXP={props.draftXP}\n                draftCount={props.draftCount[props.phase-1]}\n                draftCards={props.draftCards[props.phase-1]}\n                draftProgress={props.draftProgress}\n                phase={props.phase}\n                cardList={props.cardList}\n                cardData={props.cardData}\n                collectionSets={props.collectionSets}\n                draftPool={props.draftPool}\n                draftCard={props.draftCard}\n                updateCardList={props.updateCardList}\n                updateDraftPool={props.updateDraftPool}\n                updateCardOverlay={updateCardOverlay}\n                resetApp={props.resetApp}\n            />\n    }\n    else {\n        // do we have enough cards??\n        var filteredCount = 0\n\n        const filteredCards = FilterCards({\n            investigator: props.investigator,\n            parallel: props.parallel,\n            secondaryClass: props.secondaryClass,\n            deckSize: props.deckSize,\n//            draftCount: draftCount[phase-1],\n            draftUseLimited: [true, true, true],\n            draftXP: props.draftXP,\n            upgrade: (props.draftTab === 'Upgrade'),\n            cardList: props.cardList,\n            cardData: props.cardData,\n            collectionSets: props.collectionSets\n//            draftCard: draftCard\n            })\n\n        filteredCards.forEach( card => {\n            if (!card.deck_limit) return\n            if (!(card.type_code === 'asset' || card.type_code === 'event' || card.type_code === 'skill')) return\n            if (card.subtype_code === 'weakness' || card.subtype_code === 'basicweakness') return\n            if (!props.collectionSets[card.pack_code] || props.collectionSets[card.pack_code] === 0) return\n            if (card.restrictions) {\n                if (card.restrictions['investigator']) return\n            }\n\n            var cardLimit = card.deck_limit\n            var quantity = card.quantity\n\n            if (props.collectionSets[card.pack_code] === 1) {\n                if (card.pack_code === 'core' && props.collectionSets['core2'] === 0 && quantity < cardLimit) cardLimit = quantity\n            }\n\n            filteredCount += cardLimit\n        })\n\n        // there has to be enough extra to allow for a final card choice\n        if (props.draftType === 'chaos') filteredCount -= 2\n        else filteredCount -= 30    // max of 15 draft options * counting 2 each in filteredCount\n\n        contents = \n        <div>\n            <InvestigatorSettings \n                investigator={props.investigator}\n                parallel={props.parallel}\n                secondaryClass={props.secondaryClass}\n                selectedDeckSize={props.selectedDeckSize}\n                selectedTaboo={props.selectedTaboo}\n                deckSize={props.deckSize}\n                cardData={props.cardData}\n                tabooData={props.tabooData}\n                onChangeSetting={props.handleChange}\n                onChangeInvestigator={props.handleChangeInvestigator}\n            />\n            <CollectionSettings \n                expandCollection={props.expandCollection}\n                collectionSets={props.collectionSets}\n                onChangeSetting={props.handleChange}\n            />\n            <Settings\n                draftTab={props.draftTab}\n                draftType={props.draftType}\n                draftWeighting={props.draftWeighting}\n                draftXP={props.draftXP}\n                draftCount={props.draftCount}\n                draftCards={props.draftCards}\n                draftUseLimited={props.draftUseLimited}\n                deckSize={props.deckSize}\n                ready={props.ready}\n                filteredCount={filteredCount}\n                myriadCount={props.myriadCount}\n                onChangeSetting={props.handleChange}\n            />\n        </div>\n    }\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n            ArkhamDraft\n            </header>\n            {contents}\n            {overlay}\n            <div className=\"copyright\" style={{padding: \"5px\", boxSizing: \"border-box\"}}>\n                Arkham Horror: The Card Game and all information presented here, both literal and graphical, is copyrighted by Fantasy Flight Games. This website is not produced, endorsed, supported, or affiliated with Fantasy Flight Games.\n            </div>\n        </div>\n    )\n}\n\nexport default App;\n","function DrawCard(cardData, draftPool) {\n    let legal = false\n    let randomCard = null\n\n    if (cardData.length === 0) return null\n\n    while (!legal) {\n        randomCard = cardData[Math.floor(Math.random() * cardData.length)]\n\n        const randomCode = randomCard.code\n        const existingIndex = (draftPool && draftPool.length > 0) ? draftPool.findIndex(item => item.code === randomCode) : -1\n        \n        if (existingIndex < 0) legal = true\n    }\n\n    return randomCard\n}\n\nexport default DrawCard","import React, { useState, useEffect, useCallback } from 'react';\n\nimport App from './App';\nimport DrawCard from './components/DraftData'\nimport FilterCards from './components/DraftFilters'\n\nfunction fetchData(updateCardData, updateFetchError) {\n//        fetch(\"https://cors-anywhere.herokuapp.com/https://arkhamdb.com/api/public/cards/\")\n    fetch(\"https://arkhamdb.com/api/public/cards/\")\n    .then(res => {\n        return res.json()\n    })\n    .then(res => {\n        updateCardData(res)\n    })\n    .catch(() => updateFetchError(true))\n}\n\nfunction fetchTaboo(updateTabooData, updateFetchError) {\n//        fetch(\"https://cors-anywhere.herokuapp.com/https://arkhamdb.com/api/public/cards/\")\n    fetch(\"https://arkhamdb.com/api/public/taboos/\")\n    .then(res => {\n        return res.json()\n    })\n    .then(res => {\n        res = res.map(item => {\n            item.cards = JSON.parse(item.cards)\n            return item\n        }).sort((item1, item2) => item1.id > item2.id ? 1 : -1)\n\n        updateTabooData(res)\n    })\n    .catch(() => updateFetchError(true))\n}\n\nfunction mergeTabooData(cData, tData) {\n    var tCardData = cData.map(item => {\n        delete item.tabooxp\n        delete item.tabooexceptional\n        delete item.taboodecklimit\n\n        var tabooEntry = null\n        \n        if (tData.length > 0) tabooEntry = tData[0].cards.filter(taboo => taboo.code === item.code)\n\n        if (tabooEntry) {\n            tabooEntry.forEach(taboo => {\n                if (taboo.xp !== undefined) item.tabooxp = taboo.xp\n                if (taboo.exceptional !== undefined && taboo.exceptional) {\n                    item.tabooexceptional = true\n                    item.taboodecklimit = 1\n                }\n                if (taboo.deck_limit !== undefined) {\n                    item.taboodecklimit = taboo.deck_limit\n                }\n            })\n        }\n        \n        return item\n    })\n\n    return tCardData\n}\n\nfunction standardChaosDraft(props) {\n    const { draftTab, draftCards, draftXP, draftCard, cardList, investigator } = props;\n    let newList = []\n\n    newList = newList.concat(cardList)\n\n    let draftProgress = 0;\n\n    let upgrading = (draftTab === 'Upgrade Deck')\n\n    let draftTarget = draftCards\n    if (upgrading) draftTarget = draftXP\n\n    while (draftProgress < draftTarget) {\n        // generates all cards, sets cardList state\n        // need to do it each iteration for all investigators whose filter depends on the cards in the deck\n        props.cardList = newList\n        let filteredData = FilterCards(props)\n\n        const card = DrawCard(filteredData)\n\n        newList = draftCard(card, newList)\n\n        draftProgress = 0;\n\n        if (draftTab === 'Build Deck') {\n            for (let item in newList) {\n                // permanent don't count\n                if (!newList[item].permanent) draftProgress += newList[item].count\n            }\n\n            // special deckbuilding requirements\n            if (investigator === 'Joe Diamond' || investigator === 'Lola Hayes') {\n                props.cardList = newList\n                filteredData = FilterCards(props)\n            }\n        }\n        else {\n            for (let item in newList) {\n                draftProgress += newList[item].xp * newList[item].count\n            }\n\n            props.cardList = newList\n            props.draftXP = draftTarget - draftProgress\n\n            filteredData = FilterCards(props)\n        }\n    }\n\n    return newList\n}\n\nfunction simpleDraft(props) {\n    const { draftCount } = props\n\n    // generates draft cards\n    const filteredData = FilterCards(props)\n\n    let draftPool = []\n\n    for (let i = 0; i < draftCount; i++) {\n        const card = DrawCard(filteredData, draftPool)\n        card.imageLoaded = false\n\n        draftPool.push(card)\n    }\n\n    return draftPool\n}\n\nfunction AppContainer() {\n    const [investigator, changeInvestigator] = useState(\"Agnes Baker\")\n    const [parallel, changeParallel] = useState(false)\n    const [secondaryClass, changeSecondaryClass] = useState(null)\n    const [selectedDeckSize, changeSelectedDeckSize] = useState(null)\n    const [selectedTaboo, changeSelectedTaboo] = useState('None')\n    const [deckSize, changeDeckSize] = useState(\"30\")\n    const [draftTab, changeDraftTab] = useState(\"Build Deck\")\n    const [draftType, changeDraftType] = useState(\"draft\")\n    const [draftWeighting, changeDraftWeighting] = useState('medium')\n    const [draftXP, changeDraftXP] = useState(1)\n    const [draftCount, changeDraftCount] = useState([3, 3, 3])\n    const [draftCards, changeDraftCards] = useState([10, 10, 10])\n    const [draftUseLimited, changeDraftUseLimited] = useState([true, true, true])\n    const [building, changeBuilding] = useState(false)\n    const [newPhase, changeNewPhase] = useState(true)\n//    const [fetching, changeFetching] = useState(false)\n    const [cardData, updateCardData] = useState(null)\n    const [tabooData, updateTabooData] = useState(null)\n//    const [tabooCardData, updateTabooCardData] = useState(null)\n    const [fetchError, updateFetchError] = useState(false)\n    const [cardList, updateCardList] = useState([])\n    const [draftPool, updateDraftPool] = useState([])\n    const [phase, changePhase] = useState(1)\n    const [complete, changeComplete] = useState(false)\n    const [myriadCount, updateMyriadCount] = useState('1')\n\n    const [collectionSets, updateCollectionSets] = useState({ 'core': 1, 'core2': 1\n        ,'dwl': 1, 'tmm': 1, 'tece': 1, 'bota': 1, 'uau': 1, 'wda': 1, 'litas': 1\n        ,'ptc': 1, 'eotp': 1, 'tuo': 1, 'apot': 1, 'tpm': 1, 'bsr': 1, 'dca': 1\n        ,'tfa': 1, 'tof': 1, 'tbb': 1, 'hote': 1, 'tcoa': 1, 'tdoy': 1, 'sha': 1\n        ,'tcu': 1, 'tsn': 1, 'wos': 1, 'fgg': 1, 'uad': 1, 'icc': 1, 'bbt': 1\n        ,'tde': 1, 'sfk': 1, 'tsh': 1, 'dsm': 1, 'pnr': 1, 'wgd': 1, 'woc': 1\n        ,'tic': 1, 'itd': 1, 'def': 1, 'hhg': 1, 'lif': 1, 'lod': 1, 'itm': 1\n        ,'eoep': 1\n        ,'rtnotz': 1, 'rtdwl': 1, 'rtptc': 1, 'rttfa': 1, 'rttcu': 1\n        ,'nat': 1, 'har': 1, 'win': 1, 'jac': 1, 'ste': 1\n        ,'books' : 0 })\n    const [expandCollection, changeExpandCollection] = useState(false)\n\n    // card count for Build, xp for Upgrade\n    let draftProgressBuild = 0\n    let draftProgressUpgrade = 0\n\n    if (cardList) {\n        for (let item in cardList) {\n            // permanent don't count\n            if (!cardList[item].permanent) draftProgressBuild += cardList[item].count\n            draftProgressUpgrade += cardList[item].xp * cardList[item].count;\n        }\n    }\n\n    useEffect(() => fetchData(updateCardData, updateFetchError), [])\n\n    useEffect(() => fetchTaboo(updateTabooData, updateFetchError), [])\n\n    const draftCard = useCallback((card, list) => {\n        let cardXP = 0\n    \n        if (card.xp) {\n            cardXP = card.xp\n        }\n        if (card.tabooxp !== undefined) cardXP += card.tabooxp\n        if (card.exceptional || (card.tabooexceptional !== undefined && card.tabooexceptional)) cardXP *= 2\n\n        let addCount = 1\n\n        // just let upgrade draft 1, they can choose however many they want\n        // Things like Empower Self are problematic...\n        if (draftTab === 'Build Deck') {\n            if (card.myriad) addCount = parseInt(myriadCount)\n            if (addCount > card.deck_limit) addCount = card.deck_limit\n            if (draftProgressBuild + addCount > deckSize) addCount = deckSize - draftProgressBuild;\n        }\n\n        if (list) {\n            const existingIndex = list.length > 0 ? list.findIndex(item => item.key === card.code) : -1\n    \n            if (existingIndex >= 0) {\n                list.map(item => {\n                    if (item.name === card.name) {\n                        item.count = item.count + addCount\n                        if (item.count > card.deck_limit) item.count = card.deck_limit\n    \n                        return item\n                    }\n    \n                    return item\n                })\n            }\n            else {\n                list.push({ name: card.name, subtitle: card.subtitle, key: card.code, type_code: card.type_code, slot: card.slot, faction_code: card.faction_code, faction2_code: card.faction2_code, traits: card.traits, xp: cardXP, permanent: card.permanent, count: addCount, duplicateKey: card.duplicate_of_code })\n            }\n        }\n        else {\n            list = [{ name: card.name, subtitle: card.subtitle, key: card.code, type_code: card.type_code, slot: card.slot, faction_code: card.faction_code, faction2_code: card.faction2_code, traits: card.traits, xp: cardXP, permanent: card.permanent, count: addCount, duplicateKey: card.duplicate_of_code }]\n        }\n    \n        return list\n    }, [myriadCount, draftProgressBuild, deckSize, draftTab])\n\n    useEffect(() => {\n        if (building && !complete) {\n            const draftProgress = (draftTab === 'Build Deck') ? draftProgressBuild : draftProgressUpgrade\n            let draftTarget = 0\n\n            if (draftTab === 'Build Deck') {\n                if (draftType === 'phaseDraft') {\n                    if (phase > 3) draftTarget = deckSize\n                    else for (let i = 0; i < phase; i++) draftTarget += parseInt(draftCards[i], 10)\n                    \n                    if (draftTarget > deckSize) draftTarget = deckSize\n                }\n                else {\n                    draftTarget = deckSize\n                }\n            }\n            else\n            {\n                draftTarget = draftXP\n            }\n\n            if (newPhase) {\n                if (draftType === 'chaos') {\n                    // first (and only) time through\n                    const list = standardChaosDraft({\n                        draftTab: draftTab,\n                        investigator: investigator,\n                        parallel: parallel,\n                        secondaryClass: secondaryClass,\n                        deckSize: deckSize,\n                        draftCards: draftTarget,\n                        draftXP: draftTarget,\n                        upgrade: (draftTab === 'Upgrade'),\n                        cardList: cardList,\n                        collectionSets: collectionSets,\n                        cardData: cardData,\n                        draftCard: draftCard\n                    })\n\n                    updateCardList(list)\n                    changeNewPhase(false)\n                    changeComplete(true)\n                }\n                else if (draftProgress < draftTarget) {\n                    if (draftCount[phase-1] === '1') {\n                        const list = standardChaosDraft({\n                            draftTab: draftTab,\n                            investigator: investigator,\n                            parallel: parallel,\n                            secondaryClass: secondaryClass,\n                            deckSize: deckSize,\n                            draftCards: draftTarget,\n                            draftXP: draftTarget,\n                            upgrade: (draftTab === 'Upgrade'),\n                            cardList: cardList,\n                            cardData: cardData,\n                            collectionSets: collectionSets,\n                            draftCard: draftCard\n                        })    \n     \n                        updateCardList(list)\n                        changePhase(phase + 1)\n                    }\n                    else {\n                        const pool = simpleDraft({\n                            investigator: investigator,\n                            parallel: parallel,\n                            secondaryClass: secondaryClass,\n                            deckSize: deckSize,\n                            draftCount: draftCount[phase-1],\n                            draftUseLimited: draftUseLimited[phase-1],\n                            draftXP: draftXP - draftProgress,\n                            upgrade: (draftTab === 'Upgrade'),\n                            cardList: cardList,\n                            cardData: cardData,\n                            collectionSets: collectionSets\n                            })\n \n                        updateDraftPool(pool)    \n                        changeNewPhase(false)\n                    }\n                }\n            }\n            else {\n                if (draftPool.length < 1) {\n                    if (draftType === 'draft') {\n                        if (draftProgress < draftTarget) {\n                            const pool = simpleDraft({\n                                investigator: investigator,\n                                parallel: parallel,\n                                secondaryClass: secondaryClass,\n                                deckSize: deckSize,\n                                draftCount: draftCount[phase-1],\n                                draftUseLimited: draftUseLimited[phase-1],\n                                draftXP: draftXP - draftProgress,\n                                upgrade: (draftTab === 'Upgrade'),\n                                cardList: cardList,\n                                cardData: cardData,\n                                collectionSets: collectionSets\n                            })\n\n                            updateDraftPool(pool)\n                        }\n                        else {\n                            changeComplete(true)\n                        }\n                    }\n                    else {\n                        if (draftProgress < draftTarget) {\n                            const pool = simpleDraft({\n                                investigator: investigator,\n                                parallel: parallel,\n                                secondaryClass: secondaryClass,\n                                deckSize: deckSize,\n                                draftCount: draftCount[phase-1],\n                                draftUseLimited: draftUseLimited[phase-1],\n                                draftXP: draftXP - draftProgress,\n                                upgrade: (draftTab === 'Upgrade'),\n                                cardList: cardList,\n                                cardData: cardData,\n                                collectionSets: collectionSets\n                            })\n   \n                            updateDraftPool(pool)\n                        }\n                        else {\n                            if (phase >= 3) {\n                                if (draftProgress < deckSize) {\n                                    const list = standardChaosDraft({\n                                        draftTab: draftTab,\n                                        investigator: investigator,\n                                        parallel: parallel,\n                                        secondaryClass: secondaryClass,\n                                        deckSize: deckSize,\n                                        draftCards: deckSize - draftProgress,\n                                        draftXP: draftXP - draftProgress,\n                                        upgrade: (draftTab === 'Upgrade'),\n                                        cardList: cardList,\n                                        cardData: cardData,\n                                        collectionSets: collectionSets,\n                                        draftCard: draftCard\n                                    })    \n               \n                                    updateCardList(list)\n                                }\n                                \n                                changeComplete(true)\n                            }\n                            else {\n                                changePhase(phase + 1)\n                                changeNewPhase(true)\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }, [building, complete, newPhase, draftType, draftProgressBuild, draftProgressUpgrade, deckSize, investigator, parallel, cardList, cardData, tabooData, collectionSets, draftCount, draftUseLimited, phase, draftCards, draftPool, draftTab, draftXP, secondaryClass, draftCard])\n    \n    function handleInvestigatorChange(value, parallel) {\n        changeParallel(parallel)\n        changeInvestigator(value)\n\n        if (cardData && !selectedDeckSize) {\n            const investigatorID = Object.keys(cardData)\n            .filter(key => {\n//                    return  cardData[key].name === value\n                return cardData[key].name === value && (parallel ? typeof cardData[key].alternate_of_name !== 'undefined' : true)\n            })[0]\n\n            changeDeckSize(cardData[investigatorID].deck_requirements.size)\n\n            const classOptions = cardData[investigatorID].deck_options.filter(item => item.name === 'Secondary Class')\n\n            if (classOptions.length > 0) {\n                changeSecondaryClass(classOptions[0].faction_select[0])\n            }\n        }\n    }\n\n    function handleChange(name, value) {\n        if (name === 'secondaryClass') changeSecondaryClass(value)\n        else if (name === 'selectedDeckSize') {\n            changeSelectedDeckSize(value)\n            changeDeckSize(value)\n        }\n        else if (name === 'draftTab') changeDraftTab(value)\n        else if (name === 'draftType') changeDraftType(value)\n        else if (name === 'draftWeighting') changeDraftWeighting(value)\n        else if (name === 'draftXP') changeDraftXP(value)\n        else if (name === 'draftCount1') doChangeDraftCount(1, value)\n        else if (name === 'draftCount2') doChangeDraftCount(2, value)\n        else if (name === 'draftCount3') doChangeDraftCount(3, value)\n        else if (name === 'draftCards1') doChangeDraftCards(1, value)\n        else if (name === 'draftCards2') doChangeDraftCards(2, value)\n        else if (name === 'draftCards3') doChangeDraftCards(3, value)\n        else if (name === 'draftUseLimited1') doChangeDraftUseLimited(1, value)\n        else if (name === 'draftUseLimited2') doChangeDraftUseLimited(2, value)\n        else if (name === 'draftUseLimited3') doChangeDraftUseLimited(3, value)\n        else if (name === 'taboo') changeSelectedTaboo(value)\n        else if (name === 'myriadCount') updateMyriadCount(value)\n        else if (name === 'expandCollection') changeExpandCollection(value)\n        else if (name === 'collectionSetOn') {\n            var addCollectionSets = { ...collectionSets }\n            \n            value.forEach( set => {\n                addCollectionSets[set] = 1\n            })\n\n            updateCollectionSets(addCollectionSets)\n        }\n        else if (name === 'collectionSetOff') {\n            var removeCollectionSets = { ...collectionSets }\n\n            value.forEach( set => {\n                removeCollectionSets[set] = 0\n            })\n\n            updateCollectionSets(removeCollectionSets)\n        }\n        else if (name === 'building') {\n            if (value === true && cardData && tabooData) {\n                const investigatorID = Object.keys(cardData)\n                .filter(key => {\n//                    return cardData[key].name === investigator\n                    return cardData[key].name === investigator && (parallel ? typeof cardData[key].alternate_of_name !== 'undefined' : true)\n                })[0]\n\n                if (!selectedDeckSize) {\n                    changeDeckSize(cardData[investigatorID].deck_requirements.size)    \n                }\n\n                if (!secondaryClass) {\n                    const classOptions = cardData[investigatorID].deck_options.filter(item => item.name === 'Secondary Class')\n\n                    if (classOptions.length > 0) {\n                        changeSecondaryClass(classOptions[0].faction_select[0])\n                    }\n                }\n\n                let tData = tabooData.filter(item => item.code === selectedTaboo ? true : false)\n\n                updateCardData(mergeTabooData(cardData, tData))\n            }\n            changeBuilding(value)\n        }\n    }\n\n    function doChangeDraftCount(index, value) {\n        let newCount = []\n        newCount = newCount.concat(draftCount)\n        newCount[index-1] = value\n        changeDraftCount(newCount)\n    }\n\n    function doChangeDraftCards(index, value) {\n        let newCards = []\n        newCards = newCards.concat(draftCards)\n        newCards[index-1] = value\n        changeDraftCards(newCards)\n    }\n\n    function doChangeDraftUseLimited(index, value) {\n        let newUseLimited = []\n        newUseLimited = newUseLimited.concat(draftUseLimited)\n        newUseLimited[index-1] = !draftUseLimited[index-1]\n        changeDraftUseLimited(newUseLimited)\n    }\n    \n    function resetApp() {\n        changeBuilding(false)\n//        changeInitialized(false)\n        changeNewPhase(true)\n        updateCardList([])\n        updateDraftPool([])\n        changePhase(1)\n        changeComplete(false)\n    }\n\n    const ready = cardData && tabooData && !fetchError\n\n    return (\n        <App\n        investigator={investigator}\n        parallel={parallel}\n        secondaryClass={secondaryClass}\n        selectedDeckSize={selectedDeckSize}\n        selectedTaboo={selectedTaboo}\n        deckSize={deckSize}\n        myriadCount={myriadCount}\n        draftTab={draftTab}\n        draftType={draftType}\n        draftWeighting={draftWeighting}\n        draftXP={draftXP}\n        draftCount={draftCount}\n        draftCards={draftCards}\n        draftUseLimited={draftUseLimited}\n        draftProgress={draftTab === 'Build Deck' ? draftProgressBuild : draftProgressUpgrade}\n        ready={ready}\n        building={building}\n        fetchError={fetchError}\n        phase={phase}\n        cardList={cardList}\n        collectionSets={collectionSets}\n        draftPool={draftPool}\n        cardData={cardData}\n        tabooData={tabooData}\n        handleChange={handleChange}\n        handleChangeInvestigator={handleInvestigatorChange}\n        draftCard={draftCard}\n        updateCardList={updateCardList}\n        updateDraftPool={updateDraftPool}\n        resetApp={resetApp}\n        expandCollection={expandCollection}\n        />\n    )\n}\n\nexport default AppContainer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppContainer from './AppContainer';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppContainer />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}