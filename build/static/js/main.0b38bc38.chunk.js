(this.webpackJsonparkhamdraftweb=this.webpackJsonparkhamdraftweb||[]).push([[0],[,,,,function(e,a,t){e.exports=t(11)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(3),l=t.n(o),i=(t(9),t(1));t(10);var c=function(e){var a=e.investigator,t=e.secondaryClass,n=e.selectedDeckSize,o=e.deckSize,l=e.cardData;function i(a){e.onChangeSetting(a.target.name,a.target.value)}var c=null,s=null,d=t,u=n||o;if(l)for(var f=Object.keys(l).filter((function(e){return l[e].name===a}))[0],m=l[f].deck_options,p=0;p<m.length;p++){if("Secondary Class"===m[p].name)c=m[p].faction_select.map((function(e,a){return r.a.createElement("option",{value:e,key:a},e[0].toUpperCase()+e.slice(1))}));else if("Deck Size"===m[p].name){s=m[p].deck_size_select.map((function(e,a){return r.a.createElement("option",{value:e,key:a},e)}))}}var g='"Skids" ';g+="O'Toole";var v=r.a.createElement("option",{value:g},g),h=c?r.a.createElement("div",null,r.a.createElement("label",{className:"secondaryClass",value:d},"Secondary class:"),r.a.createElement("select",{className:"secondaryClass",name:"secondaryClass",value:d,onChange:i},c)):null,E=s?r.a.createElement("div",null,r.a.createElement("label",{className:"deckSize",value:u},"Deck size:"),r.a.createElement("select",{className:"deckSize",name:"selectedDeckSize",value:u,onChange:i},s)):null;return r.a.createElement("div",{className:"settings"},r.a.createElement("h3",null,"Investigator Options"),r.a.createElement("label",null,"Investigator:"),r.a.createElement("select",{name:"investigator",value:a,onChange:i},r.a.createElement("option",{value:"Roland Banks"},"Roland Banks"),r.a.createElement("option",{value:"Daisy Walker"},"Daisy Walker"),v,r.a.createElement("option",{value:"Agnes Baker"},"Agnes Baker"),r.a.createElement("option",{value:"Wendy Adams"},"Wendy Adams"),r.a.createElement("option",{value:"Zoey Samaras"},"Zoey Samaras"),r.a.createElement("option",{value:"Rex Murphy"},"Rex Murphy"),r.a.createElement("option",{value:"Jenny Barnes"},"Jenny Barnes"),r.a.createElement("option",{value:"Jim Culver"},"Jim Culver"),r.a.createElement("option",{value:'"Ashcan" Pete'},'"Ashcan" Pete'),r.a.createElement("option",{value:"Mark Harrigan"},"Mark Harrigan"),r.a.createElement("option",{value:"Minh Thi Phan"},"Minh Thi Phan"),r.a.createElement("option",{value:"Sefina Rousseau"},"Sefina Rousseau"),r.a.createElement("option",{value:"Akachi Onyele"},"Akachi Onyele"),r.a.createElement("option",{value:"William Yorick"},"William Yorick"),r.a.createElement("option",{value:"Lola Hayes"},"Lola Hayes"),r.a.createElement("option",{value:"Leo Anderson"},"Leo Anderson"),r.a.createElement("option",{value:"Ursula Downs"},"Ursula Downs"),r.a.createElement("option",{value:"Finn Edwards"},"Finn Edwards"),r.a.createElement("option",{value:"Father Mateo"},"Father Mateo"),r.a.createElement("option",{value:"Calvin Wright"},"Calvin Wright"),r.a.createElement("option",{value:"Carolyn Fern"},"Carolyn Fern"),r.a.createElement("option",{value:"Joe Diamond"},"Joe Diamond"),r.a.createElement("option",{value:"Preston Fairmont"},"Preston Fairmont"),r.a.createElement("option",{value:"Diana Stanley"},"Diana Stanley"),r.a.createElement("option",{value:"Rita Young"},"Rita Young"),r.a.createElement("option",{value:"Marie Lambeau"},"Marie Lambeau"),r.a.createElement("option",{value:"Tommy Muldoon"},"Tommy Muldoon"),r.a.createElement("option",{value:"Mandy Thompson"},"Mandy Thompson"),r.a.createElement("option",{value:"Tony Morgan"},"Tony Morgan"),r.a.createElement("option",{value:"Luke Robinson"},"Luke Robinson"),r.a.createElement("option",{value:"Patrice Hathaway"},"Patrice Hathaway"),r.a.createElement("option",{value:"Norman Withers"},"Norman Withers"),r.a.createElement("option",{value:"Silas Marsh"},"Silas Marsh"),r.a.createElement("option",{value:"Dexter Drake"},"Dexter Drake")),h,E)};var s=function(e){var a={},t={};function n(a){e.onChangeSetting(a.target.attributes.name.nodeValue,a.target.attributes.value.nodeValue)}return"Build Deck"===e.draftTab?(a={backgroundColor:"#ebebeb"},t={backgroundColor:"#bababa",borderLeft:"black 2px solid",borderBottom:"black 2px solid"}):(a={backgroundColor:"#bababa",borderRight:"black 2px solid",borderBottom:"black 2px solid"},t={backgroundColor:"#ebebeb"}),r.a.createElement("div",{className:"draft-type"},r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Build Deck",style:a,onClick:n},"Build Deck"),r.a.createElement("div",{className:"type-button",name:"draftTab",value:"Upgrade",style:t,onClick:n},"Upgrade"))};var d=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"})};var u=function(e){return r.a.createElement("div",{className:"draftSettingsDraft"},r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("input",{type:"range",min:"2",max:"15",step:"1",value:e.draftCount,className:"slider",name:"draftCount1",onChange:function(a){e.onChangeSetting(a.target.name,a.target.value)}}),r.a.createElement("span",{className:"sliderValue"},e.draftCount))};var f=function(e){return r.a.createElement("div",{className:"draftPhase"},r.a.createElement("h4",{style:{padding:"0 0 5px 0"}},"Stage ",e.phase),r.a.createElement("label",null,"Cards to select from:"),r.a.createElement("input",{type:"range",min:"1",max:"15",value:e.draftCount,className:"slider",name:"draftCount",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCount),r.a.createElement("br",null),r.a.createElement("label",null,"Cards selected in this stage: "),r.a.createElement("input",{type:"range",min:"0",max:e.maxCards,value:e.draftCards,className:"slider",name:"draftCards",onChange:e.onChangeSetting}),r.a.createElement("span",{className:"sliderValue"},e.draftCards),r.a.createElement("label",null,"Include cards with limited deck slots:"),r.a.createElement("input",{type:"checkbox",checked:e.draftUseLimited,name:"draftUseLimited",onChange:e.onChangeSetting}))};var m=function(e){var a=e.deckSize-e.draftCards[0],t=a-e.draftCards[1],n=t-e.draftCards[2],o=null,l=null,i={},c={},s={};return a<e.draftCards[1]?(o=a>0?"Only "+a:"No",i={display:"block"}):i={display:"none"},t<e.draftCards[2]?(l=t>0?"Only "+t:"No",c={display:"block"},t<0&&(t=0)):c={display:"none"},s=n>0?{display:"block"}:{display:"none"},r.a.createElement("div",{className:"draftSettingsDraft"},r.a.createElement(f,{phase:"1",draftCount:e.draftCount[0],draftCards:e.draftCards[0],draftUseLimited:e.draftUseLimited[0],maxCards:e.deckSize,onChangeSetting:function(a){e.onChangeSetting(a.target.name+"1",a.target.value)}}),r.a.createElement(f,{phase:"2",draftCount:e.draftCount[1],draftCards:e.draftCards[1],draftUseLimited:e.draftUseLimited[1],maxCards:e.deckSize,onChangeSetting:function(a){e.onChangeSetting(a.target.name+"2",a.target.value)}}),r.a.createElement(f,{phase:"3",draftCount:e.draftCount[2],draftCards:e.draftCards[2],draftUseLimited:e.draftUseLimited[2],maxCards:e.deckSize,onChangeSetting:function(a){e.onChangeSetting(a.target.name+"3",a.target.value)}}),r.a.createElement("div",{className:"warning",style:i},r.a.createElement("b",null,"Warning:")," ",o," cards will be drawn in Phase 2."),r.a.createElement("div",{className:"warning",style:c},r.a.createElement("b",null,"Warning:")," ",l," cards will be drawn in Phase 3."),r.a.createElement("div",{className:"warning",style:s},r.a.createElement("b",null,"Warning:")," The final ",n," cards will be drawn at random."))};var p=function(e){var a,t;return"chaos"===e.draftType?(a=r.a.createElement(d,{onChangeSetting:e.onChangeSetting}),t=r.a.createElement("div",{className:"description"},"The original Ultimatum of Chaos rules from the 2017 Invocation Event.  A full deck will be created completely randomly from all cards available to the chosen investigator.")):"draft"===e.draftType?(a=r.a.createElement(u,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting}),t=r.a.createElement("div",{className:"description"},'Select cards one by one from a random display of cards available to the chosen investigator.  Each card will be selected from a number of cards determined by the "Cards to select from" option.')):"phaseDraft"===e.draftType&&(a=r.a.createElement(m,{draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}),t=r.a.createElement("div",{className:"description"},'The draft will proceed through 3 distinct stages.  All stages will draft from the full set of cards available to the chosen investigator.  Each stage will draft a number of cards equal to "Cards selected in this stage", not including Permanent cards.  Each will be selected from a number of cards determined by the "Cards to select from" option.  This allows you to use completely random selection for part of the deck, or use a wider range of choices for part of the deck.')),r.a.createElement("div",{className:"offsetDiv"},r.a.createElement("label",null,"Type:"),r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:function(a){e.onChangeSetting(a.target.name,a.target.value)}},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft"),r.a.createElement("option",{value:"phaseDraft"},"Draft in stages")),a,t)};var g=function(e){function a(a){e.onChangeSetting(a.target.name,a.target.value)}var t;return"chaos"===e.draftType?t=r.a.createElement(d,{onChangeSetting:e.onChangeSetting}):"draft"===e.draftType&&(t=r.a.createElement(u,{draftCount:e.draftCount[0],onChangeSetting:e.onChangeSetting})),r.a.createElement("div",{className:"offsetDiv"},r.a.createElement("label",null,"Type:"),r.a.createElement("select",{name:"draftType",value:e.draftType,onChange:a},r.a.createElement("option",{value:"chaos"},"Standard chaos"),r.a.createElement("option",{value:"draft"},"Simple draft")),r.a.createElement("label",null,"Weighting:"),r.a.createElement("select",{name:"draftWeighting",value:e.draftWeighting,onChange:a},r.a.createElement("option",{value:"low"},"Prefer low XP"),r.a.createElement("option",{value:"medium"},"Default"),r.a.createElement("option",{value:"high"},"Prefer high XP")),r.a.createElement("label",null,"XP:"),r.a.createElement("input",{name:"draftXP",type:"number",value:e.draftXP,min:"1",onChange:a}),t)};var v=function(e){var a="Build Deck"===e.draftTab?r.a.createElement(p,{draftType:e.draftType,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}):r.a.createElement(g,{draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,deckSize:e.deckSize,onChangeSetting:e.onChangeSetting}),t=e.ready?r.a.createElement("button",{className:"button-ready",onClick:function(a){e.onChangeSetting("building",!0)}},"Start"):r.a.createElement("button",{className:"button-loading"},"Loading...");return r.a.createElement("div",{className:"settings"},r.a.createElement(s,{draftTab:e.draftTab,onChangeSetting:e.onChangeSetting}),r.a.createElement("h3",null,"Draft Options"),r.a.createElement("h5",null,e.draftTab),a,t)};var h=function(e){var a=e.cardList,t=e.cardData,n=e.updateCardOverlay,o=0,l=0,i=0,c=0,s=[],d=[],u=[],f=[],m=[],p=[],g=[],v=[],h=[],E=[],C=[],y=[],b=[];function k(e){var a=t.filter((function(a){return a.code===e.target.id}));if(a&&a.length>0){var r="http://www.arkhamdb.com"+a[0].imagesrc;n(r,"Right")}}function S(e){var a=t.filter((function(a){return a.code===e.target.id}));if(a&&a.length>0){var r="http://www.arkhamdb.com"+a[0].imagesrc;n(r,"Left")}}function P(e){n(null,"Left")}a.forEach((function(e){"event"===e.type_code?(C.push(e),l+=e.count):"skill"===e.type_code?(y.push(e),i+=e.count):"asset"===e.type_code?(e.permanent?E.push(e):"Hand"===e.slot?s.push(e):"Hand x2"===e.slot?d.push(e):"Arcane"===e.slot?u.push(e):"Arcane x2"===e.slot?f.push(e):"Accessory"===e.slot?m.push(e):"Body"===e.slot?p.push(e):"Ally"===e.slot?g.push(e):"Tarot"===e.slot?v.push(e):h.push(e),o+=e.count):(b.push(e),c+=e.count)}));var L=o>0?r.a.createElement("h4",null,"Assets (",o,")"):null,D=s.length>0?r.a.createElement("p",{className:"slot-header"},"Hand"):null,O=s.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),x=d.length>0?r.a.createElement("p",{className:"slot-header"},"Hand x2"):null,N=d.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),w=u.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane"):null,T=u.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),j=f.length>0?r.a.createElement("p",{className:"slot-header"},"Arcane x2"):null,_=f.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),z=m.length>0?r.a.createElement("p",{className:"slot-header"},"Accessory"):null,U=m.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),A=p.length>0?r.a.createElement("p",{className:"slot-header"},"Body"):null,B=p.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),M=g.length>0?r.a.createElement("p",{className:"slot-header"},"Ally"):null,W=g.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),X=v.length>0?r.a.createElement("p",{className:"slot-header"},"Tarot"):null,R=v.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),H=h.length>0?r.a.createElement("p",{className:"slot-header"},"Other"):null,I=h.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),J=E.length>0?r.a.createElement("p",{className:"slot-header"},"Permanent"):null,F=E.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:k,onPointerLeave:P,key:a},e.name,t)})),q=l>0?r.a.createElement("h4",null,"Events (",l,")"):null,V=C.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:S,onPointerLeave:P,key:a},e.name,t)})),Y=i>0?r.a.createElement("h4",null,"Skills (",i,")"):null,Z=y.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:S,onPointerLeave:P,key:a},e.name,t)})),G=c>0?r.a.createElement("h4",null,"Other (",c,")"):null,K=b.sort((function(e,a){return e.name>a.name?1:-1})).map((function(e,a){var t=e.count>1?" x"+e.count:null;return r.a.createElement("p",{id:e.key,onPointerEnter:S,onPointerLeave:P,key:a},e.name,t)}));return r.a.createElement("div",{className:"settings"},r.a.createElement("h3",{style:{marginBottom:"-10px"}},"Card List"),r.a.createElement("div",{className:"cardContainer"},r.a.createElement("div",{className:"col1"},L,D,O,x,N,w,T,j,_,z,U,A,B,M,W,X,R,H,I,J,F),r.a.createElement("div",{className:"col2"},q,V,Y,Z,G,K)))};var E=function(e){var a=e.draftCount,t=e.draftPool,n=e.draftCard,o=e.draftType,l=e.phase,i=e.cardList,c=e.updateCardList,s=e.updateDraftPool,d=[];function u(e){var a=t.findIndex((function(a){return e.target.src.includes(a.imagesrc)})),r=n(t[a],d);c(r),s([])}d=d.concat(i);for(var f=[],m=0;m<a;m++){var p="https://www.arkhamdb.com"+t[m].imagesrc;f.push(r.a.createElement("div",{className:"draft-card",key:m},r.a.createElement("img",{className:"draft-image",src:p,alt:t[m].name,onClick:u})))}var g="phaseDraft"===o?" - Stage "+l:null;return r.a.createElement("div",{className:"settings"},r.a.createElement("h3",null,"Draft",g),r.a.createElement("div",{className:"draft-container"},f),r.a.createElement("p",null,"Click image to draft card"))};var C=function(e){var a=e.investigator,t=e.deckSize,n=e.draftTab,o=e.draftXP,l=e.draftCount,i=e.draftProgress,c=e.draftType,s=e.phase,d=e.cardList,u=e.draftPool,f=e.cardData,m=e.draftCard,p=e.updateCardList,g=e.updateDraftPool,v=e.resetApp,C=e.updateCardOverlay,y=null,b=null;if(f){var k=Object.keys(f).filter((function(e){return f[e].name===a}))[0],S="https://www.arkhamdb.com"+f[k].imagesrc,P="https://www.arkhamdb.com"+f[k].backimagesrc;y=r.a.createElement("img",{className:"investigator-image",src:S,alt:e.investigator}),b=r.a.createElement("img",{className:"investigator-image",src:P,alt:e.investigator+" (back)"})}var L=null;u.length>0&&(L=r.a.createElement(E,{draftCount:l,draftCard:m,phase:s,draftType:c,draftPool:u,cardList:d,updateCardList:p,updateDraftPool:g}));var D="Build Deck"===n?r.a.createElement("p",null,r.a.createElement("b",null,"Cards: "),i,"/",t):r.a.createElement("p",null,r.a.createElement("b",null,"XP: "),i,"/",o);return r.a.createElement("div",null,r.a.createElement("div",{className:"settings"},r.a.createElement("h2",null,a),r.a.createElement("br",null),y,b,D),L,r.a.createElement(h,{cardList:d,cardData:f,updateCardOverlay:C}),r.a.createElement("button",{onClick:v},"Restart"))};var y=function(e){var a=null,t=Object(n.useState)(null),o=Object(i.a)(t,2),l=o[0],s=o[1],d=Object(n.useState)('Left"'),u=Object(i.a)(d,2),f=u[0],m=u[1],p=null;return l&&(p=r.a.createElement("div",{className:"floatingImage"+f},r.a.createElement("img",{src:l,alt:""}))),a=e.fetchError?r.a.createElement("div",null,"Fetch error!"):e.building?r.a.createElement(C,{draftType:e.draftType,draftTab:e.draftTab,investigator:e.investigator,secondaryClass:e.secondaryClass,deckSize:e.deckSize,draftXP:e.draftXP,draftCount:e.draftCount[e.phase-1],draftCards:e.draftCards[e.phase-1],draftProgress:e.draftProgress,phase:e.phase,cardList:e.cardList,cardData:e.cardData,draftPool:e.draftPool,draftCard:e.draftCard,updateCardList:e.updateCardList,updateDraftPool:e.updateDraftPool,updateCardOverlay:function(e,a){s(e),m(a)},resetApp:e.resetApp}):r.a.createElement("div",null,r.a.createElement(c,{investigator:e.investigator,secondaryClass:e.secondaryClass,selectedDeckSize:e.selectedDeckSize,deckSize:e.deckSize,cardData:e.cardData,onChangeSetting:e.handleChange}),r.a.createElement(v,{draftTab:e.draftTab,draftType:e.draftType,draftWeighting:e.draftWeighting,draftXP:e.draftXP,draftCount:e.draftCount,draftCards:e.draftCards,draftUseLimited:e.draftUseLimited,deckSize:e.deckSize,ready:e.ready,onChangeSetting:e.handleChange})),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"ArkhamDraft"),a,p)};var b=function(e,a){var t=!1,n=null;if(0==e.length)return null;for(var r=function(){var r=(n=e[Math.floor(Math.random()*e.length)]).code;(a&&a.length>0?a.findIndex((function(e){return e.code===r})):-1)<0&&(t=!0)};!t;)r();return n};var k=function(e){var a=e.investigator,t=e.secondaryClass,n=e.cardData,r=e.cardList,o=e.deckSize,l=e.upgrade,i=e.draftUseLimited,c=e.draftXP,s={core:1,dwl:1,tmm:1,tece:1,bota:1,uau:1,wda:1,litas:1,ptc:1,eotp:1,tuo:1,apot:1,tpm:1,bsr:1,dca:1,tfa:1,tof:1,tbb:1,hote:1,tcoa:1,tdoy:1,sha:1,tcu:1,tsn:1,wos:1,fgg:1,uad:1,icc:1,bbt:1,tde:1,sfk:1,tsh:1,dsm:1,pnr:1,wgd:1,woc:1,rtnotz:1,rtdwl:1,rtptc:1,books:1},d=Object.keys(n).filter((function(e){return n[e].name===a}))[0],u=n[d].deck_options,f=function(e,a){if(!e)return[];var t=[];return e.forEach((function(e){for(var n=!1,r=0;r<a.length;r++){if(!a[r].limit)L(e,a[r])&&(n=!0)}n||t.push(e)})),t}(r,u),m=null;if("Joe Diamond"===a){var p=r.filter((function(e){var a=e.traits;return!!(a&&a.search(new RegExp("insight","i"))>=0)}));o-S(r)+S(p)<=10&&(m=[{requirement:10,trait:"insight"}])}else if("Lola Hayes"===a){for(var g=["guardian","seeker","rogue","mystic","survivor"].map((function(e){return{faction:e,count:S(r.filter((function(a){return a.faction_code===e||a.faction2_code===e})))}})).sort((function(e,a){return a.count-e.count})),v=0,h=0;h<3;h++)v+=Math.min(7,g[h].count);if(o-S(r)+v<=21){for(var E=g[2].count,C=[],y=0;y<5;y++)g[y].count<7&&g[y].count>=E&&C.push(g[y].faction);m=[{requirement:7,faction:C}]}}var b=0,k=0;function S(e){var a=0;return e&&e.forEach((function(e){e.permanent||(a+=e.count)})),a}function P(e,a){var t=0;return e&&e.forEach((function(e){L(e,a)&&(t+=e.count)})),t}function L(e,a){var n=!0,r=!0,o=!0,l=!0,i=!0,c=!0,s=!0;if("Secondary Class"===a.name&&(o=!1,e.faction_code===t&&(o=!0),e.faction2_code===t&&(o=!0)),a.faction){r=!1;for(var d=0;d<a.faction.length;d++)e.faction_code===a.faction[d]&&(r=!0),e.faction2_code===a.faction[d]&&(r=!0)}if(a.level){n=!1;var u=a.level.min,f=a.level.max,m=void 0===e.xp?0:e.xp;m>=u&&m<=f&&(n=!0)}if(a.trait){l=!1;var p=e.traits;p&&p.search(new RegExp(a.trait,"i"))>=0&&(l=!0)}if(a.uses){i=!1;var g=e.text;g&&g.search(new RegExp("Uses \\([0-9\\s]+"+a.uses[0]+"\\)","i"))>=0&&(i=!0)}if(a.type){c=!1;var v=e.type_code;v&&a.type.find((function(e){return e===v}))&&(c=!0)}return a.text&&(s=!1,e.text&&e.text.search(new RegExp(a.text,"i"))>=0&&(s=!0)),r&&n&&l&&i&&c&&o&&s}return l&&(b=1,k=c),n.filter((function(e){if("investigator"===e.type_code)return!1;if("story"===e.type_code)return!1;if("location"===e.type_code)return!1;if("enemy"===e.type_code)return!1;if("treachery"===e.type_code)return!1;if(e.bonded_to)return!1;if(e.subtype_code)return!1;var a=0;if(e.xp&&(a=e.xp),e.exceptional&&(a*=2),a<b)return!1;if(a>k)return!1;if(e.restrictions&&e.restrictions.investigator)return!1;if(!s[e.pack_code])return!1;for(var t=!1,n=0;n<u.length;n++)if(!u[n].requirement){var o=!1;if(L(e,u[n]))if(o=!0,u[n].not)o=!1;else if(u[n].limit){if(i)P(f,u[n])>=u[n].limit&&(o=!1);else o=!1}o&&(t=!0)}if(!t)return!1;var l=!1;if(r.forEach((function(a){a.name===e.name&&a.count>=e.deck_limit&&(l=!0)})),l)return!1;if(m)for(var c=0;c<m.length;c++)if(!L(e,m[c]))return!1;return!0}))};var S=function(e){var a=e.draftCards,t=e.draftCard,n=e.cardList,r=e.investigator,o=[];o=o.concat(n);for(var l=0;l<a;){e.cardList=o;var i=k(e),c=b(i);o=t(c,o),c.permanent||l++,"Joe Diamond"!==r&&"Lola Hayes"!==r||(e.cardList=o,i=k(e))}return o};var P=function(e){for(var a=e.draftCount,t=k(e),n=[],r=0;r<a;r++){var o=b(t,n);n.push(o)}return n};var L=function(){var e=Object(n.useState)("Roland Banks"),a=Object(i.a)(e,2),t=a[0],o=a[1],l=Object(n.useState)(null),c=Object(i.a)(l,2),s=c[0],d=c[1],u=Object(n.useState)(null),f=Object(i.a)(u,2),m=f[0],p=f[1],g=Object(n.useState)("30"),v=Object(i.a)(g,2),h=v[0],E=v[1],C=Object(n.useState)("Build Deck"),b=Object(i.a)(C,2),k=b[0],L=b[1],D=Object(n.useState)("draft"),O=Object(i.a)(D,2),x=O[0],N=O[1],w=Object(n.useState)("medium"),T=Object(i.a)(w,2),j=T[0],_=T[1],z=Object(n.useState)(1),U=Object(i.a)(z,2),A=U[0],B=U[1],M=Object(n.useState)([3,3,3]),W=Object(i.a)(M,2),X=W[0],R=W[1],H=Object(n.useState)([10,10,10]),I=Object(i.a)(H,2),J=I[0],F=I[1],q=Object(n.useState)([!0,!0,!0]),V=Object(i.a)(q,2),Y=V[0],Z=V[1],G=Object(n.useState)(!1),K=Object(i.a)(G,2),Q=K[0],$=K[1],ee=Object(n.useState)(!0),ae=Object(i.a)(ee,2),te=ae[0],ne=ae[1],re=Object(n.useState)(!1),oe=Object(i.a)(re,2),le=oe[0],ie=oe[1],ce=Object(n.useState)(null),se=Object(i.a)(ce,2),de=se[0],ue=se[1],fe=Object(n.useState)(!1),me=Object(i.a)(fe,2),pe=me[0],ge=me[1],ve=Object(n.useState)([]),he=Object(i.a)(ve,2),Ee=he[0],Ce=he[1],ye=Object(n.useState)([]),be=Object(i.a)(ye,2),ke=be[0],Se=be[1],Pe=Object(n.useState)(1),Le=Object(i.a)(Pe,2),De=Le[0],Oe=Le[1],xe=Object(n.useState)(!1),Ne=Object(i.a)(xe,2),we=Ne[0],Te=Ne[1],je=0,_e=0;if(Ee)for(var ze in Ee)Ee[ze].permanent||(je+=Ee[ze].count),_e+=Ee[ze].xp*Ee[ze].count;function Ue(e,a){var t=[];(t=t.concat(X))[e-1]=a,R(t)}function Ae(e,a){var t=[];(t=t.concat(J))[e-1]=a,F(t)}function Be(e,a){var t=[];(t=t.concat(Y))[e-1]=!Y[e-1],Z(t)}function Me(e,a){var t=0;(e.xp&&(t=e.xp,e.exceptional&&(t*=2)),a)?(a.length>0?a.findIndex((function(a){return a.key===e.code})):-1)>=0?a.map((function(a){return a.name===e.name?(a.count=a.count+1,a):a})):a.push({name:e.name,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:t,permanent:e.permanent,count:1}):a=[{name:e.name,key:e.code,type_code:e.type_code,slot:e.slot,faction_code:e.faction_code,faction2_code:e.faction2_code,traits:e.traits,xp:t,permanent:e.permanent,count:1}];return a}Object(n.useEffect)((function(){return ie(!0),void fetch("https://cors-anywhere.herokuapp.com/https://arkhamdb.com/api/public/cards/").then((function(e){return e.json()})).then((function(e){ue(e),ie(!1)})).catch((function(){return ge(!0)}))}),[]),Object(n.useEffect)((function(){if(Q&&!we){var e="Build Deck"===k?je:_e,a=0;if("Build Deck"===k)if("phaseDraft"===x){if(De>3)a=h;else for(var n=0;n<De;n++)a+=parseInt(J[n],10);a>h&&(a=h)}else a=h;else a=A;if(te){if("chaos"===x){var r=S({investigator:t,secondaryClass:s,deckSize:h,draftCards:h,draftXP:A-e,upgrade:"Upgrade"===k,cardList:Ee,cardData:de,draftCard:Me});Ce(r),ne(!1),Te(!0)}else if(e<a)if(1==X[De-1]){var o=S({investigator:t,secondaryClass:s,deckSize:h,draftCards:a-e,draftXP:A-e,upgrade:"Upgrade"===k,cardList:Ee,cardData:de,draftCard:Me});Ce(o),Oe(De+1)}else{var l=P({investigator:t,secondaryClass:s,deckSize:h,draftCount:X[De-1],draftUseLimited:Y[De-1],draftXP:A-e,upgrade:"Upgrade"===k,cardList:Ee,cardData:de,draftCard:Me});Se(l),ne(!1)}}else if(ke.length<1)if("draft"===x)if(e<a){var i=P({investigator:t,secondaryClass:s,deckSize:h,draftCount:X[De-1],draftUseLimited:Y[De-1],draftXP:A-e,upgrade:"Upgrade"===k,cardList:Ee,cardData:de,draftCard:Me});Se(i)}else Te(!0);else if(e<a){var c=P({investigator:t,secondaryClass:s,deckSize:h,draftCount:X[De-1],draftUseLimited:Y[De-1],draftXP:A-e,upgrade:"Upgrade"===k,cardList:Ee,cardData:de,draftCard:Me});Se(c)}else if(De>=3){if(e<h){var d=S({investigator:t,secondaryClass:s,deckSize:h,draftCards:h-e,draftXP:A-e,upgrade:"Upgrade"===k,cardList:Ee,cardData:de,draftCard:Me});Ce(d)}Te(!0)}else Oe(De+1),ne(!0)}}),[Q,we,te,x,je,_e,h,t,Ee,de,X,Y,De,J,ke,k,A]);var We=de&&!le&&!pe;return r.a.createElement(y,{investigator:t,secondaryClass:s,selectedDeckSize:m,deckSize:h,draftTab:k,draftType:x,draftWeighting:j,draftXP:A,draftCount:X,draftCards:J,draftUseLimited:Y,draftProgress:"Build Deck"===k?je:_e,ready:We,building:Q,fetchError:pe,phase:De,cardList:Ee,draftPool:ke,cardData:de,handleChange:function(e,a){if("investigator"===e){if(o(a),de&&!m){var n=Object.keys(de).filter((function(e){return de[e].name===a}))[0];E(de[n].deck_requirements.size);var r=de[n].deck_options.filter((function(e){return"Secondary Class"===e.name}));r.length>0&&d(r[0].faction_select[0])}}else if("secondaryClass"===e)d(a);else if("selectedDeckSize"===e)p(a),E(a);else if("draftTab"===e)L(a);else if("draftType"===e)N(a);else if("draftWeighting"===e)_(a);else if("draftXP"===e)B(a);else if("draftCount1"===e)Ue(1,a);else if("draftCount2"===e)Ue(2,a);else if("draftCount3"===e)Ue(3,a);else if("draftCards1"===e)Ae(1,a);else if("draftCards2"===e)Ae(2,a);else if("draftCards3"===e)Ae(3,a);else if("draftUseLimited1"===e)Be(1,a);else if("draftUseLimited2"===e)Be(2,a);else if("draftUseLimited3"===e)Be(3,a);else if("building"===e){if(1==a&&de){var l=Object.keys(de).filter((function(e){return de[e].name===t}))[0];if(m||E(de[l].deck_requirements.size),!s){var i=de[l].deck_options.filter((function(e){return"Secondary Class"===e.name}));i.length>0&&d(i[0].faction_select[0])}}$(a)}},draftCard:Me,updateCardList:Ce,updateDraftPool:Se,resetApp:function(){$(!1),ne(!0),Ce([]),Se([]),Oe(1),Te(!1)}})};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.0b38bc38.chunk.js.map